<link rel="import" href="/lib/paper-tabs-master/paper-tab.html" />
<link rel="import" href="/lib/paper-tabs-master/paper-tabs.html" />
<link rel="import" href="/lib/iron-pages-master/iron-pages.html" />
<link rel="import" href="/lib/iron-menu-behavior/iron-menubar-behavior.html" />
<link rel="import" href="/lib/iron-form/iron-form.html" />
<link rel="import" href="/lib/paper-input/paper-input.html" />
<link rel="import" href="/lib/paper-button/paper-button.html" />
<link rel="import" href="/lib/paper-toast-master/paper-toast.html" />

<link rel="import" href="/lib/vaadin-valo-theme/vaadin-date-picker.html">
<link rel="import" href="/lib/vaadin-valo-theme/vaadin-checkbox.html">
<link rel="import" href="/lib/vaadin-text-field/vaadin-text-field.html">
<link rel="import" href="/lib/vaadin-date-picker/vaadin-date-picker.html">
<link rel="import" href="/lib/vaadin-grid/vaadin-grid.html">
<link rel="import" href="/lib/vaadin-checkbox/vaadin-checkbox.html">
<link rel="import" href="/lib/vaadin-combo-box/vaadin-combo-box.html" />

<link rel="import" href="/lib/vaadin-radio-button/vaadin-radio-button.html">
<link rel="import" href="/lib/vaadin-radio-button/vaadin-radio-button-group.html">

<link rel="import" href="/lib/such-textarea/such-textarea.html">
<link rel="import" href="/lib/paper-tooltip-master/paper-tooltip.html">
<link rel="import" href="/lib/neon-animation/web-animations.html">

<link rel="import" href="/lib/paper-collapse-item/paper-collapse-group.html">
<link rel="import" href="/lib/paper-collapse-item/paper-collapse-item.html">

<link rel="import" href="/lib/vaadin-context-menu/vaadin-context-menu.html" />
<link rel="import" href="/lib/vaadin-list-box/vaadin-list-box.html" />
<link rel="import" href="/lib/vaadin-item/vaadin-item.html" />
<!--<link rel="import" href="/lib/paper-menu/paper-menu.html" />-->
<!--<link rel="import" href="/lib/paper-item/paper-item.html" />-->

<dom-module id="x-procedimentodetails">
    <template>
        <!-- STYLES -->
        <link rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap.css" />
        <link rel="stylesheet" href="/lib/font-awesome-4.7.0/css/font-awesome.min.css" />
        <link rel="stylesheet" href="/css/main.css" />

        <style>
            .mb-15 {
                margin-bottom: 15px;
            }

            .mb-7 {
                margin-bottom: 7px;
            }

            vaadin-combo-box {
                margin-top: 0px !important;
                width: 100% !important;
            }

            vaadin-date-picker {
                margin-top: 0px !important;
                width: 100% !important;
            }

            vaadin-text-field {
                margin-top: 0px !important;
                width: 100%;
            }

            input[readonly] {
                border: 2px solid transparent;
            }

            input {
                font: inherit;
            }

            .break_clear {
                margin-top: 15px;
            }

            hr {
                line-height: 5px;
            }

            .customHr {
                line-height: 1px;
                background-color: black;
            }

            paper-tooltip {
                padding: 11px;
                right: 5px;
                opacity: 1;
                box-sizing: border-box;
                pointer-events: none;
                max-width: 500px;
                left: 2px !important;
                right: none;
                white-space: initial;
                --paper-tooltip: {
                                  font-size: 13px;
                                  background: #f5f5f5;
                                  background: white;
                                  color: #2A2A2A;
                                  padding: 10px;
                                  line-height: 1.3em;
                                  -webkit-box-shadow: 5px 5px 10px -1px rgba(0,0,0,0.2);
                                  -moz-box-shadow: 5px 5px 10px -1px rgba(0,0,0,0.2);
                                  box-shadow: 5px 5px 10px -1px rgba(0,0,0,0.2);
                             }
            }

            [part="label"] {
                color: rgba(48, 64, 84, 0.52);
                margin-bottom: 1px;
            }

            .title--bgblue {
                border: none;
                border-radius: 6px;
                color: white !important;
                background-color: cornflowerblue;
                border: none !important;
            }

            .title--bgyellow {
                border: none;
                border-radius: 6px;
                color: dimgrey !important;
                background-color: yellow;
                border: none !important;
            }

            paper-collapse-item {
                --paper-item: { padding: 0 0;};
                --paper-collapse-item-header: {
                        padding: 0 15px;
                        color: #333;
                        background-color: #f5f5f5;
                        border-bottom: solid #ddd 1px;
                        border-top-left-radius: 3px;
                        border-top-right-radius: 3px;

                    } --paper-collapse-toogle-icon: {
                    //display: none;
                    } --paper-collapse-item-content {

                    }
            }

            .btn--confirm {
                min-width: 50px !important;
                height: 30px !important;
                padding: 5px 10px;
                cursor: pointer;
                background: #71BCC1;
                color: white;
                margin-top: 7px;
            }

            .btn--sendtoevaluate {
                min-width: 50px !important;
                height: 30px !important;
                padding: 5px 10px;
                cursor: pointer;
                margin-top: 7px;
            }

            .btn--remove {
                min-width: 50px !important;
                height: 30px !important;
                padding: 5px 10px;
                cursor: pointer;
                margin-top: 7px;
                color: white;
                background: #D5662F;
            }
            /*zpgm*/
            .btn--return {
                min-width: 50px !important;
                height: 30px !important;
                padding: 5px 10px;
                cursor: pointer;
                margin-top: 7px;
                color: white;
                background: #9E21FF;
            }

            .btn--cntxt-menu {
                min-width: 50px !important;
                height: 30px !important;
                padding: 5px 10px;
                cursor: pointer;
                margin-top: 7px;
                color: white;
                background: #FF7259;
            }

            vaadin-grid.disabled:after {
                content: "";
                position: absolute;
                left: 0;
                right: 0;
                top: 0;
                bottom: 0;
                width: 100%;
                cursor: not-allowed;
            }
            paper-button.disabled {
                cursor: not-allowed;
                pointer-events: none;
            }
        </style>

        <!-- Dropdowns populate.b -->
        <iron-ajax url="/PopulateDropdowns/GetRegionCode"
                   last-response="{{CBRegions}}"
                   auto method="post"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetFunctionalAreaCode"
                   last-response="{{CBFunctionalAreas}}"
                   auto method="post" handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetResponsabilityCenterCode"
                   last-response="{{CBResponsabilityCenterCodes}}"
                   auto method="post"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetPocedimentosCcpProcedimentoType"
                   last-response="{{LProcedimentoType}}"
                   auto method="post"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetProcedimentosCcpType"
                   last-response="{{LType}}"
                   auto method="post"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetProcedimentosCcpStates"
                   last-response="{{LProcedimentoState}}"
                   auto method="post" handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetBoolValues"
                   last-response="{{LBoolValues}}"
                   auto method="post" handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetPocedimentosAbertoFechado"
                   last-response="{{LAbertoFechado}}"
                   auto method="post" handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/GetUsersWhoAreElementosJuri"
                   last-response="{{LUsers}}"
                   auto method="post"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <!-- Dropdowns populate.e -->

        <!-- Controller actions.b -->
        <iron-ajax url="/ProcedimentosCcps/GetUserFeatures"
                   last-response="{{UserAccesses}}"
                   method="post"
                   handle-as="json"
                   id="ajax_userpermissions"
                   on-response="_userPermissionsResponseProcessor"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/GetProcedimentoDetails"
                   last-response="{{data}}"
                   method="post"
                   handle-as="json"
                   id="page_databound_ajax"
                   on-response="_responseProcessor"
                   content-type="application/json">
        </iron-ajax>
        <!-- Data from Fluxo Trabalho.b -->
        <iron-ajax url="/ProcedimentosCcps/GetChecklistArea"
                   last-response="{{CLArea}}"           
                   method="post"
                   handle-as="json"
                   id="ajax_checklist_estado0"
                   on-response="_checklistResponseEstado0"
                   content-type="application/json">
        </iron-ajax> <!-- FluxoTrabalho.Estado == 0 -->
        <iron-ajax url="/ProcedimentosCcps/GetChecklistImobilizadoContabilidade"
                   last-response="{{CLImobContab}}"     
                   method="post"
                   handle-as="json"
                   id="ajax_checklist_estado1"
                   on-response="_checklistResponseEstado1"
                   content-type="application/json">
        </iron-ajax> <!-- FluxoTrabalho.Estado == 1 -->   
        <iron-ajax url="/ProcedimentosCcps/GetChecklistImobilizadoArea"
                   last-response="{{CLImobArea}}"
                   method="post"
                   handle-as="json"
                   id="ajax_checklist_estado2"
                   on-response="_checklistResponseEstado2"
                   content-type="application/json">
        </iron-ajax> <!-- FluxoTrabalho.Estado == 2 -->
        <iron-ajax url="/ProcedimentosCcps/GetChecklistImobilizadoCA"
                   last-response="{{CLImobCA}}"
                   method="post"
                   handle-as="json"
                   id="ajax_checklist_estado3"
                   on-response="_checklistResponseEstado3"
                   content-type="application/json">
        </iron-ajax> <!-- FluxoTrabalho.Estado == 3 -->
        <iron-ajax url="/ProcedimentosCcps/GetChecklistFundamentoCompras"
                   last-response="{{CLFundamentoCompras}}"
                   method="post"
                   handle-as="json"
                   id="ajax_checklist_estado4"
                   on-response="_checklistResponseEstado4"
                   content-type="application/json">
        </iron-ajax> <!-- FluxoTrabalho.Estado == 4 -->
        <iron-ajax url="/ProcedimentosCcps/GetChecklistFundamentoFinanceiros"
                   last-response="{{CLFundamentoFinanceiros}}"
                   method="post"
                   handle-as="json"
                   id="ajax_checklist_estado5"
                   on-response="_checklistResponseEstado5"
                   content-type="application/json">
        </iron-ajax> <!-- FluxoTrabalho.Estado == 5 -->
        <iron-ajax url="/ProcedimentosCcps/GetChecklistJuridicoAvaliacaoPecasOuContrato"
                   last-response="{{CLAvaliacaoJuridico}}"
                   method="post"
                   handle-as="json"
                   id="ajax_checklist_estado6ou14"
                   on-response="_checklistResponseEstado6ou14"
                   content-type="application/json">
        </iron-ajax> <!-- FluxoTrabalho.Estado == 6 || 14 -->
        <iron-ajax url="/ProcedimentosCcps/GetChecklistFundamentacaoArea"
                   last-response="{{CLFundamentacaoArea}}"
                   method="post"
                   handle-as="json"
                   id="ajax_checklist_estado7"
                   on-response="_checklistResponseEstado7"
                   content-type="application/json">
        </iron-ajax> <!-- FluxoTrabalho.Estado == 7 -->
        <iron-ajax url="/ProcedimentosCcps/GetChecklistAberturaOuAutorizacao"
                   last-response="{{CLAbertura}}"
                   method="post"
                   handle-as="json"
                   id="ajax_checklist_estado8ou17"
                   on-response="_checklistResponseEstado8ou17"
                   content-type="application/json">
        </iron-ajax> <!-- FluxoTrabalho.Estado == 8 || 17 -->
        <iron-ajax url="/ProcedimentosCcps/GetChecklistAdjudicacao"
                   last-response="{{CLAdjudicacao}}"
                   method="post"
                   handle-as="json"
                   id="ajax_checklist_estado15ou16"
                   on-response="_checklistResponseEstado15ou16"
                   content-type="application/json">
        </iron-ajax> <!-- FluxoTrabalho.Estado == 15 || 16 -->
        <!-- Data from Fluxo Trabalho.e -->

        <iron-ajax url="/ProcedimentosCcps/DeleteProcedimento"
                   last-response="{{deletedData}}"
                   method="post"
                   handle-as="json"
                   id="ajax_delete_procedimento"
                   on-response="_responseDeleteProcessor"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/CreateElementoJuri"
                   last-response="{{ElementoCreated}}"
                   method="post"
                   handle-as="json"
                   id="ajax_createelementojuri"
                   on-response="_createElementoJuriResponse"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/DeleteElementoJuri"
                   last-response="{{ElementoDeleted}}"
                   method="post"
                   handle-as="json"
                   id="ajax_deleteelementojuri"
                   on-response="_deleteElementoJuriResponse"
                   content-type="application/json">
        </iron-ajax>        
        <iron-ajax url="/ProcedimentosCcps/SubmitProcedimento"
                   last-response="{{ProcedimentoSubmitted}}"
                   method="post"
                   handle-as="json"
                   id="ajax_submitprocedimento"
                   on-response="_submitProcedimentoResponse"
                   content-type="application/json">
        </iron-ajax>

        <!-- Controller actions.e -->
        <!-- Header section of the Procedimento details -->
        <!--<iron-form id="formContract">-->
        <div class="panel panel-default">
            <div class="panel-heading">Cabeçalho</div>
            <div class="panel-body">
                <div>
                    <div class="row break_clear">
                        <div class="col-sm-3">
                            <vaadin-text-field type="text" value="{{data.no}}" id="no" name="no" label="Nº Procedimento" disabled="true"> </vaadin-text-field>
                        </div>
                        <div class="col-sm-3">
                            <vaadin-combo-box items="[[CBRegions]]" id="codigoRegiao" item-value-path="id" item-label-path="value" value="{{data.codigoRegiao}}" label="Cód. Região" disabled="{{ !_permissions.update }}" required error-message="Este campo é obrigatório">
                                <template>
                                    <table width="250px">
                                        <tr>
                                            <td width="20%">[[item.id]]</td>
                                            <td width="80%"> <b>[[item.value]]</b></td>
                                        </tr>
                                    </table>
                                </template>
                            </vaadin-combo-box>
                        </div>
                        <div class="col-sm-3">
                            <vaadin-combo-box items="[[CBFunctionalAreas]]" id="codigoAreaFuncional" item-value-path="id" item-label-path="value" value="{{data.codigoAreaFuncional}}" label="Àrea Funcional" disabled="{{ !_permissions.update }}" required error-message="Este campo é obrigatório">
                                <template>
                                    <table width="250px">
                                        <tr>
                                            <td width="30%">[[item.id]]</td>
                                            <td width="70%"> <b>[[item.value]]</b></td>
                                        </tr>
                                    </table>
                                </template>
                            </vaadin-combo-box>
                        </div>
                        <div class="col-sm-3">
                            <vaadin-combo-box items="[[CBResponsabilityCenterCodes]]" id="codigoCentroResponsabilidade" item-value-path="id" item-label-path="value" value="{{data.codigoCentroResponsabilidade}}" label="Centro Responsabilidade" disabled="{{ !_permissions.update }}" required error-message="Este campo é obrigatório">
                                <template>
                                    <table width="180px">
                                        <tr>
                                            <td width="40%">[[item.id]]</td>
                                            <td width="60%"> <b>[[item.value]]</b></td>
                                        </tr>
                                    </table>
                                </template>
                            </vaadin-combo-box>
                        </div>

                    </div>
                </div>
                <div>
                    <div class="row break_clear">
                        <div class="col-sm-3">
                            <vaadin-combo-box items="[[LProcedimentoState]]" item-value-path="id" item-label-path="value" required value="{{data.estado}}" label="Estado" disabled="true">
                                <template>
                                    <paper-icon-item>
                                        <paper-item-body two-line>
                                            <div>[[item.value]]</div>
                                        </paper-item-body>
                                    </paper-icon-item>
                                </template>
                            </vaadin-combo-box>
                        </div>
                        <div class="col-sm-3">
                            <vaadin-combo-box items="[[LType]]" item-value-path="id" item-label-path="value" required value="{{data.tipo}}" label="Tipo">
                                <template>
                                    <paper-icon-item>
                                        <paper-item-body two-line>
                                            <div>[[item.value]]</div>
                                        </paper-item-body>
                                    </paper-icon-item>
                                </template>
                            </vaadin-combo-box>
                        </div>
                        <div class="col-sm-3">
                            <div class="row">
                                <div class="col-sm-6">
                                    <vaadin-text-field type="text" value="{{data.ano}}" id="ano" name="ano" label="Ano" disabled="true"> </vaadin-text-field>
                                </div>
                                <div class="col-sm-6">
                                    <vaadin-text-field type="text" value="{{data.referencia}}" id="referencia" name="referencia" label="Referência" disabled="true"> </vaadin-text-field>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="row break_clear">
                        <div class="col-sm-3">
                            <vaadin-checkbox checked="{{data.imobilizado}}" required>Imobilizado?</vaadin-checkbox>
                            <vaadin-checkbox checked="{{data.tratado}}" required>Tratado?</vaadin-checkbox>
                        </div>

                    </div>
                </div>


                <!-- Procedimentos section tabs-->
                <paper-tabs fit-container no-slide autoselect autoselect-delay="0" selected="{{selected}}">
                    <paper-tab>Unidade Produtiva (0)</paper-tab>
                    <paper-tab>Imobilizado (1-2)</paper-tab>
                    <paper-tab>Fundamentos Decisão (4, 5 e 7)</paper-tab>
                    <paper-tab>CCP</paper-tab>
                    <paper-tab>Jurídicos</paper-tab>
                    <paper-tab>Valores Adjudicação</paper-tab>
                    <paper-tab>CA</paper-tab>
                    <paper-tab>Adjudicação</paper-tab>
                    <paper-tab>Workflow</paper-tab>
                    <paper-tab>Notas</paper-tab>
                    <paper-tab>Tempos</paper-tab>
                </paper-tabs>

                <iron-pages selected="{{selected}}">
                    <!-- Tab Unidade Produtiva-->
                    <div class="panel panel-default">
                        <paper-collapse-group>
                            <paper-collapse-item header="Avaliação Técnica" opened>
                                <!-- Tab Unidade Produtiva - Avaliação Tecnica-->
                                <div class="col-xs-12 mb-15">
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <paper-tooltip for="informacaoTecnica" position="top" offset="-1" animation-delay="1">
                                                Descrição da prestação de serviços ou bem a adquirir
                                            </paper-tooltip>
                                            <such-textarea rows="3" value="{{data.informacaoTecnica}}" id="informacaoTecnica" name="informacaoTecnica" label="Informação Técnica"> </such-textarea>
                                        </div>
                                        <div class="col-sm-6">
                                            <such-textarea rows="3" value="{{data.fundamentacaoAquisicao}}" id="fundamentacaoAquisicao" name="fundamentacaoAquisicao" label="Fundamentação Aquisição"> </such-textarea>
                                        </div>
                                    </div>
                                    
                                    <div class="row break_clear">
                                        <div class="col-sm-3">
                                            <vaadin-combo-box items="[[LBoolValues]]" item-value-path="booleanValue" item-label-path="stringValue" required value="{{data.precoBase}}" id="precoBase" label="Preço Base?">
                                                <template>
                                                    <paper-icon-item>
                                                        <paper-item-body two-line>
                                                            <div>[[item.stringValue]]</div>
                                                        </paper-item-body>
                                                    </paper-icon-item>
                                                </template>
                                            </vaadin-combo-box>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-combo-box items="[[LBoolValues]]" item-value-path="booleanValue" item-label-path="stringValue" required value="{{data.negociacao}}" id="negociacao" label="Negociação?">
                                                <template>
                                                    <paper-icon-item>
                                                        <paper-item-body two-line>
                                                            <div>[[item.stringValue]]</div>
                                                        </paper-item-body>
                                                    </paper-icon-item>
                                                </template>
                                            </vaadin-combo-box>
                                        </div>
                                    </div>
                                    <!-- Elementos Juri section.b -->
                                    <h2 class="separator" style="border-bottom:1px dotted; padding:0;">Elementos do Juri a designar pela UP</h2>
                                    <div class="table inlineForm">
                                        <div class="col-sm-3" style="padding-left:0;">
                                            <vaadin-combo-box items="[[LUsers]]" id="users" item-value-path="id" value="{{_userName }}" item-label-path="id" label="Possiveis Elementos">
                                                <template>
                                                    <paper-icon-item>
                                                        <paper-item-body two-line>
                                                            <div>[[item.value]]</div>
                                                        </paper-item-body>
                                                    </paper-icon-item>
                                                </template>
                                            </vaadin-combo-box>
                                        </div>
                                        <div id="formAddElemento">
                                            <div class="col-lg-3 col-sm-4">
                                                <p>Responsabilidades</p>
                                                <vaadin-radio-button-group id="responsabilidades" name="responsabilidades" value="{{responsabilidade}}">
                                                    <vaadin-radio-button id="_chkPresidente" checked="{{chkPresidente}}" value="presidente">Presidente</vaadin-radio-button>
                                                    <vaadin-radio-button id="_chkVogal" checked="{{chkVogal}}" value="vogal">Vogal</vaadin-radio-button>
                                                    <vaadin-radio-button id="_chkSuplente" checked="{{chkSuplente}}" value="suplente">Suplente</vaadin-radio-button>
                                                </vaadin-radio-button-group>
                                            </div>
                                            <div class="col-sm-2">
                                                <p>&nbsp;</p>
                                                <vaadin-checkbox id="_chkSendMail" checked="{{chkSendMail}}">Enviar Email</vaadin-checkbox>
                                            </div>
                                        </div>
                                        <div class="col-lg-3">
                                            <br />
                                            <paper-button class="btnSave" id="buttonCriarElementoJuri1" raised on-tap="_createElementoJuri"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                        </div>
                                    </div>
                                    <vaadin-grid id="gridElementosJuri1" aria-label="gridElementosJuri1" items="{{data.elementosJuri}}" class="grid" style="height:170px;">
                                        <vaadin-grid-column width="20%">
                                            <template class="header">
                                                Utilizador
                                            </template>
                                            <template>
                                                <vaadin-text-field id="idElemento1" type="text" value="{{ item.utilizador }}"></vaadin-text-field>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="20%">
                                            <template class="header">
                                                Nome
                                            </template>
                                            <template>
                                                <vaadin-text-field id="nomeElementoJuri1" type="text" value="{{ item.nomeEmpregado }}"></vaadin-text-field>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="8%">
                                            <template class="header">
                                                <center>
                                                    Presidente
                                                </center>
                                            </template>
                                            <template>
                                                <center>
                                                    <vaadin-checkbox id="isPresidente1" checked="{{item.presidente}}"></vaadin-checkbox>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="8%">
                                            <template class="header">
                                                <center>
                                                    Vogal
                                                </center>
                                            </template>
                                            <template>
                                                <center>
                                                    <vaadin-checkbox id="isVogal1" checked="{{item.vogal}}"></vaadin-checkbox>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="6%">
                                            <template class="header">
                                                <center>
                                                    Suplente
                                                </center>
                                            </template>
                                            <template>
                                                <center>
                                                    <vaadin-checkbox id="isSuplente1" checked="{{item.suplente}}"></vaadin-checkbox>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="8%">
                                            <template class="header">
                                                <center>
                                                    Enviar Email?
                                                </center>
                                            </template>
                                            <template>
                                                <center>
                                                    <vaadin-checkbox id="doSendMail1" checked="{{item.enviarEmail}}"></vaadin-checkbox>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="20%">
                                            <template class="header">
                                                Endereço Email
                                            </template>
                                            <template>
                                                <vaadin-text-field id="emailElemento1" type="text" value="{{ item.email }}"></vaadin-text-field>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="10%">
                                            <template class="header">
                                            </template>
                                            <template>
                                                <!--<center>-->
                                                <paper-button raised class="btnRemove" id="deleteJuri1" on-tap="_deleteElementoJuri"><i class="fa fa-trash-o" aria-hidden="true"></i>&nbsp; Eliminar</paper-button>
                                                <!--</center>-->
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>      
                                    <h2 class="separator" style="border-bottom:1px dotted; padding:0;"></h2>
                                    <!-- Elementos Juri section.e -->
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <vaadin-text-field type="text" value="{{data.prazo}}" id="prazo" name="prazo" label="Prazo para a prestação do serviço (Até 3 anos)"> </vaadin-text-field>
                                        </div>
                                    </div>
                                    <!--Elementos Checklist - Estado 0 - .b -->
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <such-textarea rows="5" value="{{CLArea.checklistArea.comentarioArea}}" id="comentarioAreaApresentar" name="comentarioAreaApresentar" label="Comentário"> </such-textarea>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <vaadin-text-field type="text" value="{{CLArea.checklistArea.responsavelArea}}" id="responsavelAreaApresentar" name="responsavelAreaApresentar" label="O Responsável da Área pela apresentação da informação " disabled="true"> </vaadin-text-field>
                                        </div>
                                        <br />
                                        <div class="col-sm-6">
                                            <vaadin-text-field type="text" value="{{CLArea.checklistArea.nomeResponsavelArea}}" id="nomeResponsavelAreaApresentar" name="nomeResponsavelAreaApresentar" disabled="true"> </vaadin-text-field>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-3">
                                            <vaadin-text-field type="text" value="{{CLArea.checklistArea.dataResponsavel}}" id="dataResponsavelApresentar" name="dataResponsavelApresentar" label="Data" disabled="true"> </vaadin-text-field>
                                        </div>
                                    </div>
                                    <!--Elementos Checklist - Estado 0 - .e -->
                                    <div class="col-lg-6">
                                        <br />
                                        <paper-button raised id="submitProcedimento" class="btn--confirm pull-left" on-tap="_submitProcedimento"><i class="fa fa-check" aria-hidden="true"></i>&nbsp; Submeter</paper-button>
                                    </div>
                                    
                                    <div class="clearfix"></div>
                                </div>
                            </paper-collapse-item>
                            <paper-collapse-item header="Critérios Adjudicação">
                                <!-- Tab Unidade Produtiva - Critérios de Adjudicação-->
                                <div class="col-xs-12 mb-15">
                                    <div class="row break_clear">
                                        <div class="col-sm-12">
                                            <div class="row">
                                                <div class="col-sm-4">
                                                    <vaadin-combo-box items="[[LBoolValues]]" item-value-path="booleanValue" id="precoMaisBaixo" item-label-path="stringValue" value="{{data.precoMaisBaixo}}" label="Preço mais baixo?">
                                                        <template>
                                                            <paper-icon-item>
                                                                <paper-item-body two-line>
                                                                    <div>[[item.stringValue]]</div>
                                                                </paper-item-body>
                                                            </paper-icon-item>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>
                                                <div class="col-sm-8">
                                                    <paper-tooltip for="descPrecoMaisBaixo" position="bottom" offset="-10" animation-delay="1">
                                                        Preço mais baixo
                                                    </paper-tooltip>
                                                    <such-textarea rows="5" value="{{data.descPrecoMaisBaixo}}" id="descPrecoMaisBaixo" name="descPrecoMaisBaixo" label="Descrição"> </such-textarea>
                                                </div>
                                            </div>
                                        </div>

                                    </div>


                                    <div class="row break_clear">
                                        <div class="col-sm-12">
                                            <div class="row">
                                                <div class="col-sm-4">
                                                    <vaadin-combo-box items="[[LBoolValues]]" item-value-path="booleanValue" id="propostaEconMaisVantajosa" item-label-path="stringValue" value="{{data.propostaEconMaisVantajosa}}" label="Proposta economicamente mais vantajosa?">
                                                        <template>
                                                            <paper-icon-item>
                                                                <paper-item-body two-line>
                                                                    <div>[[item.stringValue]]</div>
                                                                </paper-item-body>
                                                            </paper-icon-item>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>

                                                <div class="col-sm-8">
                                                    <paper-tooltip for="descPropostaEconMaisVantajosa" position="top" offset="-1" animation-delay="1">
                                                        Definição de subfactores: Preço; Características técnicas (parâmetros a avaliar e outros que sejam relevantes), etc. Todos os fatores e subfactores têm de ser parametrizados e quantificados. <br />
                                                        Qualidade, em sentido lato, não é parâmetro para critério de adjudicação. Caso seja um requisito devem colocar em observações do procedimento para definição no Caderno de Encargos.
                                                    </paper-tooltip>
                                                    <such-textarea rows="5" value="{{data.descPropostaEconMaisVantajosa}}" id="descPropostaEconMaisVantajosa" name="descPropostaEconMaisVantajosa" label="Descrição"> </such-textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </paper-collapse-item>
                            <paper-collapse-item header="Outros">
                                <!-- Tab Unidade Produtiva - Outros-->
                                <div class="col-xs-12 mb-15">
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-sm-3">
                                                    <vaadin-combo-box value="{{data.propostaVariante}}" label="Proposta Variante?" items="[[LBoolValues]]" item-value-path="booleanValue" id="propostaVariante" item-label-path="stringValue">
                                                        <template>
                                                            <paper-icon-item>
                                                                <paper-item-body two-line>
                                                                    <div>[[item.stringValue]]</div>
                                                                </paper-item-body>
                                                            </paper-icon-item>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>

                                                <div class="col-sm-9">
                                                    <paper-tooltip for="descPropostaVariante" position="bottom" offset="-10" animation-delay="1">
                                                        Não aceitando propostas variantes o concorrente tem que apresentar exatamente o solicitado nas peças do procedimento, sendo um motivo de exclusão toda a proposta apresentada que não cumpra os requisitos. <br />
                                                        O Fornecedor não pode apresentar alternativas.
                                                    </paper-tooltip>
                                                    <such-textarea rows="5" value="{{data.descPropostaVariante}}" id="descPropostaVariante" name="descPropostaVariante" label="Descrição"> </such-textarea>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-sm-4">
                                                    <vaadin-combo-box value="{{data.abertoFechadoAoMercado}}" label="Aberto ou fechado ao mercado" items="[[LAbertoFechado]]" item-value-path="booleanValue" id="abertoFechadoAoMercado" item-label-path="value">
                                                        <template>
                                                            <paper-icon-item>
                                                                <paper-item-body two-line>
                                                                    <div>[[item.value]]</div>
                                                                </paper-item-body>
                                                            </paper-icon-item>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>

                                                <div class="col-sm-8">
                                                    <paper-tooltip for="descAbertoFechadoAoMercado" position="bottom" offset="-10" animation-delay="1">
                                                        Aberto ao mercado, todos os concorrentes registados na categoria visualizam o procedimento, contudo, permite em simultâneo um convite direcionado aos fornecedores identificados pelo SUCH a apresentar proposta. <br />
                                                        Fechado ao mercado, apenas os fornecedores convidados a apresentar proposta visualizam o procedimento.

                                                    </paper-tooltip>
                                                    <such-textarea rows="5" value="{{data.descAbertoFechadoAoMercado}}" id="descAbertoFechadoAoMercado" name="descAbertoFechadoAoMercado" label="Descrição"> </such-textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row break_clear">

                                        <div class="col-sm-6">
                                            <paper-tooltip for="prazoEntrega" position="top" offset="-1" animation-delay="1">
                                                Caso exista imposição da U.P. para o Cliente.
                                            </paper-tooltip>
                                            <vaadin-text-field value="{{data.prazoEntrega}}" id="prazoEntrega" name="prazoEntrega" label="Prazo Entrega / Realização Serviço"> </vaadin-text-field>
                                        </div>
                                        <div class="col-sm-6">
                                            <vaadin-text-field value="{{data.locaisEntrega}}" id="locaisEntrega" name="locaisEntrega" label="Locais de Entrega"> </vaadin-text-field>
                                        </div>

                                    </div>

                                    <div class="row break_clear">

                                        <div class="col-sm-6">
                                            <vaadin-text-field rows="5" value="{{data.observacoesAdicionais}}" id="observacoesAdicionais" name="observacoesAdicionais" label="Observações adicionais a fixar no caderno de encargos"> </vaadin-text-field>
                                        </div>
                                        <div class="col-sm-6">
                                            <paper-tooltip for="estimativaPreco" position="top" offset="-1" animation-delay="1">
                                                Obrigatório indicar, mesmo quando não se pretenda estabelecer preço base.
                                            </paper-tooltip>
                                            <vaadin-text-field rows="5" value="{{data.estimativaPreco}}" id="estimativaPreco" name="estimativaPreco" label="Estimativa de preço"> </vaadin-text-field>
                                        </div>

                                    </div>

                                    <div class="row break_clear">

                                        <div class="col-sm-6">
                                            <vaadin-text-field rows="5" value="{{data.fornecedoresSugeridos}}" id="fornecedoresSugeridos" name="fornecedoresSugeridos" label="fornecedores Sugeridos"> </vaadin-text-field>
                                        </div>

                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-sm-4">
                                                    <vaadin-combo-box value="{{data.fornecedorExclusivo}}" label="Fornecedor Exclusivo" items="[[LBoolValues]]" item-value-path="booleanValue" id="fornecedorExclusivo" item-label-path="stringValue">
                                                        <template>
                                                            <paper-icon-item>
                                                                <paper-item-body two-line>
                                                                    <div>[[item.stringValue]]</div>
                                                                </paper-item-body>
                                                            </paper-icon-item>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>
                                                <div class="col-sm-8">
                                                    <paper-tooltip for="descFornecedorExclusivo" position="top" offset="-1" animation-delay="1">
                                                        Fundamentação de exclusividade: note-se que este parametro será validado conforme CCP.
                                                    </paper-tooltip>
                                                    <such-textarea rows="5" value="{{data.descFornecedorExclusivo}}" id="descFornecedorExclusivo" name="descFornecedorExclusivo" label="Descrição"> </such-textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <vaadin-text-field value="{{data.interlocutor}}" id="interlocutor" name="interlocutor" label="Interlocutor Preferêncial"> </vaadin-text-field>
                                        </div>
                                    </div>
                                </div>
                            </paper-collapse-item>
                            <paper-collapse-item header="Linhas Produtos / Serviços">
                                <!-- Tab Unidade Produtiva - Linhas Produtos Servicos-->
                                <div class="col-xs-12 mb-15">
                                    <div class="break_clear">
                                        <vaadin-grid id="gridProdutosServicos" aria-label="gridProdutosServicos" items="{{data.produtosServicos}}" class="grid">
                                            <vaadin-grid-column width="10%">
                                                <template class="header">
                                                    Tipo
                                                </template>
                                                <template>
                                                    <vaadin-text-field type="text" value="{{ item.tipo }}"></vaadin-text-field>
                                                </template>
                                            </vaadin-grid-column>
                                            <vaadin-grid-column width="10%">
                                                <template class="header">
                                                    Cod. Localização
                                                </template>
                                                <template>
                                                    <vaadin-text-field type="text" value="{{ item.codigoLocalizacao }}"></vaadin-text-field>
                                                </template>
                                            </vaadin-grid-column>
                                            <vaadin-grid-column width="8%">
                                                <template class="header">
                                                    <center>
                                                        Nº
                                                    </center>
                                                </template>
                                                <template>
                                                    <center>
                                                        <vaadin-checkbox checked="{{item.no}}"></vaadin-checkbox>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                            <vaadin-grid-column width="8%">
                                                <template class="header">
                                                    <center>
                                                        Descrição
                                                    </center>
                                                </template>
                                                <template>
                                                    <center>
                                                        <vaadin-checkbox checked="{{item.descricao}}"></vaadin-checkbox>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                            <vaadin-grid-column width="6%">
                                                <template class="header">
                                                    <center>
                                                        Descrição 2
                                                    </center>
                                                </template>
                                                <template>
                                                    <center>
                                                        <vaadin-checkbox checked="{{item.descricao2}}"></vaadin-checkbox>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                            <vaadin-grid-column width="8%">
                                                <template class="header">
                                                    <center>
                                                        Cod. Unidade
                                                    </center>
                                                </template>
                                                <template>
                                                    <center>
                                                        <vaadin-checkbox checked="{{item.codigoUnidade}}"></vaadin-checkbox>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                            <vaadin-grid-column width="20%">
                                                <template class="header">
                                                    Qtd. a Requerer
                                                </template>
                                                <template>
                                                    <vaadin-text-field type="text" value="{{ item.quantidadeRequerer }}"></vaadin-text-field>
                                                </template>
                                            </vaadin-grid-column>
                                            <vaadin-grid-column width="20%">
                                                <template class="header">
                                                    Custo Unitário
                                                </template>
                                                <template>
                                                    <vaadin-text-field type="text" value="{{ item.custoUnitario }}"></vaadin-text-field>
                                                </template>
                                            </vaadin-grid-column>
                                            <vaadin-grid-column width="10%">
                                                <template class="header">
                                                </template>
                                                <template>
                                                    <!--<center>-->
                                                    <paper-button raised class="btnRemove" on-tap="_deleteElementoJuri"><i class="fa fa-trash-o" aria-hidden="true"></i>&nbsp; Eliminar</paper-button>
                                                    <!--</center>-->
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </paper-collapse-item>
                        </paper-collapse-group>
                    </div>

                    <!-- Tab Imobilizado -->
                    <div>
                        <h2 class="title title--bgyellow">Aquisição de Imobilizado</h2>
                        <p></p>
                        <h2 class="title title--bgblue">A preencher pelos Serviços de Contabilidade - Avaliação Cabimentação Orçamental</h2>
                        <div class="row break_clear">

                            <div class="col-xs-12">

                                <div class="panel panel-default">
                                    <div class="panel-heading">Contabilidade</div>
                                    <div class="panel-body">
                                        <div class="col-sm-6">
                                            <such-textarea rows="5" value="{{CLImobContab.checklistImobilizadoContabilidade.comentarioImobContabilidade}}" id="contabilidadeComentario" name="contabilidadeComentario" label="Comentário"> </such-textarea>

                                            <div class="row break_clear">
                                                <div class="col-xs-12"><label part="label" class="grey" id="vaadin-text-field-label-30">O responsável dos serviços de contabilidade</label></div>
                                                <div class="col-xs-6">
                                                    <vaadin-text-field value="{{CLImobContab.checklistImobilizadoContabilidade.responsavelImobContabilidade}}" id="responsavelServicosContabilidade" name="responsavelServicosContabilidade" label=""></vaadin-text-field>
                                                </div>
                                                <div class="col-xs-6">
                                                    <vaadin-text-field value="{{CLImobContab.checklistImobilizadoContabilidade.nomeResponsavelImobContabilidade}}" id="responsavelServicosContabilidade2" name="responsavelServicosContabilidade2" label=""> </vaadin-text-field>
                                                </div>
                                            </div>

                                            <div class="row break_clear">
                                                <div class="col-sm-6">
                                                    <vaadin-date-picker value="{{CLImobContab.checklistImobilizadoContabilidade.dataImobContabilidade}}" id="responsavelServicosContabilidade" name="responsavelServicosContabilidade" label="Data"> </vaadin-date-picker>
                                                </div>
                                                <div class="col-sm-6">
                                                    <vaadin-combo-box value="{{CLImobContab.checklistImobilizadoContabilidade.imobilizadoSimNao}}" id="cabimentoOrcamental" label="Cabimento Orçamental?" items="[[LBoolValues]]" item-value-path="booleanValue" item-label-path="stringValue">
                                                        <template>
                                                            <paper-icon-item>
                                                                <paper-item-body two-line>
                                                                    <div>[[item.stringValue]]</div>
                                                                </paper-item-body>
                                                            </paper-icon-item>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>
                                            </div>
                                            <div class="row break_clear"></div>
                                        </div>
                                        <div class="clearfix"></div>
                                        <!--<div class="col-lg-6">
                                            <br />
                                            <paper-button raised id="confirmImobilizadoContab" class="btn--confirm pull-left" on-tap="_confirmImobilizadoContab"><i class="fa fa-check" aria-hidden="true"></i>&nbsp;Confirmar</paper-button>
                                            <paper-button raised id="returnToArea" class="btn--return pull-left" on-tap="_returnToArea"><i class="fa fa-check" aria-hidden="true"></i>&nbsp;Devolver Área</paper-button>
                                        </div>-->
                                        <div class="clearfix"></div>
                                        <div class="col-lg-6">
                                            <br />
                                            <vaadin-context-menu selector="paper-button" open-on="click" close-on="click">
                                                <template>
                                                    <style>
                                                        .my-menu {
                                                            padding: 8px 0;
                                                            background: #fff;
                                                        }

                                                        .my-menu-item {
                                                            display: block;
                                                            padding: 8px 24px;
                                                            text-decoration: none;
                                                            color: #000;
                                                        }

                                                            .my-menu-item:hover {
                                                                background: #FFD5D3;
                                                            }
                                                    </style>
                                                    <vaadin-list-box>
                                                        <vaadin-item class="my-menu-item" on-tap="_confirmImobilizadoContab">Confirmar</vaadin-item>
                                                        <vaadin-item class="my-menu-item" on-tap="_returnToArea">Devolver à Área</vaadin-item>
                                                    </vaadin-list-box>
                                                </template>

                                                <paper-button raised id="actionButton1" class="btn--cntxt-menu pull-left"><i class="fa fa-check" aria-hidden="true"></i>&nbsp;&nbsp;Acções&nbsp;&nbsp;</paper-button>
                                                <!--<button>Show Context Menu</button>-->
                                            </vaadin-context-menu>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-xs-12">

                                <div class="panel panel-default">
                                    <div class="panel-heading">Área</div>
                                    <div class="panel-body">
                                        <div class="col-sm-6">
                                            <such-textarea rows="5" value="{{data.areaComentario}}" id="areaComentario" name="areaComentario" label="Comentário"> </such-textarea>

                                            <div class="row break_clear">
                                                <div class="col-xs-12"><label part="label" class="grey" id="vaadin-text-field-label-30">O responsável da área pela adjudicação</label></div>
                                                <div class="col-xs-6">
                                                    <vaadin-text-field value="{{data.responsavelArea}}" id="responsavelArea" name="responsavelArea" label=""> </vaadin-text-field>
                                                </div>
                                                <div class="col-xs-6">
                                                    <vaadin-text-field value="{{data.responsavelArea2}}" id="responsavelArea2" name="responsavelArea2" label=""> </vaadin-text-field>
                                                </div>
                                            </div>

                                            <div class="row break_clear">
                                                <div class="col-sm-6">
                                                    <vaadin-date-picker value="{{data.contabilidadeData}}" id="responsavelServicosContabilidade" name="responsavelServicosContabilidade" label="Data"> </vaadin-date-picker>
                                                </div>

                                            </div>
                                            <div class="row break_clear"></div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>

                                </div>
                            </div>


                        </div>
                    </div>

                    <!-- Tab Fundamentos Decisão-->
                    <div class="panel panel-default">
                        <paper-collapse-group>
                            <paper-collapse-item header="A Preencher pelas Compras" opened>
                                <div class="col-xs-12">
                                    <div class="break_clear row">
                                        <div class="col-sm-12">
                                            <div class="row">
                                                <div class="col-sm-3">
                                                    <vaadin-text-field value="{{data.escolhaProcedimento}}" id="escolhaProcedimento" name="escolhaProcedimento" label="Escolha do Procedimento"></vaadin-text-field>
                                                </div>

                                                <div class="col-sm-9">
                                                    <paper-tooltip for="escolhaProcedimentoDescricao" position="bottom" offset="-10" animation-delay="1">
                                                        Em função do valor de acordo com os critérios formais, de acordo com o CCP.
                                                    </paper-tooltip>
                                                    <such-textarea rows="5" value="{{data.escolhaProcedimentoDescricao}}" id="escolhaProcedimentoDescricao" name="escolhaProcedimentoDescricao" label="Descrição"> </such-textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="break_clear row">
                                        <div class="col-sm-3 mb-15">
                                            <vaadin-combo-box value="{{data.juri}}" label="Juri" items="[[LBoolValues]]" item-value-path="booleanValue" id="juri" item-label-path="stringValue">
                                                <template>
                                                    <paper-icon-item>
                                                        <paper-item-body two-line>
                                                            <div>[[item.stringValue]]</div>
                                                        </paper-item-body>
                                                    </paper-icon-item>
                                                </template>
                                            </vaadin-combo-box>
                                        </div>
                                        <div class="col-xs-12">
                                            <vaadin-grid id="gridElementosJuri2" aria-label="gridElementosJuri2" items="{{data.elementosJuri}}" class="grid" style="height:170px;">
                                                <vaadin-grid-column width="20%">
                                                    <template class="header">
                                                        Utilizador
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field type="text" value="{{ item.utilizador }}"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="20%">
                                                    <template class="header">
                                                        Nome
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field type="text" value="{{ item.nomeEmpregado }}"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="8%">
                                                    <template class="header">
                                                        <center>
                                                            Presidente
                                                        </center>
                                                    </template>
                                                    <template>
                                                        <center>
                                                            <vaadin-checkbox checked="{{item.presidente}}"></vaadin-checkbox>
                                                        </center>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="8%">
                                                    <template class="header">
                                                        <center>
                                                            Vogal
                                                        </center>
                                                    </template>
                                                    <template>
                                                        <center>
                                                            <vaadin-checkbox checked="{{item.vogal}}"></vaadin-checkbox>
                                                        </center>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="6%">
                                                    <template class="header">
                                                        <center>
                                                            Suplente
                                                        </center>
                                                    </template>
                                                    <template>
                                                        <center>
                                                            <vaadin-checkbox checked="{{item.suplente}}"></vaadin-checkbox>
                                                        </center>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="8%">
                                                    <template class="header">
                                                        <center>
                                                            Enviar Email?
                                                        </center>
                                                    </template>
                                                    <template>
                                                        <center>
                                                            <vaadin-checkbox checked="{{item.enviarEmail}}"></vaadin-checkbox>
                                                        </center>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="20%">
                                                    <template class="header">
                                                        Endereço Email
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field type="text" value="{{ item.email }}"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="10%">
                                                    <template class="header">
                                                    </template>
                                                    <template>
                                                        <!--<center>-->
                                                        <paper-button raised class="btnRemove" on-tap="_deleteElementoJuri"><i class="fa fa-trash-o" aria-hidden="true"></i>&nbsp; Eliminar</paper-button>
                                                        <!--</center>-->
                                                    </template>
                                                </vaadin-grid-column>
                                            </vaadin-grid>
                                        </div>
                                    </div>
                                    <div class="row break_clear">

                                        <div class="col-sm-6">
                                            <vaadin-text-field value="{{data.nomeProcesso}}" id="nomeProcesso" name="nomeProcesso" label="Nome do Processo"> </vaadin-text-field>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-combo-box value="{{data.objectoContrato}}" label="Objecto do Contrato" items="[[LBoolValues]]" item-value-path="booleanValue" id="objectoContrato" item-label-path="stringValue">
                                                <template>
                                                    <paper-icon-item>
                                                        <paper-item-body two-line>
                                                            <div>[[item.stringValue]]</div>
                                                        </paper-item-body>
                                                    </paper-icon-item>
                                                </template>
                                            </vaadin-combo-box>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-text-field value="{{data.condicoesPagamento}}" id="condicoesPagamento" name="condicoesPagamento" label="Condições Pagamento"> </vaadin-text-field>
                                        </div>
                                    </div>
                                    <div class="row break_clear">

                                        <div class="col-sm-3">
                                            <vaadin-combo-box value="{{data.gestorProcesso}}" label="Gestor Processo" items="[[LBoolValues]]" item-value-path="booleanValue" id="gestorProcesso" item-label-path="stringValue">
                                                <template>
                                                    <paper-icon-item>
                                                        <paper-item-body two-line>
                                                            <div>[[item.stringValue]]</div>
                                                        </paper-item-body>
                                                    </paper-icon-item>
                                                </template>
                                            </vaadin-combo-box>
                                        </div>
                                    </div>

                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <such-textarea rows="5" value="{{data.processoComentario}}" id="processoComentario" name="processoComentario" label="Comentário"> </such-textarea>
                                        </div>
                                    </div>

                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-xs-12"><label part="label" class="grey" id="vaadin-text-field-label-30">O Responsável pelo envio para área</label></div>
                                                <div class="col-sm-4">
                                                    <vaadin-text-field value="{{data.responsavelEnvioArea}}" id="responsavelEnvioArea" name="responsavelEnvioArea"></vaadin-text-field>
                                                </div>

                                                <div class="col-sm-8">
                                                    <vaadin-text-field value="{{data.responsavelEnvioArea2}}" id="responsavelEnvioArea2" name="responsavelEnvioArea2"> </vaadin-text-field>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-date-picker value="{{data.processoData}}" id="processoData" name="processoData" label="Data"></vaadin-date-picker>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-text-field value="{{data.emailDestinoCa}}" id="emailDestinoCa" name="emailDestinoCa" label="Email destino CA"> </vaadin-text-field>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>

                            <paper-collapse-item header="A Preencher pelos Serviços Financeiros">
                                <div class="col-xs-12">
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <such-textarea rows="5" value="{{data.processoComentario}}" id="processoComentario" name="processoComentario" label="Comentário"> </such-textarea>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-xs-12"><label part="label" class="grey" id="vaadin-text-field-label-30">O Responsável pela área</label></div>
                                                <div class="col-sm-4">
                                                    <vaadin-text-field value="{{data.responsavelPelaArea}}" id="responsavelPelaArea" name="responsavelPelaArea"></vaadin-text-field>
                                                </div>

                                                <div class="col-sm-8">
                                                    <vaadin-text-field value="{{data.responsavelPelaArea2}}" id="responsavelPelaArea2" name="responsavelPelaArea2"> </vaadin-text-field>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-date-picker value="{{data.responsavelPelaAreaData}}" id="processoData" name="processoData" label="Data"></vaadin-date-picker>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>

                            <paper-collapse-item header="A Preencher pela área - Pedido de Abertura de Procedimento">
                                <div class="col-xs-12">
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <such-textarea rows="5" value="{{data.processoComentario}}" id="processoComentario" name="processoComentario" label="Comentário"> </such-textarea>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-xs-12"><label part="label" class="grey" id="vaadin-text-field-label-30">O Responsável dos serviços financeiros</label></div>
                                                <div class="col-sm-4">
                                                    <vaadin-text-field value="{{data.responsavelServicosFinanceiros}}" id="responsavelServicosFinanceiros" name="responsavelServicosFinanceiros"></vaadin-text-field>
                                                </div>

                                                <div class="col-sm-8">
                                                    <vaadin-text-field value="{{data.responsavelServicosFinanceiros2}}" id="responsavelServicosFinanceiros2" name="responsavelServicosFinanceiros2"> </vaadin-text-field>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-date-picker value="{{data.responsavelServicosFinanceirosData}}" id="processoData" name="processoData" label="Data"></vaadin-date-picker>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>
                        </paper-collapse-group>

                    </div>

                    <!-- Tab CCP -->
                    <div>
                        <div class="row break_clear">

                            <div class="col-xs-6">
                                <div class="panel panel-default">
                                    <div class="panel-heading">Publicação na Plataforma</div>
                                    <div class="panel-body">
                                        <div class="">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <vaadin-text-field value="{{data.publicacaoNaPlataformaComentario}}" id="publicacaoNaPlataformaComentario" name="publicacaoNaPlataformaComentario" label="Comentário"></vaadin-text-field>
                                                </div>
                                            </div>
                                            <div class="row break_clear">
                                                <div class="col-sm-6">
                                                    <vaadin-date-picker value="{{data.publicacaoNaPlataformaData}}" id="publicacaoNaPlataformaData" name="publicacaoNaPlataformaData" label="Data"> </vaadin-date-picker>
                                                </div>
                                            </div>
                                            <div class="row break_clear">

                                                <div class="col-xs-6">
                                                    <vaadin-text-field value="{{data.publicacaoNaPlataformaUtilizador}}" id="publicacaoNaPlataformaUtilizador" name="publicacaoNaPlataformaUtilizador" label="Utilizador"> </vaadin-text-field>
                                                </div>
                                                <div class="col-sm-6">
                                                    <br />
                                                    <paper-button raised id="btnConfirmPublicacaoNaPlataforma" class="btn--confirm pull-right" on-tap="_confirmPublicacaoNaPlataforma"><i class="fa fa-check" aria-hidden="true"></i>&nbsp; Confirmar</paper-button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6">

                                <div class="panel panel-default">
                                    <div class="panel-heading">Recolha da Plataforma</div>
                                    <div class="panel-body">
                                        <div class="">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <vaadin-text-field value="{{data.recolhaPlataformaComentario}}" id="recolhaPlataformaComentario" name="recolhaPlataformaComentario" label="Comentário"></vaadin-text-field>
                                                </div>
                                            </div>
                                            <div class="row break_clear">
                                                <div class="col-sm-6">
                                                    <vaadin-date-picker value="{{data.recolhaPlataformaData}}" id="recolhaPlataformaData" name="recolhaPlataformaData" label="Data"> </vaadin-date-picker>
                                                </div>
                                            </div>
                                            <div class="row break_clear">

                                                <div class="col-xs-6">
                                                    <vaadin-text-field value="{{data.recolhaPlataformaUtilizador}}" id="recolhaPlataformaUtilizador" name="recolhaPlataformaUtilizador" label="Utilizador"> </vaadin-text-field>
                                                </div>
                                                <div class="col-sm-6">
                                                    <br />
                                                    <paper-button raised id="btnConfirmRecolhaPlataforma" class="btn--confirm pull-right" on-tap="_confirmRecolhaPlataforma"><i class="fa fa-check" aria-hidden="true"></i>&nbsp; Confirmar</paper-button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6">
                                <div class="panel panel-default">
                                    <div class="panel-heading">Validação Relatório Preliminar Pelo Juri</div>
                                    <div class="panel-body">
                                        <div class="">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <vaadin-text-field value="{{data.validacaoRelatorioComentario}}" id="validacaoRelatorioComentario" name="validacaoRelatorioComentario" label="Comentário"></vaadin-text-field>
                                                </div>
                                            </div>
                                            <div class="row break_clear">
                                                <div class="col-sm-6">
                                                    <vaadin-date-picker value="{{data.validacaoRelatorioData}}" id="validacaoRelatorioData" name="validacaoRelatorioData" label="Data"> </vaadin-date-picker>
                                                </div>
                                            </div>
                                            <div class="row break_clear">

                                                <div class="col-xs-6">
                                                    <vaadin-text-field value="{{data.validacaoRelatorioUtilizador}}" id="validacaoRelatorioUtilizador" name="validacaoRelatorioUtilizador" label="Utilizador"> </vaadin-text-field>
                                                </div>
                                                <div class="col-sm-6">
                                                    <br />
                                                    <paper-button raised id="btnConfirmValidacaoRelatorio" class="btn--confirm pull-right" on-tap="_confirmValidacaoRelatorio"><i class="fa fa-check" aria-hidden="true"></i>&nbsp; Confirmar</paper-button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6">
                                <div class="panel panel-default">
                                    <div class="panel-heading">Audiência Prévia</div>
                                    <div class="panel-body">
                                        <div class="">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <vaadin-text-field value="{{data.audienciaPreviaComentario}}" id="audienciaPreviaComentario" name="audienciaPreviaComentario" label="Comentário"></vaadin-text-field>
                                                </div>
                                            </div>
                                            <div class="row break_clear">
                                                <div class="col-sm-6">
                                                    <vaadin-date-picker value="{{data.audienciaPreviaData}}" id="audienciaPreviaData" name="audienciaPreviaData" label="Data"> </vaadin-date-picker>
                                                </div>
                                            </div>
                                            <div class="row break_clear">

                                                <div class="col-xs-6">
                                                    <vaadin-text-field value="{{data.audienciaPreviaUtilizador}}" id="audienciaPreviaUtilizador" name="audienciaPreviaUtilizador" label="Utilizador"> </vaadin-text-field>
                                                </div>
                                                <div class="col-sm-6">
                                                    <br />
                                                    <paper-button raised id="btnConfirmAudienciaPrevia" class="btn--confirm pull-right" on-tap="_confirmAudienciaPrevia"><i class="fa fa-check" aria-hidden="true"></i>&nbsp; Confirmar</paper-button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6">
                                <div class="panel panel-default">
                                    <div class="panel-heading">Relatório Final</div>
                                    <div class="panel-body">
                                        <div class="">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <vaadin-text-field value="{{data.relatorioFinalComentario}}" id="relatorioFinalComentario" name="relatorioFinalComentario" label="Comentário"></vaadin-text-field>
                                                </div>
                                            </div>
                                            <div class="row break_clear">
                                                <div class="col-sm-6">
                                                    <vaadin-date-picker value="{{data.relatorioFinalData}}" id="relatorioFinalData" name="relatorioFinalData" label="Data"> </vaadin-date-picker>
                                                </div>
                                            </div>
                                            <div class="row break_clear">

                                                <div class="col-xs-6">
                                                    <vaadin-text-field value="{{data.relatorioFinalUtilizador}}" id="relatorioFinalUtilizador" name="relatorioFinalUtilizador" label="Utilizador"> </vaadin-text-field>
                                                </div>

                                                <div class="col-sm-6">
                                                    <br />
                                                    <paper-button raised id="btnConfirmRelatorioFinal" class="btn--confirm pull-right" on-tap="_confirmRelatorioFinal"><i class="fa fa-check" aria-hidden="true"></i>&nbsp; Confirmar</paper-button>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="col-sm-6">
                                <br />
                                &nbsp;<paper-button raised id="btnSendToEvaluate" class="btn--sendtoevaluate" on-tap="_sendToEvaluate"><i class="fa fa-paper-plane" aria-hidden="true"></i>&nbsp; Envio para avaliação (Juri)</paper-button>
                            </div>

                        </div>
                    </div>

                    <!-- Juridicos -->
                    <div>
                        <h2 class="title title--bgblue">A Preencher pelo Gabinete Juridico</h2>
                        <div class="break_clear row">
                            <div class="col-sm-12">
                                <div class="panel panel-default">
                                    <div class="panel-heading">1ª Fase - Avaliação das Peças do Procedimento (A preencher na abertura do procedimento)</div>
                                    <div class="panel-body row">

                                        <div class="col-sm-6">
                                            <such-textarea rows="5" value="{{data.avaliacaoPecasComentario}}" id="avaliacaoPecasComentario" name="avaliacaoPecasComentario" label="Comentário"> </such-textarea>
                                        </div>
                                        <div class="clearfix"></div>

                                        <div class="break_clear">
                                            <div class="col-sm-6">
                                                <div class="row">
                                                    <div class="col-xs-12"><label part="label" class="grey" id="vaadin-text-field-label-30">Pelo Gabinete Jurídico</label></div>
                                                    <div class="col-sm-4">
                                                        <vaadin-text-field value="{{data.avaliacaoPecasGabineteJuridico}}" id="avaliacaoPecasGabineteJuridico" name="avaliacaoPecasGabineteJuridico"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-sm-8">
                                                        <vaadin-text-field value="{{data.avaliacaoPecasGabineteJuridico2}}" id="avaliacaoPecasGabineteJuridico2" name="avaliacaoPecasGabineteJuridico2"> </vaadin-text-field>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-3">
                                                <vaadin-date-picker value="{{data.avaliacaoPecasData}}" id="avaliacaoPecasData" name="avaliacaoPecasData" label="Data"></vaadin-date-picker>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="break_clear row">
                            <div class="col-sm-12">
                                <div class="panel panel-default">
                                    <div class="panel-heading">2ª Fase - Avaliação da minuta do Contrato (A preencher Após adjudicação)</div>
                                    <div class="panel-body row">

                                        <div class="col-sm-6">
                                            <such-textarea rows="5" value="{{data.minutaComentario}}" id="minutaComentario" name="minutaComentario" label="Comentário"> </such-textarea>
                                        </div>
                                        <div class="clearfix"></div>

                                        <div class="break_clear">
                                            <div class="col-sm-6">
                                                <div class="row">
                                                    <div class="col-xs-12"><label part="label" class="grey" id="vaadin-text-field-label-30">Pelo Gabinete Jurídico</label></div>
                                                    <div class="col-sm-4">
                                                        <vaadin-text-field value="{{data.minutaGabineteJuridico}}" id="minutaGabineteJuridico" name="minutaGabineteJuridico"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-sm-8">
                                                        <vaadin-text-field value="{{data.minutaGabineteJuridico2}}" id="minutaGabineteJuridico2" name="minutaGabineteJuridico2"> </vaadin-text-field>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-3">
                                                <vaadin-date-picker value="{{data.minutaData}}" id="minutaData" name="minutaData" label="Data"></vaadin-date-picker>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                        </div>




                        <div class="mb-15">&nbsp;</div>
                    </div>

                    <!-- Tab Valores Adjudicação-->
                    <div class="panel panel-default">
                        <paper-collapse-group>
                            <paper-collapse-item header="A Preencher pelas Compras" opened>
                                <div class="col-xs-12">
                                    <div class="break_clear row">
                                        <div class="col-sm-12">
                                            <div class="row">
                                                <div class="col-sm-3">
                                                    <paper-tooltip for="valorMercado" position="bottom" offset="-10" animation-delay="1">
                                                        Só é preenchido se não existir procedimento anterior idêntico.
                                                    </paper-tooltip>
                                                    <vaadin-text-field value="{{data.valorMercado}}" type="number" id="valorMercado" name="valorMercado" label="Valor de Mercado"></vaadin-text-field>
                                                </div>
                                                <div class="col-sm-3">
                                                    <paper-tooltip for="valorAdjudicacaoAnterior" position="bottom" offset="-10" animation-delay="1">
                                                        Procedimento anterior idêntico.
                                                    </paper-tooltip>
                                                    <vaadin-text-field value="{{data.valorAdjudicacaoAnterior}}" type="number" id="valorAdjudicacaoAnterior" name="valorAdjudicacaoAnterior" label="Valor da adjudicação anterior"></vaadin-text-field>
                                                </div>

                                                <div class="col-sm-3">
                                                    <vaadin-text-field value="{{data.valorAdjudicacao}}" type="number" id="valorAdjudicacao" name="valorAdjudicacao" label="Valor da Adjudicação"></vaadin-text-field>
                                                </div>


                                                <div class="col-sm-3">
                                                    <vaadin-text-field value="{{data.diferenca}}" type="number" id="diferenca" name="diferenca" label="Diferença (€)"></vaadin-text-field>
                                                </div>
                                            </div>
                                            <div class="row break_clear">
                                                <div class="col-sm-3">
                                                    <vaadin-text-field value="{{data.diferencaPercent}}" type="number" id="diferencaPercent" name="diferencaPercent" label="Diferença (%)"></vaadin-text-field>
                                                </div>
                                            </div>

                                            <div class="row break_clear">
                                                <div class="col-sm-6">
                                                    <such-textarea rows="5" value="{{data.valorComentario}}" id="valorComentario" name="valorComentario" label="Comentário"> </such-textarea>
                                                </div>
                                            </div>
                                            <div class="row break_clear">
                                                <div class="col-sm-6">
                                                    <div class="row">
                                                        <div class="col-xs-12"><label part="label" class="grey" id="vaadin-text-field-label-30">O Responsável pela área</label></div>
                                                        <div class="col-sm-4">
                                                            <vaadin-text-field value="{{data.responsavelEnvioParaArea}}" id="responsavelEnvioParaArea" name="responsavelEnvioParaArea"></vaadin-text-field>
                                                        </div>

                                                        <div class="col-sm-8">
                                                            <vaadin-text-field value="{{data.responsavelEnvioParaArea2}}" id="responsavelEnvioParaArea2" name="responsavelEnvioParaArea2"> </vaadin-text-field>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <vaadin-date-picker value="{{data.responsavelEnvioParaAreaData}}" id="responsavelEnvioParaAreaData" name="responsavelEnvioParaAreaData" label="Data"></vaadin-date-picker>
                                                </div>
                                                <div class="col-sm-3">
                                                    <br />
                                                    <paper-button raised id="btnEnviarParaArea" class="btn--confirm pull-right" on-tap="_enviarParaArea"><i class="fa fa-paper-plane" aria-hidden="true"></i>&nbsp; Enviar para Área</paper-button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>

                                </div>
                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>

                            <paper-collapse-item header="A Preencher pela Área - Pedido de Adjudicação">
                                <div class="col-xs-12">
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <such-textarea rows="5" value="{{data.propostaDecisao}}" id="propostaDecisao" name="propostaDecisao" label="Proposta de decisão"> </such-textarea>
                                        </div>
                                    </div>
                                    <div class="row break_clear">

                                        <div class="col-sm-3">
                                            <vaadin-checkbox checked="{{data.autorizacaoAdjudicacao}}" required>Autorizacao Adjudicação</vaadin-checkbox>
                                        </div>

                                        <div class="col-sm-3">
                                            <vaadin-checkbox checked="{{data.naoAdjudicacaoEncerramento}}" required>Não Adjudicação e Encerramento</vaadin-checkbox>
                                        </div>

                                        <div class="col-sm-3">
                                            <vaadin-checkbox checked="{{data.naoAdjudicacaoSuspensao}}" required>Não Adjudicação e Suspensão</vaadin-checkbox>
                                        </div>
                                    </div>

                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-xs-12"><label part="label" class="grey" id="vaadin-text-field-label-30">O Responsável pela área pelo envio para CA</label></div>
                                                <div class="col-sm-4">
                                                    <vaadin-text-field value="{{data.responsavelEnvioParaCA}}" id="responsavelEnvioParaCA" name="responsavelEnvioParaCA"></vaadin-text-field>
                                                </div>

                                                <div class="col-sm-8">
                                                    <vaadin-text-field value="{{data.responsavelEnvioParaCA2}}" id="responsavelEnvioParaCA2" name="responsavelEnvioParaCA2"> </vaadin-text-field>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-date-picker value="{{data.responsavelEnvioParaCAData}}" id="responsavelEnvioParaCAData" name="responsavelEnvioParaCAData" label="Data"></vaadin-date-picker>
                                        </div>

                                    </div>

                                </div>
                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>
                        </paper-collapse-group>

                    </div>

                    <!-- Tab CA-->
                    <div class="panel panel-default">
                        <paper-collapse-group>
                            <paper-collapse-item header="Autorizar Imobilizado" opened>
                                <div class="col-xs-12">

                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <such-textarea rows="5" value="{{data.autorizarImobilizadoComentario}}" id="autorizarImobilizadoComentario" name="autorizarImobilizadoComentario" label="Comentário"> </such-textarea>
                                        </div>
                                    </div>

                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-xs-12"><label part="label" class="grey" id="vaadin-text-field-label-30">Pelo CA</label></div>
                                                <div class="col-sm-4">
                                                    <vaadin-text-field value="{{data.autorizarImobilizadoCA}}" id="autorizarImobilizadoCA" name="autorizarImobilizadoCA"></vaadin-text-field>
                                                </div>

                                                <div class="col-sm-8">
                                                    <vaadin-text-field value="{{data.autorizarImobilizadoCA2}}" id="autorizarImobilizadoCA2" name="autorizarImobilizadoCA2"> </vaadin-text-field>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-date-picker value="{{data.autorizarImobilizadoData}}" id="autorizarImobilizadoData" name="autorizarImobilizadoData" label="Data"></vaadin-date-picker>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-12">
                                            <paper-button raised id="btnAutorizarImobilizadoConfirm" class="btn--confirm" on-tap="_confirmAutorizarImobilizado"><i class="fa fa-check" aria-hidden="true"></i>&nbsp; Autorizar</paper-button>
                                            <paper-button raised id="btnAutorizarImobilizadoSuspend" class="btn--sendtoevaluate" on-tap="_suspendAutorizarImobilizado">Suspender Processo</paper-button>
                                            <paper-button raised id="btnAutorizarImobilizadoReject" class="btn--remove" on-tap="_rejectAutorizarImobilizado"><i class="fa fa-times" aria-hidden="true"></i>&nbsp; Não Autorizar</paper-button>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>

                            <paper-collapse-item header="1º Fase - Autorização de abertura do Procedimento">
                                <div class="col-xs-12">

                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <such-textarea rows="5" value="{{data.aberturaProcedimentoComentario}}" id="aberturaProcedimentoComentario" name="aberturaProcedimentoComentario" label="Comentário"> </such-textarea>
                                        </div>
                                    </div>

                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-xs-12"><label part="label" class="grey" id="vaadin-text-field-label-30">Pelo CA</label></div>
                                                <div class="col-sm-4">
                                                    <vaadin-text-field value="{{data.aberturaProcedimentoCA}}" id="aberturaProcedimentoCA" name="aberturaProcedimentoCA"></vaadin-text-field>
                                                </div>

                                                <div class="col-sm-8">
                                                    <vaadin-text-field value="{{data.aberturaProcedimentoCA2}}" id="aberturaProcedimentoCA2" name="aberturaProcedimentoCA2"> </vaadin-text-field>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-date-picker value="{{data.aberturaProcedimentoData}}" id="aberturaProcedimentoData" name="aberturaProcedimentoData" label="Data"></vaadin-date-picker>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-date-picker value="{{data.aberturaProcedimentoDataRatificacao}}" id="aberturaProcedimentoDataRatificacao" name="aberturaProcedimentoDataRatificacao" label="Data Ratificação"></vaadin-date-picker>
                                        </div>
                                    </div>


                                    <div class="row break_clear">
                                        <div class="col-sm-12">
                                            <vaadin-checkbox checked="{{data.aberturaProcedimentoRatificar}}">Ratificar CA</vaadin-checkbox>
                                            <vaadin-checkbox checked="{{data.aberturaProcedimentoCritico}}">Critico</vaadin-checkbox>

                                        </div>
                                    </div>

                                    <div class="row break_clear">
                                        <div class="col-sm-12">
                                            <paper-button raised id="btnAberturaProcedimentoConfirm" class="btn--confirm" on-tap="_confirmAberturaProcedimento"><i class="fa fa-check" aria-hidden="true"></i>&nbsp; Autorizar</paper-button>
                                            <paper-button raised id="btnAberturaProcedimentoSuspend" class="btn--sendtoevaluate" on-tap="_suspendAberturaProcedimento">Suspender Processo</paper-button>
                                            <paper-button raised id="btnAberturaProcedimentoReject" class="btn--remove" on-tap="_rejectAberturaProcedimento"><i class="fa fa-times" aria-hidden="true"></i>&nbsp; Não Autorizar</paper-button>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>

                            <paper-collapse-item header="2ª Fase - Autorização de Adjudicação">
                                <div class="col-xs-12">

                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <such-textarea rows="5" value="{{data.autorizacaoAdjudicacaoComentario}}" id="autorizacaoAdjudicacaoComentario" name="autorizacaoAdjudicacaoComentario" label="Comentário"> </such-textarea>
                                        </div>
                                    </div>

                                    <div class="row break_clear">
                                        <div class="col-sm-12">
                                            <vaadin-checkbox checked="{{data.autorizacaoAdjudicacao}}">Autorização Adjudicação.</vaadin-checkbox>
                                            <vaadin-checkbox checked="{{data.naoAdjudicacaoEncerramento}}">Não Adjudicação e Encerramento.</vaadin-checkbox>
                                            <vaadin-checkbox checked="{{data.naoAdjudicacaoSuspensao}}">Não Adjudicação e Suspensão.</vaadin-checkbox>

                                        </div>
                                    </div>

                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-xs-12"><label part="label" class="grey" id="vaadin-text-field-label-30">Pelo CA</label></div>
                                                <div class="col-sm-4">
                                                    <vaadin-text-field value="{{data.autorizacaoAdjudicacaoCA}}" id="autorizacaoAdjudicacaoCA" name="autorizacaoAdjudicacaoCA"></vaadin-text-field>
                                                </div>

                                                <div class="col-sm-8">
                                                    <vaadin-text-field value="{{data.autorizacaoAdjudicacaoCA2}}" id="autorizacaoAdjudicacaoCA2" name="autorizacaoAdjudicacaoCA2"> </vaadin-text-field>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-date-picker value="{{data.autorizacaoAdjudicacaoData}}" id="autorizacaoAdjudicacaoData" name="autorizacaoAdjudicacaoData" label="Data"></vaadin-date-picker>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-date-picker value="{{data.autorizacaoAdjudicacaoDataRatificacao}}" id="autorizacaoAdjudicacaoDataRatificacao" name="autorizacaoAdjudicacaoDataRatificacao" label="Data Ratificação"></vaadin-date-picker>
                                        </div>
                                    </div>


                                    <div class="row break_clear">
                                        <div class="col-sm-12">
                                            <vaadin-checkbox checked="{{data.autorizacaoAdjudicacaoRatificar}}">Ratificar CA</vaadin-checkbox>
                                            <vaadin-checkbox checked="{{data.autorizacaoAdjudicacaoCritico}}">Critico</vaadin-checkbox>
                                        </div>
                                    </div>

                                    <div class="row break_clear">
                                        <div class="col-sm-12">
                                            <paper-button raised id="btnAutorizacaoAdjudicacaoConfirm" class="btn--confirm" on-tap="_confirmAutorizacaoAdjudicacao"><i class="fa fa-check" aria-hidden="true"></i>&nbsp; Autorizar</paper-button>
                                            <paper-button raised id="btnAutorizacaoAdjudicacaoSuspend" class="btn--sendtoevaluate" on-tap="_suspendAutorizacaoAdjudicacao">Suspender Processo</paper-button>
                                            <paper-button raised id="btnAutorizacaoAdjudicacaoReject" class="btn--remove" on-tap="_rejectAutorizacaoAdjudicacao"><i class="fa fa-times" aria-hidden="true"></i>&nbsp; Não Autorizar</paper-button>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>
                        </paper-collapse-group>
                    </div>

                    <!-- Tab Adjudicação -->
                    <div>
                        <div class="row break_clear">

                            <div class="col-xs-6">
                                <div class="panel panel-default">
                                    <div class="panel-heading">Notificação Adjudicação</div>
                                    <div class="panel-body">
                                        <div class="">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <vaadin-text-field value="{{data.adjudicacaoNotificacaoComentario}}" id="adjudicacaoNotificacaoComentario" name="adjudicacaoNotificacaoComentario" label="Comentário"></vaadin-text-field>
                                                </div>
                                            </div>
                                            <div class="row break_clear">
                                                <div class="col-sm-6">
                                                    <vaadin-date-picker value="{{data.adjudicacaoNotificacaoData}}" id="adjudicacaoNotificacaoData" name="adjudicacaoNotificacaoData" label="Data"> </vaadin-date-picker>
                                                </div>
                                                <div class="col-sm-6">
                                                    <vaadin-text-field value="{{data.adjudicacaoNotificacaoPrazo}}" id="adjudicacaoNotificacaoPrazo" name="adjudicacaoNotificacaoPrazo" label="Prazo Concedido"> </vaadin-text-field>
                                                </div>
                                            </div>

                                            <div class="row break_clear">

                                                <div class="col-xs-6">
                                                    <vaadin-text-field value="{{data.adjudicacaoNotificacaoUtilizador}}" id="adjudicacaoNotificacaoUtilizador" name="adjudicacaoNotificacaoUtilizador" label="Utilizador"> </vaadin-text-field>
                                                </div>

                                            </div>
                                            <div class="row break_clear">
                                                <div class="col-sm-12">
                                                    <paper-button raised id="btnConfirmAdjudicacaoNotificacao" class="btn--confirm pull-right" on-tap="_confirmAdjudicacaoNotificacao"><i class="fa fa-check" aria-hidden="true"></i>&nbsp; Confirmar</paper-button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xs-6">
                                <div class="panel panel-default">
                                    <div class="panel-heading">Acordos c/ fornecedores</div>
                                    <div class="panel-body">
                                        <div class="">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <vaadin-text-field type="number" value="{{data.adjudicacaoAcordosNo}}" id="adjudicacaoAcordosNo" name="adjudicacaoAcordosNo" label="Nº Contratos/Acordos"></vaadin-text-field>
                                                </div>
                                            </div>
                                            <div class="row break_clear">
                                                <div class="col-sm-6">
                                                    <vaadin-combo-box value="{{data.adjudicacaoAcordosFornecedor}}" label="Fornecedor" items="[[LFornecedores]]" item-value-path="id" id="adjudicacaoAcordosFornecedor" item-label-path="value">
                                                        <template>
                                                            <paper-icon-item>
                                                                <paper-item-body two-line>
                                                                    <div>[[item.value]]</div>
                                                                </paper-item-body>
                                                            </paper-icon-item>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>

                                            </div>
                                            <div class="row break_clear">
                                                <div class="col-sm-12">
                                                    <vaadin-text-field value="{{data.adjudicacaoAcordosFornecedorDescricao}}" id="adjudicacaoAcordosFornecedorDescricao" name="adjudicacaoAcordosFornecedorDescricao" label=""> </vaadin-text-field>
                                                </div>
                                            </div>
                                            <div class="row break_clear">

                                                <div class="col-sm-12">
                                                    <br />
                                                    <paper-button raised id="btnNovoAcordoAdjudicacaoAcordos" class="btn--confirm pull-right" on-tap="_novoAcordoAdjudicacaoAcordos">Criar Novo Contrato/Acordo</paper-button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <div class="col-xs-6">
                                <div class="panel panel-default">
                                    <div class="panel-heading">Contratos fornecedores</div>
                                    <div class="panel-body">
                                        <div class="">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <vaadin-text-field type="number" value="{{data.adjudicacaoContratosNo}}" id="adjudicacaoContratosNo" name="adjudicacaoContratosNo" label="Nº Contratos"></vaadin-text-field>
                                                </div>
                                            </div>
                                            <div class="row break_clear">
                                                <div class="col-sm-6">
                                                    <vaadin-combo-box value="{{data.adjudicacaoContratosFornecedor}}" label="Fornecedor" items="[[LFornecedores]]" item-value-path="id" id="adjudicacaoContratosFornecedor" item-label-path="value">
                                                        <template>
                                                            <paper-icon-item>
                                                                <paper-item-body two-line>
                                                                    <div>[[item.value]]</div>
                                                                </paper-item-body>
                                                            </paper-icon-item>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>

                                            </div>
                                            <div class="row break_clear">
                                                <div class="col-sm-12">
                                                    <vaadin-text-field value="{{data.adjudicacaoContratosFornecedorDescricao}}" id="adjudicacaoContratosFornecedorDescricao" name="adjudicacaoContratosFornecedorDescricao" label=""> </vaadin-text-field>
                                                </div>
                                            </div>
                                            <div class="row break_clear">
                                                <div class="col-sm-6">
                                                    <vaadin-text-field type="number" value="{{data.adjudicacaoContratosValor}}" id="adjudicacaoContratosValor" name="adjudicacaoContratosValor" label="Valor Contrato"> </vaadin-text-field>
                                                </div>
                                            </div>
                                            <div class="row break_clear">

                                                <div class="col-sm-12">
                                                    <br />
                                                    <paper-button raised id="btnNovoContratoAdjudicacaoAcordos" class="btn--confirm pull-right" on-tap="_novoContratoAdjudicacaoAcordos">Criar Contrato</paper-button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xs-6">
                                <div class="panel panel-default">
                                    <div class="panel-heading">Encomendas a fornecedores</div>
                                    <div class="panel-body">
                                        <div class="">
                                            <div class="row">
                                                <div class="col-xs-6">
                                                    <vaadin-text-field type="number" value="{{data.adjudicacaoEncomendasNo}}" id="adjudicacaoEncomendasNo" name="adjudicacaoEncomendasNo" label="Nº Encomendas"></vaadin-text-field>
                                                </div>
                                                <div class="col-xs-6">
                                                    <vaadin-text-field type="number" value="{{data.adjudicacaoEncomendasNo2}}" id="adjudicacaoEncomendasNo2" name="adjudicacaoEncomendasNo2" label="&nbsp;"></vaadin-text-field>
                                                </div>
                                            </div>
                                            <div class="row break_clear">
                                                <div class="col-sm-6">
                                                    <vaadin-combo-box value="{{data.adjudicacaoEncomendasFornecedor}}" label="Fornecedor" items="[[LFornecedores]]" item-value-path="id" id="adjudicacaoEncomendasFornecedor" item-label-path="value">
                                                        <template>
                                                            <paper-icon-item>
                                                                <paper-item-body two-line>
                                                                    <div>[[item.value]]</div>
                                                                </paper-item-body>
                                                            </paper-icon-item>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>

                                            </div>
                                            <div class="row break_clear">
                                                <div class="col-sm-12">
                                                    <vaadin-text-field value="{{data.adjudicacaoEncomendasFornecedorDescricao}}" id="adjudicacaoEncomendasFornecedorDescricao" name="adjudicacaoEncomendasFornecedorDescricao" label=""> </vaadin-text-field>
                                                </div>
                                            </div>
                                            <div class="row break_clear">
                                                <div class="col-sm-6">
                                                    <vaadin-date-picker value="{{data.adjudicacaoEncomendasData}}" id="adjudicacaoEncomendasData" name="adjudicacaoEncomendasData" label="Data Rec. Esperada"> </vaadin-date-picker>

                                                </div>
                                            </div>
                                            <div class="row break_clear">

                                                <div class="col-sm-12">
                                                    <br />
                                                    <paper-button raised id="btnNovaEncomendaAdjudicacaoAcordos" class="btn--confirm pull-right" on-tap="_novaEncomendaAdjudicacaoAcordos">Criar Encomenda</paper-button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                </iron-pages>

                <!-- Save and Create Buttons -->
                <div class="marginSpace">
                    <template is="dom-if" if="{{ _isCreate }}">
                        <paper-button raised id="btnCreate" class="btnSave" on-tap="_create"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                    </template>
                    <template is="dom-if" if="{{ !_isCreate }}">
                        <paper-button raised id="btnUpdate" class="btnSave" on-tap="_update"><i class="fa fa-floppy-o" aria-hidden="true"></i>&nbsp; Guardar</paper-button>
                        <paper-button raised id="btnCancel" class="btnRemove" on-tap="_delete"><i class="fa fa-undo" aria-hidden="true"></i>&nbsp; Eliminar</paper-button>
                    </template>
                </div>
            </div>
        </div>
        <paper-toast id="ToastMessage" duration="4000" horizontalAlign="right"></paper-toast>
    </template>

    <script>
        document.addEventListener('WebComponentsReady', function () {
            ////debugger;;
            Polymer({
                is: 'x-procedimentodetails',
                properties: {
                    _procedimentoid: {
                        type: String,
                        notify: true,
                        value: ""
                    },
                    _procedimentotypeid: {
                        type: Number,
                        value: 0
                    },
                    _userName: {
                        type: String,
                        notify: true,
                        value: ""
                    },
                    selected: {
                        type: Number,
                        value: 0
                    },

                    unidadeProdutivaSelected: {
                        type: Number,
                        value: 0
                    },
                    _isCreate: {
                        type: Boolean,
                        value: false
                    },
                    chkPresidente: {
                        type: Boolean,
                        notify: true,
                        value: false
                    },
                    chkVogal: {
                        type: Boolean,
                        notify: true,
                        value: false
                    },
                    chkSuplente: {
                        type: Boolean,
                        notify: true,
                        value: false
                    },
                    chkSendMail: {
                        type: Boolean,
                        notify: true,
                        value: false
                    },
                    userAllowed: {
                        type: Boolean,
                        value: true
                    },
                    __isElementArea: {
                        type: Boolean,
                        value: false
                    },
                    __isElementPreArea: {
                        type: Boolean,
                        value: false
                    },
                    __isElementPreArea0: {
                        type: Boolean,
                        value: false
                    },
                    __isElementCompras: {
                        type: Boolean,
                        value: false
                    },
                    __isElementJuri: {
                        type: Boolean,
                        value: false
                    },
                    __isElementContabilidade: {
                        type: Boolean,
                        value: false
                    },
                    __isElementJuridico: {
                        type: Boolean,
                        value: false
                    },
                    __isElementCA: {
                        type: Boolean,
                        value: false
                    },
                    __isGestorProcesso: {
                        type: Boolean,
                        value: false
                    },
                    __isSecretariadoCA: {
                        type: Boolean,
                        value: false
                    },
                    __isFechoProcesso: {
                        type: Boolean,
                        value: false
                    },
                },

                _testFunction1: function () {
                    this._openToast("Success: Confirmar");
                },
                _testFunction2: function () {
                    this._openToast("Success: Devolver à àrea");
                },

                ready: function () {
                    //debugger;;
                    this.$.ajax_userpermissions.body = this.data;
                    this.$.ajax_userpermissions.generateRequest();                               
                },

                _openToast: function (message) {
                    ////debugger;;
                    this.$.ToastMessage.text = message;
                    this.$.ToastMessage.open();
                },

                _validateData: function () {
                    ////debugger;;
                    if (false) {
                        this._openToast(validate);
                        return false;
                    }
                    return true;
                },

                //CRUDS
                _create: function () {
                    ////debugger;;
                    this.data.tipoProcedimento = this._procedimentotypeid;

                    if (this._validateData()) {
                        this._executeRequest("/ProcedimentosCcps/CreateProcedimento", this.data)
                    }
                },

                _update: function () {
                    ////debugger;;
                    if (this._onUpdateValidateElementoJuri()) {
                        this._executeRequest("/ProcedimentosCcps/UpdateProcedimento", this.data)
                    }
                },

                _delete: function () {
                    ////debugger;;
                    var Procedimento = this.data;
                    var ajax_request = this.$.ajax_delete_procedimento;
                    bootbox.confirm({
                        message: "Tem a certeza que pretende remover o Procedimento " + this.data.no + "?",
                        buttons: {
                            confirm: {
                                label: 'Sim',
                                className: 'btn-success'
                            },
                            cancel: {
                                label: 'Não',
                                className: 'btn-danger'
                            }
                        },
                        callback: function (result) {
                            if (result) {
                                ajax_request.body = JSON.stringify(Procedimento);
                                ajax_request.generateRequest();
                            }
                        }
                    });
                },

                //Responses Processors
                _responseProcessor: function (data) {
                    var self = this;

                    if (data.detail.status === 200) {
                        if (data.detail.url.indexOf("GetProcedimento") !== -1) {
                            if (this.data.No == "") {
                                this._isCreate = true;
                                return;
                            }

                            //debugger;;
                            this._setFieldsEditability(this.data);

                            this.$.ajax_checklist_estado0.body = this.data;
                            this.$.ajax_checklist_estado0.generateRequest();

                            
                        } else if (data.detail.url.indexOf("Create") !== -1) {
                            this._createResponseProcessor();
                        } else if (data.detail.url.indexOf("Update") !== -1) {
                            this._openToast("Procedimento atualizado com sucesso.")
                        }
                    } else {
                        this._openToast("Ocorreu um erro ao criar o Procedimento.")
                    }
                },

                _createResponseProcessor: function () {
                    ////debugger;;
                    if (this.data.eReasonCode == 1) {
                        this._isCreate = false;
                        this._openToast("Procedimento criado com sucesso.");
                    } else {
                        this._openToast(this.data.eMessage);
                    }
                },

                _responseValidatorProcessor: function (data) {
                    var self = this;
                },

                _responseDeleteProcessor: function (data) {
                    ////debugger;;
                    var self = this;
                    if (data.detail.status === 200) {
                        if (this.deletedData.eReasonCode == 4) {
                            this._openToast("Não é possivel eliminar o Procedimento.");
                        } else {
                            this._openToast(this.deletedData.eMessage);
                            setTimeout(
                                function () {
                                    window.location.replace("/");
                                }, 2500);
                        }
                    }
                },

                _userPermissionsResponseProcessor: function () {
                    if (this.UserAccesses == null) {
                        this._openToast("Não está autorizado a aceder a esta opção");
                        this.userAllowed = false;

                        setTimeout(
                            function () {
                               // window.location.replace("/");
                            }, 3000);
                    }
 
                    if (this.userAllowed) {
                        this.$.page_databound_ajax.body = JSON.stringify({ "No": this._procedimentoid });
                        this.$.page_databound_ajax.generateRequest();

                        // set user permissions
                        for (var i in this.UserAccesses) {
                            switch (this.UserAccesses[i]) {
                                case "IsElementArea": this.__isElementArea = true;
                                    break;
                                case "IsElementPreArea0": this.__isElementPreArea0 = true;
                                    break;
                                case "IsElementPreArea": this.__isElementPreArea = true;
                                    break;
                                case "IsElementCompras": this.__isElementCompras = true;
                                    break;
                                case "IsElementJuri": this.__isElementJuri = true;
                                    break;
                                case "IsElementContabilidade": this.__isElementContabilidade = true;
                                    break;
                                case "IsElementJuridico": this.__isElementJuridico = true;
                                    break;
                                case "IsElementCA": this.__isElementCA = true;
                                    break;
                                case "IsGestorProcesso": this.__isGestorProcesso = true;
                                    break;
                                case "IsSecretariadoCA": this.__isSecretariadoCA = true;
                                    break;
                                case "IsFechoProcesso": this.__isFechoProcesso = true;
                                    break;
                            }
                        };

                        if (this._procedimentoid == "") {
                            this._isCreate = true;
                        }
                    } else {
                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    }  
                },

                // Create Elemento Juri
                _onUpdateValidateElementoJuri: function () {
                    ////debugger;;
                    for (var i in this.data.elementosJuri) {
                        if (!this.data.elementosJuri[i].presidente && !this.data.elementosJuri[i].vogal && !this.data.elementosJuri[i].suplente) {
                            this._openToast("Não escolheu qual a responsabilidade do utilizador: " + this.data.elementosJuri[i].utilizador + ".");
                            return false;
                        }

                        if ((this.data.elementosJuri[i].presidente && (this.data.elementosJuri[i].vogal || this.data.elementosJuri[i].suplente)) ||
                            (this.data.elementosJuri[i].vogal && (this.data.elementosJuri[i].presidente || this.data.elementosJuri[i].suplente)) ||
                            (this.data.elementosJuri[i].suplente && (this.data.elementosJuri[i].presidente || this.data.elementosJuri[i].vogal))) {

                            this._openToast("Apenas pode escolher uma das opções: Presidente, Vogal ou Suplente: " + this.data.elementosJuri[i].utilizador + ".");
                            return false;
                        }

                        if (this.data.elementosJuri[i].presidente) {
                            for (var j in this.data.elementosJuri) {
                                if ((this.data.elementosJuri[i].utilizador != this.data.elementosJuri[j].utilizador) && this.data.elementosJuri[j].presidente) {
                                    this._openToast("Já existe um presidente: " + this.data.elementosJuri[j].utilizador);
                                    return false;
                                }
                            }
                        }
                    }
                    return true;
                },
                _validateElementoJuriData: function () {
                    ////debugger;;
                    if (this._userName == "") {
                        this._openToast("Não escolheu um utilizador!");
                        return false;
                    } else if (!this.chkPresidente && !this.chkVogal && !this.chkSuplente) {
                        this._openToast("Não escolheu qual a responsabilidade do utilizador!");
                        return false;
                    } else if ((this.chkPresidente && (this.chkVogal || this.chkSuplente)) ||
                        (this.chkVogal && (this.chkPresidente || this.chkSuplente)) ||
                        (this.chkSuplente && (this.chkPresidente || this.chkVogal))) {

                        this._openToast("Apenas pode escolher uma das opções: Presidente, Vogal ou Suplente!");
                        return false;
                    } else
                        return true;
                },
                _createElementoJuri: function () {
                    ////debugger;;
                    if (this._validateElementoJuriData()) {
                        this.$.ajax_createelementojuri.body = JSON.stringify({
                            noProcedimento: this.data.no,
                            utilizador: this._userName,
                            presidente: this.chkPresidente,
                            vogal: this.chkVogal,
                            suplente: this.chkSuplente,
                            enviarEmail: this.chkSendMail
                        });

                        this.$.ajax_createelementojuri.generateRequest();
                        //this.gridElementosJuri.clearCache();
                    }
                },
                _createElementoJuriResponse: function (e) {
                    ////debugger;;
                    if (this.ElementoCreated.eReasonCode == 0) {
                        this._openToast('Elemento Júri adicionado com sucesso');
                        this.$.page_databound_ajax.generateRequest();
                        this.$.users.value = "";
                        this.chkPresidente = false;
                        this.chkVogal = false;
                        this.chkSuplente = false;
                        this.chkSendMail = false;
                    } else {
                        if (this.ElementoCreated.eReasonCode == 3 || this.ElementoCreated.eReasonCode == 4)
                            this._openToast(this.ElementoCreated.eMessage);
                        else
                            this._openToast('Não foi possível criar o Elemento do Juri');
                    }
                },
                _deleteElementoJuri: function (e) {
                    ////debugger;;
                    var index = this.data.elementosJuri.indexOf(e.model.item);
                    this.data.elementosJuri.splice(index, 1);
                    this.$.ajax_deleteelementojuri.body = JSON.stringify({
                        noProcedimento: this.data.no,
                        noLinha: e.model.item.noLinha
                    });
                    this.$.ajax_deleteelementojuri.generateRequest();
                    this.$.gridElementosJuri.clearCache();

                },
                _deleteElementoJuriResponse: function (e) {
                    ////debugger;;
                    if (this.ElementoDeleted) {
                        this._openToast('Elemento Juri eliminado com sucesso');

                    } else {
                        this._openToast('Não foi possível eliminar o Elemento do Juri!')
                    }
                },

                // Checklist Fluxo Trabalho
                _checklistResponseEstado0: function (e) {
                    //debugger;;

                    if (this.CLArea != null) {
                        //this._openToast(this.ChecklistArea.comentarioAreaApresentar);
                    }
                },

                // Action of submitting Procedimento
                _onSubmitValidateProcedimento: function () {
                    if (this.data.informacaoTecnica == "" || this.data.informacaoTecnica == null) {
                        this._openToast("A Informação Técnica tem que estar preenchida!")
                        return false;
                    }

                    if (this.data.fundamentoAquisicao == "" || this.data.fundamentoAquisicao == null) {
                        this._openToast("A Fundamentação da Aquisição tem que estar preenchida!")
                        return false;
                    }

                    if (this.data.precoBase == null) {
                        this._openToast("Preço Base: tem que indicar um valor (Sim/Não)!")
                        return false;
                    } else if (this.data.precoBase && this.valorPrecoBase == 0) {
                        this._openToast("Preço Base = Sim: tem que indicar um valor!")
                        return false;
                    }

                    if (this.estimativaPreco == null || this.estimativaPreco == 0) {
                        this._openToast("Obrigatório definir uma Estimativa de Preço, mesmo que não seja definido Preço Base!");
                        return false;
                    }

                    if (this.data.negociacao == null) {
                        this._openToast("Negociação: tem que indicar um valor (Sim/Não)!")
                        return false;
                    }

                    if (this.data.prazo == "" || this.data.prazo == null) {
                        this._openToast("O Prazo para Prestação do Serviço, tem que ser indicado!!")
                        return false;
                    }

                    if (this.data.precoMaisBaixo == null) {
                        this._openToast("Preço Baixo: tem que indicar um valor (Sim/Não)!")
                        return false;
                    }

                    if (this.data.propostaEconMaisVantajosa == null) {
                        this._openToast("Proposta Economicamente mais Vantajosa: tem que indicar um valor (Sim/Não)!")
                        return false;
                    }

                    if (this.data.precoMaisBaixo && this.data.propostaEconMaisVantajosa) {
                        this._openToast("Preço Mais Baixo ou Proposta Economicamente mais vantajosa: apenas pode escolher uma das opções!");
                        return false;
                    }

                    if (this.data.propostaVariante == null) {
                        this._openToast("Proposta Variante: tem que indicar um valor (Sim/Não)!")
                        return false;
                    }

                    if (this.fornecedorExclusivo && (this.descFornecedorExclusivo == null || this.descFornecedorExclusivo == "")) {
                        this._openToast("Obrigatória a fundamentação da exclusividade do fornecedor!");
                        return false;
                    }

                    if (this.data.codigoRegiao == "" || this.data.codigoRegiao == null) {
                        this._openToast("O Código da Região tem que estar preenchido!")
                        return false;
                    }

                    if (this.data.codigoAreaFuncional == "" || this.data.codigoAreaFuncional == null) {
                        this._openToast("O Código da Àrea Funcional tem que estar preenchido!")
                        return false;
                    }

                    // zpgm.21112017_1900

                    return true;
                },
                _submitProcedimento: function () {
                    if (this.data.estado != 0) {
                        this._openToast("Não permitido neste estado!");
                        return;
                    }

                    if (this._onSubmitValidateProcedimento()) {
                        this.$.ajax_submitprocedimento.body = this.data;
                        this.$.ajax_submitprocedimento.generateRequest();
                    }
                },
                _submitProcedimentoResponse: function (e) {
                    if (this.ProcedimentoSubmitted.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " submetido com sucesso!");
                    } else {
                        this._openToast(ProcedimentoSubmitted.eMessage);
                    }
                },

                _setFieldsEditability(data) {
                    //debugger;;

                    var _self = this;

                    //if (data.estado == 0) {
                    //    $(_self.$.actionButton1).addClass('disabled');
                    //}
                    // Disable controls 
                    // 1. Procedimento status != 0.b
                    if (data.estado != 0) {
                        $(_self.$.gridElementosJuri1).addClass('disabled');
                        $(_self.$.buttonCriarElementoJuri1).addClass('disabled');
                        $(_self.$.submitProcedimento).addClass('disabled');
                        $(_self.$.gridElementosJuri2).addClass('disabled');
                        $(_self.$.buttonCriarElementoJuri2).addClass('disabled');
                    }

                    _self.$.responsavelAreaApresentar.hidden = (data.estado == 0);
                    _self.$.nomeResponsavelAreaApresentar.hidden = (data.estado == 0);
                    _self.$.dataResponsavelApresentar.hidden = (data.estado == 0);

                    _self.$.informacaoTecnica.disabled = (data.estado != 0);
                    _self.$.fundamentacaoAquisicao.disabled = (data.estado != 0);
                    _self.$.precoBase.disabled = (data.estado != 0);
                    _self.$.negociacao.disabled = (data.estado != 0);
                    _self.$.prazo.disabled = (data.estado != 0);
                    _self.$.users.disabled = (data.estado != 0);
                    _self.$._chkPresidente.disabled = (data.estado != 0);
                    _self.$._chkVogal.disabled = (data.estado != 0);
                    _self.$._chkSuplente.disabled = (data.estado != 0);
                    _self.$._chkSendMail.disabled = (data.estado != 0);
                    _self.$.comentarioAreaApresentar.disabled = (data.estado != 0);
                    _self.$.precoMaisBaixo.disabled = (data.estado != 0); 
                    _self.$.descPrecoMaisBaixo.disabled = (data.estado != 0);
                    _self.$.propostaEconMaisVantajosa.disabled = (data.estado != 0);
                    _self.$.descPropostaEconMaisVantajosa.disabled = (data.estado != 0);
                    _self.$.propostaVariante.disabled = (data.estado != 0);
                    _self.$.descPropostaVariante.disabled = (data.estado != 0);
                    _self.$.abertoFechadoAoMercado.disabled = (data.estado != 0);
                    _self.$.descAbertoFechadoAoMercado.disabled = (data.estado != 0);
                    _self.$.prazoEntrega.disabled = (data.estado != 0);
                    _self.$.locaisEntrega.disabled = (data.estado != 0);
                    _self.$.observacoesAdicionais.disabled = (data.estado != 0);
                    _self.$.estimativaPreco.disabled = (data.estado != 0);
                    _self.$.fornecedoresSugeridos.disabled = (data.estado != 0);
                    _self.$.fornecedorExclusivo.disabled = (data.estado != 0);
                    _self.$.descFornecedorExclusivo.disabled = (data.estado != 0);
                    _self.$.interlocutor.disabled = (data.estado != 0);
                    // 1. Procedimento status != 0.e
                    
                    // 2. Procedimento status != 1.b
                    _self.$.contabilidadeComentario.disabled = (data.estado != 1 || !_self.__isElementContabilidade);
                    // 1. Procedimento status != 1.e

                        //esconder um campo
                        //_self.$.codigoRegiao.hidden = true;

                        //esconder uma seccao (adicionar id ao container da seccao)
                        //_self.$.seccaoTeste.hidden = true;
                   
                },
                //Helpers
                _executeRequest: function (url, data) {
                    //////debugger;;
                    this.$.page_databound_ajax.url = url;
                    this.$.page_databound_ajax.body = JSON.stringify(data);
                    this.$.page_databound_ajax.generateRequest();
                }
            });
        });
    </script>
</dom-module>