<link rel="import" href="/lib/paper-tabs-master/paper-tab.html" />
<link rel="import" href="/lib/paper-tabs-master/paper-tabs.html" />
<link rel="import" href="/lib/iron-pages-master/iron-pages.html" />
<link rel="import" href="/lib/iron-menu-behavior/iron-menubar-behavior.html" />
<link rel="import" href="/lib/iron-form/iron-form.html" />
<link rel="import" href="/lib/paper-input/paper-input.html" />
<link rel="import" href="/lib/paper-button/paper-button.html" />
<link rel="import" href="/lib/paper-toast-master/paper-toast.html" />

<link rel="import" href="/lib/vaadin-valo-theme/vaadin-date-picker.html">
<link rel="import" href="/lib/vaadin-valo-theme/vaadin-checkbox.html">
<link rel="import" href="/lib/vaadin-text-field/vaadin-text-field.html">
<link rel="import" href="/lib/vaadin-date-picker/vaadin-date-picker.html">
<link rel="import" href="/lib/vaadin-grid/vaadin-grid.html">
<link rel="import" href="/lib/vaadin-checkbox/vaadin-checkbox.html">
<link rel="import" href="/lib/vaadin-combo-box/vaadin-combo-box.html" />

<link rel="import" href="/lib/vaadin-radio-button/vaadin-radio-button.html">
<link rel="import" href="/lib/vaadin-radio-button/vaadin-radio-button-group.html">

<link rel="import" href="/lib/such-textarea/such-textarea.html">
<link rel="import" href="/lib/paper-tooltip-master/paper-tooltip.html">
<link rel="import" href="/lib/neon-animation/web-animations.html">

<link rel="import" href="/lib/paper-collapse-item/paper-collapse-group.html">
<link rel="import" href="/lib/paper-collapse-item/paper-collapse-item.html">

<link rel="import" href="/lib/vaadin-context-menu/vaadin-context-menu.html" />
<link rel="import" href="/lib/vaadin-list-box/vaadin-list-box.html" />
<link rel="import" href="/lib/vaadin-item/vaadin-item.html" />
<!--<link rel="import" href="/lib/paper-menu/paper-menu.html" />-->
<!--<link rel="import" href="/lib/paper-item/paper-item.html" />-->
<!-- NR 20180226 -->
<link rel="import" href="/lib/such-selectbox/such-selectbox.html">
<link rel="import" href="/lib/vaadin-dialog/vaadin-dialog.html">
<link rel="import" href="/lib/vaadin-upload/vaadin-upload.html">
<link rel="import" href="/lib/such-dropdown-menu/such-dropdown-menu.html" />
<link rel="import" href="/lib/vaadin-progress-bar/vaadin-progress-bar.html">

<dom-module id="x-procedimentodetails">
    <template>
        <!-- STYLES -->
        <link rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap.css" />
        <link rel="stylesheet" href="/lib/font-awesome-4.7.0/css/font-awesome.min.css" />
        <link rel="stylesheet" href="/css/main.css" />

        <style>
            .Vermelho {
                background-color: white !important;
                width: 0;
                height: 0;
                border-style: solid;
                border-width: 10px 25px 10px 0;
                border-color: transparent #ff0000 transparent transparent;
            }

            .Verde {
                background-color: white !important;
                width: 0;
                height: 0;
                border-style: solid;
                border-width: 10px 0 10px 25px;
                border-color: transparent transparent transparent #55ff00;
            }

            .Branco {
                background-color: white !important;
                border: 1px solid white;
                outline-style: solid;
                outline-color: white;
                outline-width: 8px;
            }

            .mb-15 {
                margin-bottom: 15px;
            }

            .mb-7 {
                margin-bottom: 7px;
            }

            vaadin-combo-box {
                margin-top: 0px !important;
                width: 100% !important;
            }

            vaadin-date-picker {
                margin-top: 0px !important;
                width: 100% !important;
            }

            vaadin-text-field {
                margin-top: 0px !important;
                width: 100%;
            }

            input {
                font: inherit;
            }

            .break_clear {
                margin-top: 15px;
            }

            hr {
                line-height: 5px;
            }

            .customHr {
                line-height: 1px;
                background-color: black;
            }

            paper-tooltip {
                padding: 11px;
                right: 5px;
                opacity: 1;
                box-sizing: border-box;
                pointer-events: none;
                max-width: 500px;
                left: 2px !important;
                right: none;
                white-space: initial;
                --paper-tooltip: {
                                  font-size: 13px;
                                  background: #f5f5f5;
                                  background: white;
                                  color: #2A2A2A;
                                  padding: 10px;
                                  line-height: 1.3em;
                                  -webkit-box-shadow: 5px 5px 10px -1px rgba(0,0,0,0.2);
                                  -moz-box-shadow: 5px 5px 10px -1px rgba(0,0,0,0.2);
                                  box-shadow: 5px 5px 10px -1px rgba(0,0,0,0.2);
                             }
            }

            [part="label"] {
                color: rgba(48, 64, 84, 0.52);
                margin-bottom: 1px;
            }

            .title--bgblue {
                border: none;
                border-radius: 6px;
                color: white !important;
                background-color: cornflowerblue;
                border: none !important;
            }

            .title--bgyellow {
                border: none;
                border-radius: 6px;
                color: dimgrey !important;
                background-color: yellow;
                border: none !important;
            }

            paper-collapse-item {
                --paper-item: { padding: 0 0;};
                --paper-collapse-item-header: {
                        padding: 0 15px;
                        color: #333;
                        background-color: #f5f5f5;
                        border-bottom: solid #ddd 1px;
                        border-top-left-radius: 3px;
                        border-top-right-radius: 3px;

                    } --paper-collapse-toogle-icon: {
                    //display: none;
                    } --paper-collapse-item-content {

                    }
            }

            .btn--confirm {
                min-width: 50px !important;
                height: 30px !important;
                padding: 5px 10px;
                cursor: pointer;
                background: #71BCC1;
                color: white;
                margin-top: 7px;
            }

            .btn--sendtoevaluate {
                min-width: 50px !important;
                height: 30px !important;
                padding: 5px 10px;
                cursor: pointer;
                margin-top: 7px;
            }

            .btn--remove {
                min-width: 50px !important;
                height: 30px !important;
                padding: 5px 10px;
                cursor: pointer;
                margin-top: 7px;
                color: white;
                background: #D5662F;
            }
            /*zpgm*/
            .btn--return {
                min-width: 50px !important;
                height: 30px !important;
                padding: 5px 10px;
                cursor: pointer;
                margin-top: 7px;
                color: white;
                background: #9E21FF;
            }

            .btn--cntxt-menu {
                min-width: 50px !important;
                height: 30px !important;
                padding: 5px 10px;
                cursor: pointer;
                margin-top: 7px;
                color: white;
                background: #FF7259;
            }

            /*NR20180313*/
            .subMenu {
                background-color: #D5662F !important;
                padding: 0px !important;
                min-width: 50px !important;
                height: 30px !important;
                cursor: pointer;
                margin-top: 7px;
                border-radius: 4px !important;
            }

            .tablinks {
                text-transform: none;
                border: none;
                margin: 0 5px;
                padding: 5px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 14px;
                background-color: transparent;
                color: black;
            }

            vaadin-grid.disabled:after {
                content: "";
                position: absolute;
                left: 0;
                right: 0;
                top: 0;
                bottom: 0;
                width: 100%;
                cursor: not-allowed;
            }

            paper-button.disabled {
                cursor: not-allowed;
                pointer-events: none;
            }
        </style>

        <!-- Dropdowns populate.b -->
        <iron-ajax url="/PopulateDropdowns/GetRegionCode"
                   last-response="{{CBRegions}}"
                   auto method="post"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetFunctionalAreaCode"
                   last-response="{{CBFunctionalAreas}}"
                   auto method="post" handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetResponsabilityCenterCode"
                   last-response="{{CBResponsabilityCenterCodes}}"
                   auto method="post"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetPocedimentosCcpProcedimentoType"
                   last-response="{{LProcedimentoType}}"
                   auto method="post"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetProcedimentosCcpType"
                   last-response="{{LType}}"
                   auto method="post"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetProcedimentosCcpStates"
                   last-response="{{LProcedimentoState}}"
                   auto method="post" handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetBoolValues"
                   last-response="{{LBoolValues}}"
                   auto method="post" handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetPocedimentosAbertoFechado"
                   last-response="{{LAbertoFechado}}"
                   auto method="post" handle-as="json"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/PopulateDropdowns/GetTipoLinhasProdutosCCP"
                   last-response="{{CBTipo}}"
                   auto method="post"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetLocations"
                   last-response="{{CBLocations}}"
                   auto method="post"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetProducts"
                   last-response="{{CBItems}}"
                   auto method="post"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetUnitOfMeasureByCode"
                   last-response="{{LCBMeasuresUnit}}"
                   auto method="post"
                   id="measuresunit_ajax"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>

        <!-- Requisições-->
        <iron-ajax url="/PopulateDropdowns/GetRequisitions"
                   last-response="{{CB_REQ}}"
                   auto method="post"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>

        <!-- NR 20180228 -->
        <iron-ajax url="/PopulateDropdowns/GetObjectoDeContratoCCP"
                   last-response="{{CBObjectoContrato}}"
                   auto method="post"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetAllGestorProcesso"
                   last-response="{{CBGestorProcesso}}"
                   auto method="post"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>

        <!--NR 20180305-->
        <iron-ajax url="/PopulateDropdowns/getSupplier"
                   last-response="{{cboSupplier}}"
                   auto method="post"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/GetUsersWhoAreElementosJuri"
                   last-response="{{LUsers}}"
                   auto method="post"
                   handle-as="json"
                   content-type="application/json">
        </iron-ajax>
        <!-- Dropdowns populate.e -->
        <!-- Controller actions.b -->
        <iron-ajax url="/ProcedimentosCcps/GetUserFeatures"
                   last-response="{{UserAccesses}}"
                   method="post"
                   handle-as="json"
                   id="ajax_userpermissions"
                   on-response="_userPermissionsResponseProcessor"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/GetProcedimentoDetails"
                   last-response="{{data}}"
                   method="post"
                   handle-as="json"
                   id="page_databound_ajax"
                   on-response="_responseProcessor"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/DeleteProcedimento"
                   last-response="{{deletedData}}"
                   method="post"
                   handle-as="json"
                   id="ajax_delete_procedimento"
                   on-response="_responseDeleteProcessor"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/UpdateProcedimento"
                   last-response="{{ProcedimentoUpdated}}"
                   method="post"
                   handle-as="json"
                   id="ajax_update_procedimento"
                   on-response="_updateProcedimentoResponse"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/CreateElementoJuri"
                   last-response="{{ElementoCreated}}"
                   method="post"
                   handle-as="json"
                   id="ajax_createelementojuri"
                   on-response="_createElementoJuriResponse"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/DeleteElementoJuri"
                   last-response="{{ElementoDeleted}}"
                   method="post"
                   handle-as="json"
                   id="ajax_deleteelementojuri"
                   on-response="_deleteElementoJuriResponse"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/SubmitProcedimento"
                   last-response="{{ProcedimentoSubmitted}}"
                   method="post"
                   handle-as="json"
                   id="ajax_submitprocedimento"
                   on-response="_submitProcedimentoResponse"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/ConfirmProcedimento_Simplificado"
                   last-response="{{ ProcedimentoConfirmed }}"
                   method="post"
                   handle-as="json"
                   id="ajax_confirmImobContabilidade"
                   on-response="_confirmImobilizadoContabResponse"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/ReturnToArea"
                   last-response="{{ ProcedimentoReturnedToArea }}"
                   method="post"
                   handle-as="json"
                   id="ajax_imobReturnToArea"
                   on-response="_imobReturnToAreaResponse"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/ProcedimentosCcps/CreateLinhaProdutoServico"
                   last-response="{{LinhaProdutoServicoCreated}}"
                   method="post"
                   handle-as="json"
                   id="page_createaLinhaProdutoServico_ajax"
                   on-response="_createLinhaProdutoServicoResponse"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/DeleteLinhaProdutoServico"
                   last-response="{{LinhaProdutoServicoDeleted}}"
                   method="post"
                   handle-as="json"
                   id="page_deleteLinhaProdutoServico_ajax"
                   on-response="_deleteLinhaProdutoServicoResponse"
                   content-type="application/json">
        </iron-ajax>



        <iron-ajax url="/ProcedimentosCcps/CreateLigacaoRequisicao"
                   last-response="{{LigacaoRequisicaoCreated}}"
                   method="post"
                   handle-as="json"
                   id="page_createLigacaoRequisicao_ajax"
                   on-response="_createLigacaoRequisicaoResponse"
                   content-type="application/json">
        </iron-ajax>

        <!--NR 20180301-->
        <iron-ajax url="/ProcedimentosCcps/SubmitToAccounting_Simplificado"
                   last-response="{{ EnviarParaFinanceiros }}"
                   method="post"
                   handle-as="json"
                   id="ajax_enviarParaFinanceiros"
                   on-response="_enviarParaFinanceirosResponse"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/SubmitToLegalDepartment"
                   last-response="{{ EnviarParaJuridicos }}"
                   method="post"
                   handle-as="json"
                   id="ajax_enviarParaJuridicos"
                   on-response="_enviarParaJuridicosResponse"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/SubmitToArea_Simplificado"
                   last-response="{{ EnviarParaArea }}"
                   method="post"
                   handle-as="json"
                   id="ajax_enviarParaArea"
                   on-response="_enviarParaAreaResponse"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/CBVASubmetAprov_Simplificado"
                   last-response="{{ SubmeterProcesso_16 }}"
                   method="post"
                   handle-as="json"
                   id="ajax_submeterProcesso_16"
                   on-response="_submeterProcesso_16Response"
                   content-type="application/json">
        </iron-ajax>

        <!--NR 20180320-->
        <iron-ajax url="/ProcedimentosCcps/CBRejeitar2CA_Simplificado"
                   last-response="{{ RejectAutorizacaoAdjudicacao }}"
                   method="post"
                   handle-as="json"
                   id="ajax_rejectAutorizacaoAdjudicacao"
                   on-response="_rejectAutorizacaoAdjudicacaoResponse"
                   content-type="application/json">
        </iron-ajax>

        <!--NR 20180321-->
        <iron-ajax url="/ProcedimentosCcps/CBAutorizar2CA_Simplificado"
                   last-response="{{ ConfirmAutorizacaoAdjudicacao }}"
                   method="post"
                   handle-as="json"
                   id="ajax_confirmAutorizacaoAdjudicacao"
                   on-response="_confirmAutorizacaoAdjudicacaoResponse"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/CBDevolverAutorizacaoCA_Simplificado"
                   last-response="{{ SuspendAutorizacaoAdjudicacao }}"
                   method="post"
                   handle-as="json"
                   id="ajax_suspendAutorizacaoAdjudicacao"
                   on-response="_suspendAutorizacaoAdjudicacaoResponse"
                   content-type="application/json">
        </iron-ajax>

        <!--NR 20180328-->
        <iron-ajax url="/ProcedimentosCcps/MudarEstado"
                   last-response="{{ MudarEstado }}"
                   method="post"
                   handle-as="json"
                   id="ajax_mudarEstado"
                   on-response="_mudarEstadoResponse"
                   content-type="application/json">
        </iron-ajax>

        <!-- NR 20180229 -->
        <iron-ajax url="/ProcedimentosCcps/CreateNota"
                   last-response="{{ CreateNota }}"
                   method="post"
                   handle-as="json"
                   id="page_createNota_ajax"
                   on-response="_createNotaResponse"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/DeleteNota"
                   last-response="{{ DeleteNota }}"
                   method="post"
                   handle-as="json"
                   id="page_deleteNota_ajax"
                   on-response="_deleteNotaResponse"
                   content-type="application/json">
        </iron-ajax>

        <!--NR 20180306-->
        <iron-ajax url="/ProcedimentosCcps/ReturnToArea_Simplificado"
                   last-response="{{ DevolverParaArea }}"
                   method="post"
                   handle-as="json"
                   id="ajax_devolverParaArea"
                   on-response="_devolverParaAreaResponse"
                   content-type="application/json">
        </iron-ajax>

        <!--NR 20180308-->
        <iron-ajax url="/ProcedimentosCcps/SubmitToBoardForOpening"
                   last-response="{{ EnviarParaCAAbertura }}"
                   method="post"
                   handle-as="json"
                   id="ajax_enviarParaCAAbertura"
                   on-response="_enviarParaCAAberturaResponse"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/SubmitToBoardForGranting"
                   last-response="{{ EnviarParaCAAdjudicacao }}"
                   method="post"
                   handle-as="json"
                   id="ajax_enviarParaCAAdjudicacao"
                   on-response="_enviarParaCAAdjudicacaoResponse"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/SubmitToArea_5"
                   last-response="{{ EnviarParaArea_5 }}"
                   method="post"
                   handle-as="json"
                   id="ajax_enviarParaArea_5"
                   on-response="_enviarParaArea_5Response"
                   content-type="application/json">
        </iron-ajax>

        <!--NR 20180309-->
        <iron-ajax url="/ProcedimentosCcps/ReturnToAcquisition_Simplificado"
                   last-response="{{ DevolverACompras_5 }}"
                   method="post"
                   handle-as="json"
                   id="ajax_devolverACompras_5"
                   on-response="_devolverACompras_5Response"
                   content-type="application/json">
        </iron-ajax>

        <!--NR 20180307-->
        <iron-ajax url="/ProcedimentosCcps/GetPermission_Simplificado"
                   last-response="{{ PedirAutorizacaoConfirmed }}"
                   method="post"
                   handle-as="json"
                   id="ajax_pedirAutorizacao"
                   on-response="_pedirAutorizacaoResponse"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/ReturnToAccounting_Simplificado"
                   last-response="{{ DevolverContabilidadeConfirmed }}"
                   method="post"
                   handle-as="json"
                   id="ajax_devolverContabilidade"
                   on-response="_devolverContabilidadeResponse"
                   content-type="application/json">
        </iron-ajax>
        <iron-ajax url="/ProcedimentosCcps/CloseProcedimentoArea_Simplificado"
                   last-response="{{ FecharProcessoConfirmed }}"
                   method="post"
                   handle-as="json"
                   id="ajax_fecharProcesso"
                   on-response="_fecharProcessoResponse"
                   content-type="application/json">
        </iron-ajax>

        <!-- NR 20180313 -->
        <iron-ajax url="/ProcedimentosCcps/SendEmail_ToJuriAproval"
                   last-response="{{SendEmail_ToJuriAproval}}"
                   method="post"
                   handle-as="json"
                   id="ajax_sendEmail_ToJuriAproval"
                   on-response="_sendEmail_ToJuriAprovalResponse"
                   content-type="application/json">
        </iron-ajax>

        <!-- Controller actions.e -->
        <!-- Header section of the Procedimento details -->
        <div class="panel panel-default">
            <div class="panel-heading">Cabeçalho</div>
            <div class="panel-body">
                <div>
                    <div class="row break_clear">
                        <div class="col-sm-3">
                            <vaadin-text-field type="text" value="{{data.no}}" id="no" name="no" label="Nº Procedimento" disabled="true"> </vaadin-text-field>
                        </div>
                        <div class="col-sm-3">
                            <vaadin-combo-box items="[[CBRegions]]" id="codigoRegiao" item-value-path="id" item-label-path="value" value="{{data.codigoRegiao}}" label="Cód. Região" disabled="{{ !_permissions.update }}" required error-message="Este campo é obrigatório">
                                <template>
                                    <table width="250px">
                                        <tr>
                                            <td width="20%">[[item.id]]</td>
                                            <td width="80%">
                                                <b>[[item.value]]</b>
                                            </td>
                                        </tr>
                                    </table>
                                </template>
                            </vaadin-combo-box>
                        </div>
                        <div class="col-sm-3">
                            <vaadin-combo-box items="[[CBFunctionalAreas]]" id="codigoAreaFuncional" item-value-path="id" item-label-path="value" value="{{data.codigoAreaFuncional}}" label="Àrea Funcional" disabled="{{ !_permissions.update }}" required error-message="Este campo é obrigatório">
                                <template>
                                    <table width="250px">
                                        <tr>
                                            <td width="30%">[[item.id]]</td>
                                            <td width="70%">
                                                <b>[[item.value]]</b>
                                            </td>
                                        </tr>
                                    </table>
                                </template>
                            </vaadin-combo-box>
                        </div>
                        <div class="col-sm-3">
                            <vaadin-combo-box items="[[CBResponsabilityCenterCodes]]" id="codigoCentroResponsabilidade" item-value-path="id" item-label-path="value" value="{{data.codigoCentroResponsabilidade}}" label="Centro Responsabilidade" disabled="{{ !_permissions.update }}" required error-message="Este campo é obrigatório">
                                <template>
                                    <table width="180px">
                                        <tr>
                                            <td width="40%">[[item.id]]</td>
                                            <td width="60%">
                                                <b>[[item.value]]</b>
                                            </td>
                                        </tr>
                                    </table>
                                </template>
                            </vaadin-combo-box>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="row break_clear">
                        <div class="col-sm-3">
                            <vaadin-combo-box items="[[LProcedimentoState]]" id="id_Estado" item-value-path="id" item-label-path="value" required value="{{data.estado}}" label="Estado" disabled="true">
                                <template>
                                    <paper-icon-item>
                                        <paper-item-body two-line>
                                            <div>[[item.value]]</div>
                                        </paper-item-body>
                                    </paper-icon-item>
                                </template>
                            </vaadin-combo-box>
                        </div>
                        <div class="col-sm-3">
                            <vaadin-text-field type="text" label="Nº Requisição" disabled="true"> </vaadin-text-field>
                        </div>
                        <div class="col-sm-3">
                            <vaadin-text-field type="text" label="Nº Encomenda" disabled="true"> </vaadin-text-field>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="row break_clear">
                        <div class="col-sm-3">
                            <vaadin-checkbox checked="{{data.imobilizado}}" required>Imobilizado?</vaadin-checkbox>
                        </div>
                    </div>
                </div>

                <!-- Procedimentos section tabs-->
                <paper-tabs fit-container no-slide autoselect autoselect-delay="0" selected="{{selected}}">
                    <paper-tab>Unidade Produtiva (0)</paper-tab>
                    <paper-tab>Imobilizado (1-2)</paper-tab>
                    <paper-tab>Fundamentos Decisão (4, 5 e 16)</paper-tab>
                    <paper-tab>CA</paper-tab>
                    <paper-tab>Linhas Encomenda</paper-tab>
                    <paper-tab>Workflow</paper-tab>
                    <paper-tab>Notas</paper-tab>
                </paper-tabs>

                <iron-pages selected="{{selected}}">
                    <!-- Tab Unidade Produtiva-->
                    <div class="panel panel-default">
                        <paper-collapse-group>
                            <paper-collapse-item header="Avaliação Técnica" opened>
                                <!-- Tab Unidade Produtiva - Avaliação Tecnica-->
                                <div class="col-xs-12 mb-15">
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <paper-tooltip for="informacaoTecnica" position="top" offset="-1" animation-delay="1">
                                                Descrição da prestação de serviços ou bem a adquirir
                                            </paper-tooltip>
                                            <such-textarea rows="3" value="{{data.informacaoTecnica}}" id="informacaoTecnica" name="informacaoTecnica" label="Informação Técnica"> </such-textarea>
                                        </div>
                                        <div class="col-sm-6">
                                            <such-textarea rows="3" value="{{data.fundamentacaoAquisicao}}" id="fundamentacaoAquisicao" name="fundamentacaoAquisicao" label="Fundamentação Aquisição"> </such-textarea>
                                        </div>
                                    </div>

                                    <div class="row break_clear">
                                        <div class="col-sm-3">
                                            <vaadin-combo-box items="[[LBoolValues]]" item-value-path="booleanValue" item-label-path="stringValue" required value="{{data.precoBase}}" id="precoBase" label="Preço Base?">
                                                <template>
                                                    <paper-icon-item>
                                                        <paper-item-body two-line>
                                                            <div>[[item.stringValue]]</div>
                                                        </paper-item-body>
                                                    </paper-icon-item>
                                                </template>
                                            </vaadin-combo-box>
                                        </div>
                                        <div class="col-sm-6">
                                            <paper-tooltip for="valorPrecoBase" position="top" offset="-1" animation-delay="1">
                                                Segundo este preceito, o preço base do procedimento é o valor máximo que o SUCH está disposto a pagar. É um limite ao valor das propostas que, se o ultrapassarem, terão que ser excluídas. Se Sim, a area deve indicar o valor do preço base (1).
                                            </paper-tooltip>
                                            <vaadin-text-field type="text" value="{{data.valorPrecoBase}}" id="valorPrecoBase" name="valorPrecoBase" label="Valor Preço Base" maxlength="18" pattern="[0-9]+([\.][0-9]+)?" on-value-changed="_ConvertDecimals"> </vaadin-text-field>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-3">
                                            <vaadin-combo-box items="[[LBoolValues]]" item-value-path="booleanValue" item-label-path="stringValue" required value="{{data.negociacao}}" id="negociacao" label="Negociação?">
                                                <template>
                                                    <paper-icon-item>
                                                        <paper-item-body two-line>
                                                            <div>[[item.stringValue]]</div>
                                                        </paper-item-body>
                                                    </paper-icon-item>
                                                </template>
                                            </vaadin-combo-box>
                                        </div>
                                    </div>
                                    <!-- Elementos Juri section.b -->
                                    <h2 class="separator" style="border-bottom:1px dotted; padding:0;">Elementos do Juri a designar pela UP</h2>
                                    <div class="table inlineForm">
                                        <div class="col-sm-3" style="padding-left:0;">
                                            <vaadin-combo-box items="[[LUsers]]" id="users" item-value-path="id" value="{{_userName }}" item-label-path="id" label="Possiveis Elementos">
                                                <template>
                                                    <paper-icon-item>
                                                        <paper-item-body two-line>
                                                            <div>[[item.value]]</div>
                                                        </paper-item-body>
                                                    </paper-icon-item>
                                                </template>
                                            </vaadin-combo-box>
                                        </div>
                                        <div id="formAddElemento">
                                            <div class="col-lg-3 col-sm-4">
                                                <p>Responsabilidades</p>
                                                <vaadin-radio-button-group id="responsabilidades" name="responsabilidades" value="{{responsabilidade}}">
                                                    <vaadin-radio-button id="_chkPresidente" checked="{{chkPresidente}}" value="presidente">Presidente</vaadin-radio-button>
                                                    <vaadin-radio-button id="_chkVogal" checked="{{chkVogal}}" value="vogal">Vogal</vaadin-radio-button>
                                                    <vaadin-radio-button id="_chkSuplente" checked="{{chkSuplente}}" value="suplente">Suplente</vaadin-radio-button>
                                                </vaadin-radio-button-group>
                                            </div>
                                            <div class="col-sm-2">
                                                <p>&nbsp;</p>
                                                <vaadin-checkbox id="_chkSendMail" checked="{{chkSendMail}}">Enviar Email</vaadin-checkbox>
                                            </div>
                                        </div>
                                        <div class="col-lg-3">
                                            <br />
                                            <paper-button class="btnSave" id="buttonCriarElementoJuri" raised on-tap="_createElementoJuri"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                        </div>
                                    </div>
                                    <vaadin-grid id="gridElementosJuri" aria-label="gridElementosJuri" items="{{data.elementosJuri}}" class="grid" style="height:170px;">
                                        <vaadin-grid-column width="20%">
                                            <template class="header">
                                                Utilizador
                                            </template>
                                            <template>
                                                <vaadin-text-field id="idElemento1" type="text" value="{{ item.utilizador }}"></vaadin-text-field>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="20%">
                                            <template class="header">
                                                Nome
                                            </template>
                                            <template>
                                                <vaadin-text-field id="nomeElementoJuri1" type="text" value="{{ item.nomeEmpregado }}"></vaadin-text-field>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="8%">
                                            <template class="header">
                                                <center>
                                                    Presidente
                                                </center>
                                            </template>
                                            <template>
                                                <center>
                                                    <vaadin-checkbox id="isPresidente1" checked="{{item.presidente}}"></vaadin-checkbox>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="8%">
                                            <template class="header">
                                                <center>
                                                    Vogal
                                                </center>
                                            </template>
                                            <template>
                                                <center>
                                                    <vaadin-checkbox id="isVogal1" checked="{{item.vogal}}"></vaadin-checkbox>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="6%">
                                            <template class="header">
                                                <center>
                                                    Suplente
                                                </center>
                                            </template>
                                            <template>
                                                <center>
                                                    <vaadin-checkbox id="isSuplente1" checked="{{item.suplente}}"></vaadin-checkbox>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="8%">
                                            <template class="header">
                                                <center>
                                                    Enviar Email?
                                                </center>
                                            </template>
                                            <template>
                                                <center>
                                                    <vaadin-checkbox id="doSendMail1" checked="{{item.enviarEmail}}"></vaadin-checkbox>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="20%">
                                            <template class="header">
                                                Endereço Email
                                            </template>
                                            <template>
                                                <vaadin-text-field id="emailElemento1" type="text" value="{{ item.email }}"></vaadin-text-field>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="10%">
                                            <template class="header">
                                            </template>
                                            <template>
                                                <!--<center>-->
                                                <paper-button raised class="btnRemove" id="deleteJuri1" on-tap="_deleteElementoJuri"><i class="fa fa-trash-o" aria-hidden="true"></i>&nbsp; Eliminar</paper-button>
                                                <!--</center>-->
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>
                                    <h2 class="separator" style="border-bottom:1px dotted; padding:0;"></h2>
                                    <!-- Elementos Juri section.e -->
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <vaadin-text-field type="text" value="{{data.prazo}}" id="prazo" name="prazo" label="Prazo para a prestação do serviço (Até 3 anos)"> </vaadin-text-field>
                                        </div>
                                    </div>
                                    <!--Elementos Checklist - Estado 0 - .b -->
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <such-textarea rows="5" value="{{ data.comentarioArea }}" id="comentarioAreaApresentar" name="comentarioAreaApresentar" label="Comentário"> </such-textarea>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <label part="label" class="grey" id="vaadin-text-field-label-30">O Responsável da Área pela apresentação da informação</label>
                                                </div>
                                                <div class="col-sm-4">
                                                    <vaadin-text-field value="{{data.responsavelArea}}" id="responsavelArea" name="responsavelArea" disabled="true"></vaadin-text-field>
                                                </div>

                                                <div class="col-sm-8">
                                                    <vaadin-text-field value="{{data.nomeResponsavelArea}}" id="nomeResponsavelArea" name="nomeResponsavelArea" disabled="true"> </vaadin-text-field>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-text-field value="{{data.dataResponsavel}}" id="dataResponsavel" name="dataResponsavel" label="Data" disabled="true"> </vaadin-text-field>
                                        </div>
                                    </div>
                                    <!--Elementos Checklist - Estado 0 - .e -->
                                    <div class="col-lg-6">
                                        <br />
                                        <paper-button raised id="submitProcedimento" class="btn--confirm pull-left" on-tap="_submitProcedimento"><i class="fa fa-check" aria-hidden="true"></i>&nbsp; Submeter</paper-button>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </paper-collapse-item>
                            <paper-collapse-item header="Critérios Adjudicação">
                                <!-- Tab Unidade Produtiva - Critérios de Adjudicação-->
                                <div class="col-xs-12 mb-15">
                                    <div class="row break_clear">
                                        <div class="col-sm-12">
                                            <div class="row">
                                                <div class="col-sm-4">
                                                    <vaadin-combo-box items="[[LBoolValues]]" item-value-path="booleanValue" id="precoMaisBaixo" item-label-path="stringValue" value="{{data.precoMaisBaixo}}" on-value-changed="_nrmudasimnao" label="Preço mais baixo?">
                                                        <template>
                                                            <paper-icon-item>
                                                                <paper-item-body two-line>
                                                                    <div>[[item.stringValue]]</div>
                                                                </paper-item-body>
                                                            </paper-icon-item>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>
                                                <div class="col-sm-8">
                                                    <paper-tooltip for="descPrecoMaisBaixo" position="bottom" offset="-10" animation-delay="1">
                                                        Preço mais baixo
                                                    </paper-tooltip>
                                                    <such-textarea rows="5" value="{{data.descPrecoMaisBaixo}}" id="descPrecoMaisBaixo" name="descPrecoMaisBaixo" label="Descrição"> </such-textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-12">
                                            <div class="row">
                                                <div class="col-sm-4">
                                                    <vaadin-combo-box items="[[LBoolValues]]" item-value-path="booleanValue" id="propostaEconMaisVantajosa" item-label-path="stringValue" value="{{data.propostaEconMaisVantajosa}}" on-value-changed="_nrmudasimnaoinvertida" label="Proposta economicamente mais vantajosa?">
                                                        <template>
                                                            <paper-icon-item>
                                                                <paper-item-body two-line>
                                                                    <div>[[item.stringValue]]</div>
                                                                </paper-item-body>
                                                            </paper-icon-item>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>
                                                <div class="col-sm-8">
                                                    <paper-tooltip for="descPropostaEconMaisVantajosa" position="top" offset="-1" animation-delay="1">
                                                        Definição de subfactores: Preço; Características técnicas (parâmetros a avaliar e outros que sejam relevantes), etc. Todos os fatores e subfactores têm de ser parametrizados e quantificados. <br />
                                                        Qualidade, em sentido lato, não é parâmetro para critério de adjudicação. Caso seja um requisito devem colocar em observações do procedimento para definição no Caderno de Encargos.
                                                    </paper-tooltip>
                                                    <such-textarea rows="5" value="{{data.descPropostaEconMaisVantajosa}}" id="descPropostaEconMaisVantajosa" name="descPropostaEconMaisVantajosa" label="Descrição"> </such-textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </paper-collapse-item>
                            <paper-collapse-item header="Outros">
                                <!-- Tab Unidade Produtiva - Outros-->
                                <div class="col-xs-12 mb-15">
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-sm-3">
                                                    <vaadin-combo-box value="{{data.propostaVariante}}" label="Proposta Variante?" items="[[LBoolValues]]" item-value-path="booleanValue" id="propostaVariante" item-label-path="stringValue">
                                                        <template>
                                                            <paper-icon-item>
                                                                <paper-item-body two-line>
                                                                    <div>[[item.stringValue]]</div>
                                                                </paper-item-body>
                                                            </paper-icon-item>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>
                                                <div class="col-sm-9">
                                                    <paper-tooltip for="descPropostaVariante" position="bottom" offset="-10" animation-delay="1">
                                                        Não aceitando propostas variantes o concorrente tem que apresentar exatamente o solicitado nas peças do procedimento, sendo um motivo de exclusão toda a proposta apresentada que não cumpra os requisitos. <br />
                                                        O Fornecedor não pode apresentar alternativas.
                                                    </paper-tooltip>
                                                    <such-textarea rows="5" value="{{data.descPropostaVariante}}" id="descPropostaVariante" name="descPropostaVariante" label="Descrição"> </such-textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-sm-4">
                                                    <vaadin-combo-box value="{{data.abertoFechadoAoMercado}}" label="Aberto ou fechado ao mercado" items="[[LAbertoFechado]]" item-value-path="id" id="abertoFechadoAoMercado" item-label-path="value">
                                                        <template>
                                                            <paper-icon-item>
                                                                <paper-item-body two-line>
                                                                    <div>[[item.value]]</div>
                                                                </paper-item-body>
                                                            </paper-icon-item>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>
                                                <div class="col-sm-8">
                                                    <paper-tooltip for="descAbertoFechadoAoMercado" position="bottom" offset="-10" animation-delay="1">
                                                        Aberto ao mercado, todos os concorrentes registados na categoria visualizam o procedimento, contudo, permite em simultâneo um convite direcionado aos fornecedores identificados pelo SUCH a apresentar proposta. <br />
                                                        Fechado ao mercado, apenas os fornecedores convidados a apresentar proposta visualizam o procedimento.

                                                    </paper-tooltip>
                                                    <such-textarea rows="5" value="{{data.descAbertoFechadoAoMercado}}" id="descAbertoFechadoAoMercado" name="descAbertoFechadoAoMercado" label="Descrição"> </such-textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <paper-tooltip for="prazoEntrega" position="top" offset="-1" animation-delay="1">
                                                Caso exista imposição da U.P. para o Cliente.
                                            </paper-tooltip>
                                            <vaadin-text-field value="{{data.prazoEntrega}}" id="prazoEntrega" name="prazoEntrega" label="Prazo Entrega / Realização Serviço" maxlength="30"> </vaadin-text-field>
                                        </div>
                                        <div class="col-sm-6">
                                            <vaadin-text-field value="{{data.locaisEntrega}}" id="locaisEntrega" name="locaisEntrega" label="Locais de Entrega" maxlength="30"> </vaadin-text-field>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <vaadin-text-field rows="5" value="{{data.observacoesAdicionais}}" id="observacoesAdicionais" name="observacoesAdicionais" label="Observações adicionais a fixar no caderno de encargos"> </vaadin-text-field>
                                        </div>
                                        <div class="col-sm-6">
                                            <paper-tooltip for="estimativaPreco" position="top" offset="-1" animation-delay="1">
                                                Obrigatório indicar, mesmo quando não se pretenda estabelecer preço base.
                                            </paper-tooltip>
                                            <vaadin-text-field rows="5" value="{{data.estimativaPreco}}" id="estimativaPreco" name="estimativaPreco" label="Estimativa de preço" maxlength="18" pattern="[0-9]+([\.][0-9]+)?" on-value-changed="_ConvertDecimals"> </vaadin-text-field>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <vaadin-text-field rows="5" value="{{data.fornecedoresSugeridos}}" id="fornecedoresSugeridos" name="fornecedoresSugeridos" label="Fornecedores Sugeridos" maxlength="60"> </vaadin-text-field>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-sm-4">
                                                    <vaadin-combo-box value="{{data.fornecedorExclusivo}}" label="Fornecedor Exclusivo" items="[[LBoolValues]]" item-value-path="booleanValue" id="fornecedorExclusivo" item-label-path="stringValue">
                                                        <template>
                                                            <paper-icon-item>
                                                                <paper-item-body two-line>
                                                                    <div>[[item.stringValue]]</div>
                                                                </paper-item-body>
                                                            </paper-icon-item>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>
                                                <div class="col-sm-8">
                                                    <paper-tooltip for="descFornecedorExclusivo" position="top" offset="-1" animation-delay="1">
                                                        Fundamentação de exclusividade: note-se que este parametro será validado conforme CCP.
                                                    </paper-tooltip>
                                                    <such-textarea rows="5" value="{{data.descFornecedorExclusivo}}" id="descFornecedorExclusivo" name="descFornecedorExclusivo" label="Descrição"> </such-textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <vaadin-text-field value="{{data.interlocutor}}" id="interlocutor" name="interlocutor" label="Interlocutor Preferêncial" maxlength="100"> </vaadin-text-field>
                                        </div>
                                    </div>
                                </div>
                            </paper-collapse-item>
                        </paper-collapse-group>
                    </div>

                    <!-- Tab Imobilizado -->
                    <div class="panel panel-default">
                        <paper-collapse-group>
                            <h2 class="title title--bgyellow">Aquisição de Imobilizado</h2>
                            <p></p>
                            <h2 class="title title--bgblue">A preencher pelos Serviços de Contabilidade - Avaliação Cabimentação Orçamental</h2>
                            <p></p>
                            <paper-collapse-item header="Contabilidade (1)" opened>
                                <div class="col-xs-12">
                                    <div class="col-xs-12">
                                        <div class="row break_clear">
                                            <div class="col-sm-6">
                                                <such-textarea rows="5" value="{{data.comentarioImobContabilidade}}" id="comentarioImobContabilidade" name="comentarioImobContabilidade" label="Comentário"> </such-textarea>
                                            </div>
                                        </div>
                                        <div class="row break_clear">
                                            <div class="col-sm-6">
                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <label part="label" class="grey" id="vaadin-text-field-label-30">O responsável dos serviços de contabilidade</label>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <vaadin-text-field value="{{data.responsavelImobContabilidade}}" id="responsavelImobContabilidade" name="responsavelImobContabilidade" label="" disabled="true"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-sm-8">
                                                        <vaadin-text-field value="{{data.nomeResponsavelImobContabilidade}}" id="nomeResponsavelImobContabilidade" name="nomeResponsavelImobContabilidade" label="" disabled="true"> </vaadin-text-field>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-3">
                                                <vaadin-text-field value="{{data.dataImobContabilidade}}" id="dataImobContabilidade" name="dataImobContabilidade" label="Data" disabled="true"> </vaadin-text-field>
                                            </div>
                                            <div class="col-sm-3">
                                                <vaadin-combo-box value="{{data.imobilizadoSimNao}}" id="ImobilizadoSimNao" label="Cabimento Orçamental?" items="[[LBoolValues]]" item-value-path="booleanValue" item-label-path="stringValue">
                                                    <template>
                                                        <paper-icon-item>
                                                            <paper-item-body two-line>
                                                                <div>[[item.stringValue]]</div>
                                                            </paper-item-body>
                                                        </paper-icon-item>
                                                    </template>
                                                </vaadin-combo-box>
                                            </div>
                                        </div>

                                        <div class="clearfix"></div>
                                        <div class="clearfix"></div>
                                        <div class="col-lg-6">
                                            <such-dropdown-menu class="subMenu" id="actionButtonContabilidade1" on-value-changed="_mnuAccao1_ItemSelected" title=" Acções " items="[[ _mnuAccao1_MenuItems ]]"></such-dropdown-menu>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>
                            <paper-collapse-item header="Área (2)">
                                <div class="col-xs-12">
                                    <div class="col-xs-12">
                                        <div class="row break_clear">
                                            <div class="col-sm-6">
                                                <such-textarea rows="5" value="{{data.comentarioImobArea}}" id="comentarioImobArea" name="comentarioImobArea" label="Comentário"> </such-textarea>
                                            </div>
                                        </div>
                                        <div class="row break_clear">
                                            <div class="col-sm-6">
                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <label part="label" class="grey" id="vaadin-text-field-label-30">O responsável da área pela adjudicação</label>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <vaadin-text-field value="{{data.responsavelImobArea}}" id="responsavelImobArea" name="responsavelImobArea" label="" disabled="true"> </vaadin-text-field>
                                                    </div>

                                                    <div class="col-sm-8">
                                                        <vaadin-text-field value="{{data.nomeResponsavelImobArea}}" id="nomeResponsavelImobArea" name="nomeResponsavelImobArea" label="" disabled="true"> </vaadin-text-field>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-3">
                                                <vaadin-text-field value="{{data.DataImobArea}}" id="DataImobArea" name="DataImobArea" label="Data" disabled="true"> </vaadin-text-field>
                                            </div>
                                            <div class="col-sm-3" id="idDivAccao2">
                                                <br />
                                                <such-dropdown-menu class="subMenu" id="actionButtonArea2" disabled="true" on-value-changed="_mnuAccao2_ItemSelected" title=" Acções " items="[[ _mnuAccao2_MenuItems ]]"></such-dropdown-menu>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>
                        </paper-collapse-group>
                    </div>

                    <!-- Tab Fundamentos Decisão-->
                    <div class="panel panel-default">
                        <paper-collapse-group>
                            <paper-collapse-item header="A Preencher pelas Compras (4)" opened>
                                <div class="col-xs-12">
                                    <div class="break_clear row">
                                        <div class="col-sm-12">
                                            <div class="row">
                                                <div class="col-sm-3">
                                                    <vaadin-text-field value="{{data.criterioEscolhaProcedimento}}" id="criterioEscolhaProcedimento" name="criterioEscolhaProcedimento" label="Escolha do Procedimento" maxlength="20"></vaadin-text-field>
                                                </div>
                                                <div class="col-sm-9">
                                                    <paper-tooltip for="descEscolhaProcedimento" position="bottom" offset="-10" animation-delay="1">
                                                        Em função do valor de acordo com os critérios formais, de acordo com o CCP.
                                                    </paper-tooltip>
                                                    <such-textarea rows="5" value="{{data.descEscolhaProcedimento}}" id="descEscolhaProcedimento" name="descEscolhaProcedimento" label="Descrição"> </such-textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="break_clear row">
                                        <div class="col-sm-3 mb-15">
                                            <vaadin-combo-box value="{{data.juri}}" label="Juri" items="[[LBoolValues]]" item-value-path="booleanValue" id="juri" item-label-path="stringValue">
                                                <template>
                                                    <paper-icon-item>
                                                        <paper-item-body two-line>
                                                            <div>[[item.stringValue]]</div>
                                                        </paper-item-body>
                                                    </paper-icon-item>
                                                </template>
                                            </vaadin-combo-box>
                                        </div>
                                        <div class="col-xs-12">
                                            <vaadin-grid id="gridElementosJuri_4" aria-label="gridElementosJuri_4" items="{{data.elementosJuri}}" class="grid" style="height:170px;">
                                                <vaadin-grid-column width="20%">
                                                    <template class="header">
                                                        Utilizador
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field type="text" value="{{ item.utilizador }}"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="20%">
                                                    <template class="header">
                                                        Nome
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field type="text" value="{{ item.nomeEmpregado }}"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="8%">
                                                    <template class="header">
                                                        <center>
                                                            Presidente
                                                        </center>
                                                    </template>
                                                    <template>
                                                        <center>
                                                            <vaadin-checkbox checked="{{item.presidente}}"></vaadin-checkbox>
                                                        </center>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="8%">
                                                    <template class="header">
                                                        <center>
                                                            Vogal
                                                        </center>
                                                    </template>
                                                    <template>
                                                        <center>
                                                            <vaadin-checkbox checked="{{item.vogal}}"></vaadin-checkbox>
                                                        </center>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="6%">
                                                    <template class="header">
                                                        <center>
                                                            Suplente
                                                        </center>
                                                    </template>
                                                    <template>
                                                        <center>
                                                            <vaadin-checkbox checked="{{item.suplente}}"></vaadin-checkbox>
                                                        </center>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="8%">
                                                    <template class="header">
                                                        <center>
                                                            Enviar Email?
                                                        </center>
                                                    </template>
                                                    <template>
                                                        <center>
                                                            <vaadin-checkbox checked="{{item.enviarEmail}}"></vaadin-checkbox>
                                                        </center>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="20%">
                                                    <template class="header">
                                                        Endereço Email
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field type="text" value="{{ item.email }}"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="10%">
                                                    <template class="header">
                                                    </template>
                                                    <template>
                                                        <paper-button raised class="btnRemove" on-tap="_deleteElementoJuri"><i class="fa fa-trash-o" aria-hidden="true"></i>&nbsp; Eliminar</paper-button>
                                                    </template>
                                                </vaadin-grid-column>
                                            </vaadin-grid>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <vaadin-text-field value="{{data.nomeProcesso}}" id="nomeProcesso" name="nomeProcesso" label="Nome do Processo" maxlength="60"> </vaadin-text-field>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-combo-box value="{{data.objetoDoContrato}}" label="Objecto do Contrato" items="[[CBObjectoContrato]]" item-value-path="id" id="objetoDoContrato" item-label-path="value">
                                                <template>
                                                    <paper-icon-item>
                                                        <paper-item-body two-line>
                                                            <div>[[item.value]]</div>
                                                        </paper-item-body>
                                                    </paper-icon-item>
                                                </template>
                                            </vaadin-combo-box>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-text-field value="{{data.condicoesDePagamento}}" id="condicoesDePagamento" name="condicoesDePagamento" label="Condições Pagamento" maxlength="30"> </vaadin-text-field>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-3">
                                            <vaadin-combo-box value="{{data.gestorProcesso}}" label="Gestor Processo" items="[[CBGestorProcesso]]" item-value-path="id" id="gestorProcesso" item-label-path="value">
                                                <template>
                                                    <paper-icon-item>
                                                        <paper-item-body two-line>
                                                            <div>[[item.value]]</div>
                                                        </paper-item-body>
                                                    </paper-icon-item>
                                                </template>
                                            </vaadin-combo-box>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <such-textarea rows="5" value="{{data.comentarioFundamentoCompras}}" id="comentarioFundamentoCompras" name="comentarioFundamentoCompras" label="Comentário"> </such-textarea>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <label part="label" class="grey vaadin-text-field-label-30" id="lblresponsavelFundamentoCompras">O Responsável pelo envio para área</label>
                                                </div>
                                                <div class="col-sm-4">
                                                    <vaadin-text-field value="{{data.responsavelFundamentoCompras}}" id="responsavelFundamentoCompras" name="responsavelFundamentoCompras" disabled="true"></vaadin-text-field>
                                                </div>

                                                <div class="col-sm-8">
                                                    <vaadin-text-field value="{{data.nomeResponsavelFundamentoCompras}}" id="nomeResponsavelFundamentoCompras" name="nomeResponsavelFundamentoCompras" disabled="true"> </vaadin-text-field>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-text-field value="{{data.fundamentoComprasDataChecklist}}" id="fundamentoComprasDataChecklist" name="fundamentoComprasDataChecklist" label="Data" disabled="true"> </vaadin-text-field>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-text-field value="{{data.emailDestinoCA}}" id="emailDestinoCA" name="emailDestinoCA" label="Email destino CA" disabled="true"> </vaadin-text-field>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <such-dropdown-menu class="subMenu" id="actionButtonCompras" on-value-changed="_mnuAccao4_ItemSelected" title=" Acções " items="[[ _mnuAccao4_MenuItems ]]"></such-dropdown-menu>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>
                            <paper-collapse-item header="A Preencher pelos Serviços Financeiros (5)">
                                <div class="col-xs-12">
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <such-textarea rows="5" value="{{data.comentarioFundamentoFinanceiros}}" id="comentarioFundamentoFinanceiros" name="comentarioFundamentoFinanceiros" label="Comentário"> </such-textarea>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <label part="label" class="grey" id="vaadin-text-field-label-30">O Responsável dos serviços financeiros</label>
                                                </div>
                                                <div class="col-sm-4">
                                                    <vaadin-text-field value="{{data.responsavelFundamentoFinanceiros}}" id="responsavelFundamentoFinanceiros" name="responsavelFundamentoFinanceiros" disabled="true"></vaadin-text-field>
                                                </div>

                                                <div class="col-sm-8">
                                                    <vaadin-text-field value="{{data.nomeResponsavelFundamentoFinanceiros}}" id="nomeResponsavelFundamentoFinanceiros" name="nomeResponsavelFundamentoFinanceiros" disabled="true"> </vaadin-text-field>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-text-field value="{{data.fundamentoFinDataChecklist}}" id="fundamentoFinDataChecklist" name="fundamentoFinDataChecklist" label="Data" disabled="true"> </vaadin-text-field>
                                        </div>
                                        <div class="col-sm-3">
                                            <br />
                                            <such-dropdown-menu class="subMenu" id="actionButtonFinanceiros" on-value-changed="_mnuAccao5_ItemSelected" title=" Acções " items="[[ _mnuAccao5_MenuItems ]]"></such-dropdown-menu>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>
                            <paper-collapse-item header="A Preencher pela Área - Pedido de Adjudicação (16)">
                                <div class="col-xs-12">
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <such-textarea rows="5" value="{{data.comentarioAdjudicacao16}}" id="comentarioAdjudicacao16" name="comentarioAdjudicacao16" label="Proposta de decisão"> </such-textarea>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-3">
                                            <vaadin-checkbox checked="{{data.autorizacaoAdjudicacao}}" disabled="true">Autorizacao Adjudicação</vaadin-checkbox>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-checkbox checked="{{data.naoAdjudicacaoEncerramento}}" disabled="true">Não Adjudicação e Encerramento</vaadin-checkbox>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-checkbox checked="{{data.naoAdjudicacaoSuspensao}}" disabled="true">Não Adjudicação e Suspensão</vaadin-checkbox>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <label part="label" class="grey" id="vaadin-text-field-label-30">O Responsável pela área pelo envio para CA</label>
                                                </div>
                                                <div class="col-sm-4">
                                                    <vaadin-text-field value="{{data.responsavelAdjudicacao16}}" id="responsavelAdjudicacao16" name="responsavelAdjudicacao16" disabled="true"></vaadin-text-field>
                                                </div>
                                                <div class="col-sm-8">
                                                    <vaadin-text-field value="{{data.nomeResponsavelAdjudicacao16}}" id="nomeResponsavelAdjudicacao16" name="nomeResponsavelAdjudicacao16" disabled="true"> </vaadin-text-field>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-text-field value="{{data.dataAdjudicacao16}}" id="dataAdjudicacao16" name="dataAdjudicacao16" label="Data" disabled="true"> </vaadin-text-field>
                                        </div>
                                        <div class="col-sm-3">
                                            <br />
                                            <paper-button raised id="btnSubmeterProcesso_16" class="btn--confirm pull-right" on-tap="_submeterProcesso_16"><i class="fa fa-paper-plane" aria-hidden="true"></i>&nbsp; Submeter o Processo</paper-button>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>
                        </paper-collapse-group>
                    </div>

                    <!-- Tab CA-->
                    <div class="panel panel-default">
                        <paper-collapse-group>
                            <paper-collapse-item header="Autorização de Adjudicação (17)" opened>
                                <div class="col-xs-12">
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <such-textarea rows="5" value="{{data.comentarioCA17}}" id="comentarioCA17" name="comentarioCA17" label="Comentário"> </such-textarea>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <label part="label" class="grey" id="vaadin-text-field-label-30">Pelo CA</label>
                                                </div>
                                                <div class="col-sm-4">
                                                    <vaadin-text-field value="{{data.responsavelCA17}}" id="responsavelCA17" name="responsavelCA17" disabled="true"></vaadin-text-field>
                                                </div>

                                                <div class="col-sm-8">
                                                    <vaadin-text-field value="{{data.nomeResponsavelCA17}}" id="nomeResponsavelCA17" name="nomeResponsavelCA17" disabled="true"> </vaadin-text-field>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-date-picker value="{{data.dataAberturaCA17}}" id="dataAberturaCA17" name="dataAberturaCA17" label="Data" disabled="true"></vaadin-date-picker>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-date-picker value="{{data.caDataRatificacaoAdjudic}}" id="caDataRatificacaoAdjudic" name="caDataRatificacaoAdjudic" label="Data Ratificação" disabled="true"></vaadin-date-picker>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-12">
                                            <vaadin-checkbox checked="{{data.ratificarCaAdjudicacao}}" id="ratificarCaAdjudicacao">Ratificar CA</vaadin-checkbox>
                                        </div>
                                    </div>
                                    <div class="row break_clear">
                                        <div class="col-sm-12">
                                            <paper-tooltip for="btnAutorizacaoAdjudicacaoSuspend" position="top" offset="-1" animation-delay="1">
                                                Devolver à área que fez o pedido (passo 16)
                                            </paper-tooltip>
                                            <paper-button raised id="btnAutorizacaoAdjudicacaoConfirm" class="btn--confirm" on-tap="_confirmAutorizacaoAdjudicacao"><i class="fa fa-check" aria-hidden="true"></i>&nbsp; Autorizar</paper-button>
                                            <paper-button raised id="btnAutorizacaoAdjudicacaoDevolver" class="btn--sendtoevaluate" on-tap="_suspendAutorizacaoAdjudicacao">Devolver Processo</paper-button>
                                            <paper-button raised id="btnAutorizacaoAdjudicacaoReject" class="btn--remove" on-tap="_rejectAutorizacaoAdjudicacao"><i class="fa fa-times" aria-hidden="true"></i>&nbsp; Não Autorizar</paper-button>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>
                        </paper-collapse-group>
                    </div>

                    <!-- Tab Linhas Encomendas-->
                    <div class="panel panel-default">
                        <paper-collapse-group>
                            <paper-collapse-item header="Linhas Encomendas" opened>
                                <div class="panel-body">
                                    <div class="row break_clear">
                                        <div class="col-sm-12">
                                            <div class="row">
                                                <div class="col-sm-2">
                                                    <vaadin-combo-box items="[[CBTipo]]" item-value-path="id" item-label-path="value" required id="linhaTipo" label="Tipo">
                                                        <template>
                                                            <paper-icon-item>
                                                                <paper-item-body two-line>
                                                                    <div>[[item.value]]</div>
                                                                </paper-item-body>
                                                            </paper-icon-item>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>
                                                <div class="col-sm-2">
                                                    <vaadin-combo-box items="[[CBLocations]]" id="_CBLocations" item-value-path="id" item-label-path="value" required value="{{_LocalCode}}" label="Cód. Localização" disabled="{{ !_permissions.update }}">
                                                        <template>
                                                            <table width="200px">
                                                                <tr>
                                                                    <td width="40%">[[item.id]]</td>
                                                                    <td width="60%"> <b>[[item.value]]</b></td>
                                                                </tr>
                                                            </table>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>
                                                <div class="col-sm-2">
                                                    <such-selectbox id="_CBItems" value="{{_CBItems}}" label="Cód. Produto"
                                                                    items="[[CBItems]]"
                                                                    text-path="code"
                                                                    value-path="code"
                                                                    required
                                                                    fields='[{"field":"code", "name":"Cód. Produto"}, {"field":"name", "name":"Descrição"}, {"field":"measureUnit", "name":"Unidade de Medida"}, {"field":"itemCategoryCode", "name":"Cód. Categoria"}, {"field":"productGroupCode", "name":"Cód. Grupo"}]'
                                                                    disabled="{{ !_permissions.update }}">
                                                    </such-selectbox>
                                                </div>
                                                <div class="col-sm-6">
                                                    <vaadin-text-field type="text" id="_DescricaoProduto" required value="{{ item.descricao }}" label="Descrição" maxlength="100"></vaadin-text-field>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-2">
                                                    <vaadin-combo-box items="[[LCBMeasuresUnit]]" id="_UnitMeasureCode" name="_UnitMeasureCode" item-value-path="id" item-label-path="id" value="{{_UnitMeasureCode}}" label="Código Unid. Medida" disabled="{{ !_permissions.update }}">
                                                        <template>
                                                            <table width="200px">
                                                                <tr>
                                                                    <td width="40%">[[item.id]]</td>
                                                                    <td width="60%"> <b>[[item.value]]</b></td>
                                                                </tr>
                                                            </table>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>
                                                <div class="col-sm-2">
                                                    <vaadin-text-field id="_linhaQuantidadeRequerer" label="Qtd. a Requerer" maxlength="18" pattern="[0-9]*" style="text-align:right;"></vaadin-text-field>
                                                </div>
                                                <div class="col-sm-2">
                                                    <vaadin-text-field id="_linhaCustoUnitario" label="Custo Unitário" maxlength="18" on-value-changed="_ConvertDecimals" pattern="[0-9]+([\.][0-9]+)?" style="text-align:right;">
                                                        <div slot="suffix">€</div>
                                                    </vaadin-text-field>
                                                </div>
                                                <div class="col-sm-1">
                                                    <br />
                                                    <paper-button class="btnSave" id="btnCriarLinhaProdutosServicos" raised on-tap="_createLinhaProdutosServicos"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Tab Unidade Produtiva - Linhas Produtos Servicos-->
                                    <div class="col-xs-12 mb-15">
                                        <div class="break_clear">
                                            <!-- NR 20180226 -->
                                            <vaadin-grid id="tabLinhaProdutos" aria-label="Tabela Linhas Produtos Serviços" items="{{ data.linhasPEncomendaProcedimentosCcp }}" class="editGrid">
                                                <vaadin-grid-column width="50px" hidden>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="noProcedimento" style="text-align:center;">Nº Procedimento</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="noProcedimento" />
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field name="tabLinhaProdutosNoProcedimento" id="tabLinhaProdutosNoProcedimento" value="{{item.noProcedimento}}" maxlength="200" disabled="true" style="text-align:right;"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="50px" hidden>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="noLinha" style="text-align:center;">Nº Linha</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="noLinha" />
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field name="tabLinhaProdutosNoLinha" id="tabLinhaProdutosNoLinha" value="{{item.noLinha}}" maxlength="200" disabled="true" style="text-align:right;"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="60px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="tipoText" style="text-align:center;">Tipo</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="tipoText" />
                                                    </template>
                                                    <template>
                                                        <vaadin-combo-box id="tabTipo" items="[[CBTipo]]" item-value-path="id" item-label-path="value" value="{{item.tipo}}" disabled="true" style="text-align:left;">
                                                            <template>
                                                                <paper-icon-item>
                                                                    <paper-item-body two-line>
                                                                        <div>[[item.value]]</div>
                                                                    </paper-item-body>
                                                                </paper-icon-item>
                                                            </template>
                                                        </vaadin-combo-box>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="200px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="codLocalizacaoText" style="text-align:center;">Cód. Localização</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="codLocalizacaoText" />
                                                    </template>
                                                    <template>
                                                        <vaadin-combo-box id="tabCodigoLocalizacao" items="[[CBLocations]]" item-value-path="id" item-label-path="value" value="{{item.codLocalizacao}}" disabled="true" style="text-align:left;">
                                                            <template>
                                                                <paper-icon-item>
                                                                    <paper-item-body two-line>
                                                                        <div>[[item.value]]</div>
                                                                    </paper-item-body>
                                                                </paper-icon-item>
                                                            </template>
                                                        </vaadin-combo-box>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="60px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="codigo" style="text-align:center;">Cód. Produto</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="codigo" />
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field name="tabCodProduto" id="tabCodProduto" value="{{item.codigo}}" disabled="true" style="text-align:left;"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="200px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="descricao" style="text-align:center;">Descrição</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="descricao" />
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field name="tabDescricaoProduto" id="tabDescricaoProduto" value="{{item.descricao}}" disabled="true" style="text-align:left;"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="80px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="quantARequerer" style="text-align:center;">Qtd. a Requerer</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="quantARequerer" />
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field name="tabQuantidade" value="{{item.quantARequerer}}" disabled="true" maxlength="18" pattern="[0-9]*" style="text-align:right;"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="80px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="custoUnitario" style="text-align:center;">Custo Unitário</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="custoUnitario" />
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field id="GridtabAjudaCustoUnitario" name="tabAjudaCustoUnitario" value="{{item.custoUnitario}}" disabled="true" style="text-align:right;">
                                                            <div slot="suffix">€</div>
                                                        </vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="80px">
                                                    <template class="header">
                                                    </template>
                                                    <template>
                                                        <paper-button class="btnRemove" id="btnDeleteLinhaProdutoServico" raised on-tap="_deleteLinha" disabled="{{ !_permissions.delete }}">Eliminar</paper-button>
                                                    </template>
                                                </vaadin-grid-column>
                                            </vaadin-grid>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>


                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>

                            <paper-collapse-item header="Ligação a Requisições">
                                <div class="panel-body">
                                    <div class="row break_clear">
                                        <div class="col-sm-12">
                                            <div class="row">
                                                <div class="col-sm-2">
                                                    <such-selectbox id="_CB_REQ" value="{{_CB_REQ}}" label="Nº Requisição"
                                                                    items="[[CB_REQ]]"
                                                                    text-path="requisitionNo"
                                                                    value-path="requisitionNo"
                                                                    required
                                                                    fields='[{"field":"requisitionNo", "name":"Nº Requisição"}, {"field":"comments", "name":"Observações"}]'
                                                                    disabled="{{ !_permissions.update }}">
                                                    </such-selectbox>
                                                </div>
                                                <div class="col-sm-8">
                                                    <vaadin-text-field type="text" id="_DescricaoRequisicao" label="Descrição" maxlength="100"></vaadin-text-field>
                                                </div>
                                                <div class="col-sm-2">
                                                    <br />
                                                    <paper-button class="btnSave" id="btnCriarLigacaoRequisicao" raised on-tap="_createLigacaoRequisicao"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Linhas com as Requisições -->
                                    <div class="col-xs-12 mb-15">
                                        <div class="break_clear">
                                            <vaadin-grid id="tabLigacoesRequisicoes" aria-label="Tabela Ligações a Requisições" items="{{ data.listaReq_Show }}" class="editGrid">
                                                <vaadin-grid-column width="60px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="requisitionNo" style="text-align:center;">Nº Requisição</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="requisitionNo" />
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field name="requisitionNo" id="requisitionNo" value="{{item.requisitionNo}}" disabled="true" style="text-align:left;"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="60px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="comments" style="text-align:center;">Observações</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="comments" />
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field name="comments" id="comments" value="{{item.comments}}" disabled="true" style="text-align:left;"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="60px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="projectNo" style="text-align:center;">Nº Projecto</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="projectNo" />
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field name="projectNo" id="projectNo" value="{{item.projectNo}}" disabled="true" style="text-align:left;"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                            </vaadin-grid>
                                        </div>
                                    </div>
                                </div>

                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>
                        </paper-collapse-group>
                    </div>

                    <!--Tab Workflow-->
                    <div class="panel panel-default">
                        <paper-collapse-group>
                            <paper-collapse-item header="Fluxo de Trabalho" opened>
                                <div class="col-xs-12">
                                    <vaadin-grid id="gridfluxoTrabalhoListaControlo" aria-label="gridWorkflow" items="{{data.fluxoTrabalhoListaControlo_Show}}" class="grid">
                                        <vaadin-grid-column width="6%" resizable>
                                            <template class="header">
                                                <div class="Branco">
                                                    <center>
                                                        WorkFlow
                                                    </center>
                                                </div>
                                            </template>
                                            <template>
                                                <center>
                                                    <div class$="{{item.nr_Workflow}}"></div>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="6%" resizable>
                                            <template class="header">
                                                <div class="Branco">
                                                    <center>
                                                        Estado
                                                    </center>
                                                </div>
                                            </template>
                                            <template>
                                                <center>
                                                    <vaadin-text-field type="text" value="{{ item.estado }}" readonly></vaadin-text-field>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="8%" resizable>
                                            <template class="header">
                                                <div class="Branco">
                                                    <center>
                                                        Data
                                                    </center>
                                                </div>
                                            </template>
                                            <template>
                                                <center>
                                                    <vaadin-text-field type="text" value="{{ item.data_Show }}" readonly></vaadin-text-field>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="6%" resizable>
                                            <template class="header">
                                                <div class="Branco">
                                                    <center>
                                                        Hora
                                                    </center>
                                                </div>
                                            </template>
                                            <template>
                                                <center>
                                                    <vaadin-text-field type="text" value="{{ item.hora_Show }}" readonly></vaadin-text-field>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="8%" resizable>
                                            <template class="header">
                                                <div class="Branco">
                                                    <center>
                                                        Estado Seguinte
                                                    </center>
                                                </div>
                                            </template>
                                            <template>
                                                <center>
                                                    <vaadin-text-field type="text" value="{{ item.estadoSeguinte }}" readonly></vaadin-text-field>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="20%" resizable>
                                            <template class="header">
                                                <div class="Branco">
                                                    Comentário
                                                </div>
                                            </template>
                                            <template>
                                                <vaadin-text-field type="text" value="{{ item.comentario }}" readonly></vaadin-text-field>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="20%" resizable>
                                            <template class="header">
                                                <div class="Branco">
                                                    Resposta
                                                </div>
                                            </template>
                                            <template>
                                                <vaadin-text-field type="text" value="{{ item.resposta }}" readonly></vaadin-text-field>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="10%" resizable>
                                            <template class="header">
                                                <div class="Branco">
                                                    Utilizador
                                                </div>
                                            </template>
                                            <template>
                                                <vaadin-text-field type="text" value="{{ item.user }}" readonly></vaadin-text-field>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="15%" resizable>
                                            <template class="header">
                                                <div class="Branco">
                                                    Nome Utilizador
                                                </div>
                                            </template>
                                            <template>
                                                <vaadin-text-field type="text" value="{{ item.nomeUser }}" readonly></vaadin-text-field>
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>
                                </div>
                            </paper-collapse-item>
                            <paper-collapse-item header="Email's Enviados">
                                <div class="col-xs-12">
                                    <vaadin-grid id="gridEmailsProcedimentosCcp" aria-label="gridEmailsProcedimentosCcp" items="{{data.emailsProcedimentosCcp}}" class="grid">
                                        <vaadin-grid-column width="8%" resizable>
                                            <template class="header">
                                                <div class="Branco">
                                                    <center>
                                                        Data Email
                                                    </center>
                                                </div>
                                            </template>
                                            <template>
                                                <center>
                                                    <vaadin-text-field type="text" value="{{ item.dataEmail }}" readonly></vaadin-text-field>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="8%" resizable>
                                            <template class="header">
                                                <div class="Branco">
                                                    <center>
                                                        Hora Email
                                                    </center>
                                                </div>
                                            </template>
                                            <template>
                                                <center>
                                                    <vaadin-text-field type="text" value="{{ item.horaEmail }}" readonly></vaadin-text-field>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="20%" resizable>
                                            <template class="header">
                                                <div class="Branco">
                                                    Assunto
                                                </div>
                                            </template>
                                            <template>
                                                <vaadin-text-field type="text" value="{{ item.assunto }}" readonly></vaadin-text-field>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="24%" resizable>
                                            <template class="header">
                                                <div class="Branco">
                                                    Texto Email
                                                </div>
                                            </template>
                                            <template>
                                                <vaadin-text-field type="text" value="{{ item.textoEmail }}" readonly></vaadin-text-field>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="20%" resizable>
                                            <template class="header">
                                                <div class="Branco">
                                                    Email Destinatário
                                                </div>
                                            </template>
                                            <template>
                                                <vaadin-text-field type="text" value="{{ item.emailDestinatario }}" readonly></vaadin-text-field>
                                            </template>
                                        </vaadin-grid-column>
                                        <vaadin-grid-column width="20%" resizable>
                                            <template class="header">
                                                <div class="Branco">
                                                    User Email
                                                </div>
                                            </template>
                                            <template>
                                                <vaadin-text-field type="text" value="{{ item.utilizadorEmail }}" readonly></vaadin-text-field>
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>
                                </div>
                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>
                            <paper-collapse-item header="Alteração de Estado">
                                <div class="col-xs-12">
                                    <div class="break_clear row">
                                        <div class="col-sm-3">
                                            <vaadin-combo-box items="[[LProcedimentoState]]" id="id_Estado_actual" item-value-path="id" item-label-path="value" required value="{{data.estado}}" label="Estado Actual" disabled="true">
                                                <template>
                                                    <paper-icon-item>
                                                        <paper-item-body two-line>
                                                            <div>[[item.value]]</div>
                                                        </paper-item-body>
                                                    </paper-icon-item>
                                                </template>
                                            </vaadin-combo-box>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-combo-box items="[[LProcedimentoState]]" id="id_Novo_Estado" item-value-path="id" item-label-path="value" required value="{{data.novoEstado}}" label="Novo Estado">
                                                <template>
                                                    <paper-icon-item>
                                                        <paper-item-body two-line>
                                                            <div>[[item.value]]</div>
                                                        </paper-item-body>
                                                    </paper-icon-item>
                                                </template>
                                            </vaadin-combo-box>
                                        </div>
                                        <div class="col-sm-3">
                                            <vaadin-text-field type="text" id="gDescNovoEstado" name="gDescNovoEstado" value="{{data.novoEstadoComentario}}" label="Comentário"> </vaadin-text-field>
                                        </div>
                                        <div class="col-sm-3">
                                            <br />
                                            <paper-button raised id="btnMudarEstado" class="btn--confirm pull-right" on-tap="_mudarEstado"><i class="fa fa-paper-plane" aria-hidden="true"></i>&nbsp; Confirmar</paper-button>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>
                        </paper-collapse-group>
                    </div>

                    <!--Tab Notas-->
                    <div class="panel panel-default">
                        <paper-collapse-group>
                            <paper-collapse-item header="Notas" opened>
                                <div class="panel-body">
                                    <div class="row break_clear">
                                        <div class="col-sm-12">
                                            <div class="row">
                                                <div class="col-sm-10">
                                                    <such-textarea rows="2" id="_NovaNota" name="_NovaNota" label="Nota"> </such-textarea>
                                                </div>
                                                <div class="col-sm-2">
                                                    <br />
                                                    <paper-button class="btnSave" id="btnCriarNota" raised on-tap="_createNota"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Inserir</paper-button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 mb-15">
                                        <div class="break_clear">
                                            <vaadin-grid id="tabNotas" aria-label="Tabela Notas" items="{{ data.notasProcedimentosCcp }}" class="editGrid">
                                                <vaadin-grid-column width="50px" hidden>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="noProcedimento" style="text-align:center;">Nº Procedimento</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="noProcedimento" />
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field name="tabNotasNoProcedimento" id="tabNotasNoProcedimento" value="{{item.noProcedimento}}" maxlength="200" disabled="true" style="text-align:right;"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="50px" hidden>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="noLinha" style="text-align:center;">Nº Linha</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="noLinha" />
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field name="tabNotasNoLinha" id="tabNotasNoLinha" value="{{item.noLinha}}" maxlength="200" disabled="true" style="text-align:right;"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="50px" hidden>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="utilizador" style="text-align:left;">Utilizador</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="utilizador" />
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field name="tabNotasutilizador" id="tabNotasutilizador" value="{{item.utilizador}}" maxlength="200" disabled="true" style="text-align:right;"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="15%" flex-grow="0" resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="dataHora_Show" style="text-align:center;">Data</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="dataHora_Show" />
                                                    </template>
                                                    <template>
                                                        <vaadin-text-field name="tabNotasdataHora_Show" id="tabNotasdataHora_Show" value="{{item.dataHora_Show}}" readonly style="text-align:center;"></vaadin-text-field>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="70%" flex-grow="0" resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="nota" style="text-align:left;">Nota</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="nota" />
                                                    </template>
                                                    <template>
                                                        <!--<vaadin-text-field name="tabNotasnota" id="tabNotasnota" value="{{item.nota}}" disabled="true" style="text-align:left;"></vaadin-text-field>-->
                                                        <such-textarea rows="2" id="tabNotasnota" name="tabNotasnota" value="{{item.nota}}" readonly style="text-align:left;"> </such-textarea>
                                                    </template>
                                                </vaadin-grid-column>
                                                <vaadin-grid-column width="15%" flex-grow="0">
                                                    <template class="header">
                                                    </template>
                                                    <template>
                                                        <paper-button class="btnRemove" id="btnDeleteNota" raised on-tap="_deleteNota" disabled="{{ !_permissions.delete }}">Eliminar</paper-button>
                                                    </template>
                                                </vaadin-grid-column>
                                            </vaadin-grid>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="mb-15"></div>
                            </paper-collapse-item>
                        </paper-collapse-group>
                    </div>
                </iron-pages>

                <!-- Save and Create Buttons -->
                <div class="marginSpace">
                    <template is="dom-if" if="{{ _isCreate }}">
                        <paper-button raised id="btnCreate" class="btnSave" on-tap="_create"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                    </template>
                    <template is="dom-if" if="{{ !_isCreate }}">
                        <paper-button raised id="btnUpdate" class="btnSave" on-tap="_update"><i class="fa fa-floppy-o" aria-hidden="true"></i>&nbsp; Guardar</paper-button>
                        <paper-button raised id="btnCancel" class="btnRemove" on-tap="_delete"><i class="fa fa-undo" aria-hidden="true"></i>&nbsp; Eliminar</paper-button>
                    </template>
                </div>
            </div>
        </div>
        <paper-toast id="ToastMessage" duration="4000" horizontalAlign="right"></paper-toast>
        <paper-toast id="ToastMessageSuccess" duration="4000" horizontalAlign="right" class="toastSuccess">&nbsp;<i class="fa fa-check fa-lg" aria-hidden="true"></i></paper-toast>
        <paper-toast id="ToastMessageError" duration="4000" horizontalAlign="right" class="toastError">&nbsp;<i class="fa fa-exclamation-triangle" aria-hidden="true"></i></paper-toast>
    </template>

    <script>
        document.addEventListener('WebComponentsReady', function () {
            Polymer({
                is: 'x-procedimentodetails',
                properties: {
                    _mnuAccao1_MenuItems: {
                        type: Array,
                        value: [{ value: 1, description: "Confirmar" }],
                    },
                    _mnuAccao2_MenuItems: {
                        type: Array,
                        value: [{ value: 1, description: "Pedir Autorização" }, { value: 2, description: "Devolver Contabilidade" }, { value: 3, description: "Fechar Processo -> (19)" }],
                    },
                    _mnuAccao4_MenuItems: {
                        type: Array,
                        value: [{ value: 1, description: "Enviar p/ Financeiros (5)" }, { value: 2, description: "Enviar p/ Área (16)" }, { value: 3, description: "Devolver à Área (0)" }],
                    },
                    _mnuAccao5_MenuItems: {
                        type: Array,
                        value: [{ value: 1, description: "Devolver a Compras (4)" }],
                    },

                    _procedimentoid: {
                        type: String,
                        notify: true,
                        value: ""
                    },
                    _procedimentotypeid: {
                        type: Number,
                        value: 0
                    },
                    _userName: {
                        type: String,
                        notify: true,
                        value: ""
                    },
                    selected: {
                        type: Number,
                        value: 0
                    },
                    unidadeProdutivaSelected: {
                        type: Number,
                        value: 0
                    },
                    _isCreate: {
                        type: Boolean,
                        value: false
                    },
                    chkPresidente: {
                        type: Boolean,
                        notify: true,
                        value: false
                    },
                    chkVogal: {
                        type: Boolean,
                        notify: true,
                        value: false
                    },
                    chkSuplente: {
                        type: Boolean,
                        notify: true,
                        value: false
                    },
                    chkSendMail: {
                        type: Boolean,
                        notify: true,
                        value: false
                    },
                    isJuriElementAction: {
                        type: Boolean,
                        value: false
                    },
                    userAllowed: {
                        type: Boolean,
                        value: true
                    },
                    __isElementArea: {
                        type: Boolean,
                        value: false
                    },
                    __isElementPreArea: {
                        type: Boolean,
                        value: false
                    },
                    __isElementPreArea0: {
                        type: Boolean,
                        value: false
                    },
                    __isElementCompras: {
                        type: Boolean,
                        value: false
                    },
                    __isElementJuri: {
                        type: Boolean,
                        value: false
                    },
                    __isElementContabilidade: {
                        type: Boolean,
                        value: false
                    },
                    __isElementJuridico: {
                        type: Boolean,
                        value: false
                    },
                    __isElementCA: {
                        type: Boolean,
                        value: false
                    },
                    __isGestorProcesso: {
                        type: Boolean,
                        value: false
                    },
                    __isSecretariadoCA: {
                        type: Boolean,
                        value: false
                    },
                    __isFechoProcesso: {
                        type: Boolean,
                        value: false
                    },
                    __comentarioArea: {
                        type: String,
                        notify: true,
                        value: ""
                    },
                    _CBItems: {
                        observer: '_setProductData'
                    },
                    _CB_REQ: {
                        observer: '_setREQData'
                    },
                },
                _testFunction: function () {

                },
                ready: function () {
                    this.$.ajax_userpermissions.body = this.data;
                    this.$.ajax_userpermissions.generateRequest();

                    //NR 20180223
                    this.$.precoMaisBaixo.addEventListener('value-changed', function () {
                        //if (this.$.precoMaisBaixo.value == true) {
                        //    this.$.propostaEconMaisVantajosa.value = false;
                        //}
                        //else {
                        //    this.$.propostaEconMaisVantajosa.value = true;
                        //}
                    });;

                    this.$.propostaEconMaisVantajosa.addEventListener('value-changed', function () {
                        //if (this.$.propostaEconMaisVantajosa.value == true) {
                        //    this.$.precoMaisBaixo.value = false;
                        //}
                        //else {
                        //    this.$.precoMaisBaixo.value = true;
                        //}
                    });;
                },
                _openToast: function (message) {
                    this.$.ToastMessage.text = message;
                    this.$.ToastMessage.open();
                },
                _showMessage: function (message) {
                    this.$.ToastMessageSuccess.text = message;
                    this.$.ToastMessageSuccess.open();
                },
                _showErrorMessage: function (message) {
                    this.$.ToastMessageError.text = message;
                    this.$.ToastMessageError.open();
                },

                //NR 20180223
                _ConvertDecimals: function (e) {
                    e.target.value = e.target.value.replace(",", ".");
                },

                _setProductData: function (e) {
                    var item = this.CBItems.find(x => x.code == e);
                    if (item != null) {
                        this.$._DescricaoProduto.value = item.name;
                        this.$._UnitMeasureCode.value = item.measureUnit;
                    }
                },

                _setREQData: function (e) {
                    var item = this.CB_REQ.find(x => x.requisitionNo == e);
                    if (item != null) {
                        this.$._DescricaoRequisicao.value = item.comments;
                    }
                },

                _confirmAndExecuteActionToast: function (_message, _ajaxRequest) {
                    bootbox.confirm({
                        message: _message,
                        buttons: {
                            confirm: {
                                label: 'Sim',
                                className: 'btn-success'
                            },
                            cancel: {
                                label: 'Não',
                                className: 'btn-danger'
                            }
                        },
                        callback: function (result) {
                            if (result) {
                                _ajaxRequest.generateRequest();
                            }
                        }
                    });
                },

                //NR 20180321
                _confirmAndReturnUpdatedAnswerToast: function (_message1, _message2, _message3, _ajaxRequest) {
                    bootbox.confirm({
                        message: _message1,
                        buttons: {
                            confirm: {
                                label: 'Sim',
                                className: 'btn-success'
                            },
                            cancel: {
                                label: 'Não',
                                className: 'btn-danger'
                            }
                        },
                        callback: function (result) {
                            if (result) {
                                new bootbox.confirm({
                                    message: _message2,
                                    buttons: {
                                        confirm: {
                                            label: 'Sim',
                                            className: 'btn-success'
                                        },
                                        cancel: {
                                            label: 'Não',
                                            className: 'btn-danger'
                                        }
                                    },
                                    callback: function (result) {
                                        if (result) {
                                            this.data.ratificarCaAdjudicacao = true;

                                            bootbox.confirm({
                                                message: _message3,
                                                buttons: {
                                                    confirm: {
                                                        label: 'Sim',
                                                        className: 'btn-success'
                                                    },
                                                    cancel: {
                                                        label: 'Não',
                                                        className: 'btn-danger'
                                                    }
                                                },
                                                callback: function (result) {
                                                    if (result) {
                                                        this.data.ratificarCaAdjudicacao = true;
                                                    }
                                                }
                                            });
                                        }
                                    }
                                });
                                _ajaxRequest.generateRequest();
                            }
                        }
                    });
                },

                _confirmAndExecuteActionToast_NR: function (_message, _ajaxRequest) {
                    var _this = this;

                    bootbox.confirm({
                        message: _message,
                        buttons: {
                            confirm: {
                                label: 'Sim',
                                className: 'btn-success'
                            },
                            cancel: {
                                label: 'Não',
                                className: 'btn-danger'
                            }
                        },
                        callback: function (result) {
                            if (result) {
                                debugger;
                                _this.data.ratificarCaAdjudicacao = true
                            }
                            _ajaxRequest.generateRequest();
                        }
                    });
                },

                _validateData: function () {
                    if (false) {
                        this._openToast(validate);
                        return false;
                    }
                    return true;
                },

                //CRUDS
                _create: function () {
                    this.data.tipoProcedimento = this._procedimentotypeid;

                    if (this._validateData()) {
                        this._executeRequest("/ProcedimentosCcps/CreateProcedimento", this.data)
                    }
                },

                _update: function () {
                    if (this._onUpdateValidateElementoJuri()) {
                        this.$.ajax_update_procedimento.body = JSON.stringify(this.data);
                        this.$.ajax_update_procedimento.generateRequest();
                    }
                },

                _delete: function () {
                    var ajax_request = this.$.ajax_delete_procedimento;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Tem a certeza que pretende remover o Procedimento " + this.data.no + "?",
                        ajax_request
                    );
                },

                _updateProcedimentoResponse: function (e) {
                    if (this.ProcedimentoUpdated.eReasonCode != 0) {
                        this._openToast(this.ProcedimentoUpdated.eMessage);
                    } else {
                        this._openToast("Procedimento actualizado com sucesso.")
                    }
                },

                //Responses Processors
                _responseProcessor: function (data) {
                    var self = this;

                    if (data.detail.status === 200) {
                        if (data.detail.url.indexOf("GetProcedimento") !== -1) {
                            if (self.data.No == "") {
                                self._isCreate = true;
                                return;
                            }

                            self._setFieldsEditability(self.data);

                        } else if (data.detail.url.indexOf("Create") !== -1) {
                            self._createResponseProcessor();
                        } else if (data.detail.url.indexOf("Update") !== -1) {
                            if (!this.isJuriElementAction)
                                self._openToast("Procedimento atualizado com sucesso.")
                        }
                    } else {
                        self._openToast("Ocorreu um erro ao criar o Procedimento.")
                    }
                },

                _createResponseProcessor: function () {
                    if (this.data.eReasonCode == 1) {
                        this._isCreate = false;
                        this._openToast("Procedimento criado com sucesso.");
                    } else {
                        this._openToast(this.data.eMessage);
                    }
                },

                _responseValidatorProcessor: function (data) {
                    var self = this;
                },

                _responseDeleteProcessor: function (data) {
                    var self = this;
                    if (data.detail.status === 200) {
                        if (this.deletedData.eReasonCode != 0) {
                            this._openToast("Não é possivel eliminar o Procedimento.");
                        } else {
                            this._openToast(this.deletedData.eMessage);
                            setTimeout(
                                function () {
                                    window.location.replace("/");
                                }, 2500);
                        }
                    }
                },

                _userPermissionsResponseProcessor: function () {
                    if (this.UserAccesses == null) {
                        this._openToast("Não está autorizado a aceder a esta opção");
                        this.userAllowed = false;

                        setTimeout(
                            function () {
                            }, 3000);
                    }

                    if (this.userAllowed) {
                        this.$.page_databound_ajax.body = JSON.stringify({ "No": this._procedimentoid });
                        this.$.page_databound_ajax.generateRequest();

                        // set user permissions
                        for (var i in this.UserAccesses) {
                            switch (this.UserAccesses[i]) {
                                case "IsElementArea": this.__isElementArea = true;
                                    break;
                                case "IsElementPreArea0": this.__isElementPreArea0 = true;
                                    break;
                                case "IsElementPreArea": this.__isElementPreArea = true;
                                    break;
                                case "IsElementCompras": this.__isElementCompras = true;
                                    break;
                                case "IsElementJuri": this.__isElementJuri = true;
                                    break;
                                case "IsElementContabilidade": this.__isElementContabilidade = true;
                                    break;
                                case "IsElementJuridico": this.__isElementJuridico = true;
                                    break;
                                case "IsElementCA": this.__isElementCA = true;
                                    break;
                                case "IsGestorProcesso": this.__isGestorProcesso = true;
                                    break;
                                case "IsSecretariadoCA": this.__isSecretariadoCA = true;
                                    break;
                                case "IsFechoProcesso": this.__isFechoProcesso = true;
                                    break;
                            }
                        };

                        if (this._procedimentoid == "") {
                            this._isCreate = true;
                        }
                    }
                    else {
                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    }
                },

                // Create Elemento Juri
                _onUpdateValidateElementoJuri: function () {
                    for (var i in this.data.elementosJuri) {
                        if (!this.data.elementosJuri[i].presidente && !this.data.elementosJuri[i].vogal && !this.data.elementosJuri[i].suplente) {
                            this._openToast("Não escolheu qual a responsabilidade do utilizador: " + this.data.elementosJuri[i].utilizador + ".");
                            return false;
                        }

                        if ((this.data.elementosJuri[i].presidente && (this.data.elementosJuri[i].vogal || this.data.elementosJuri[i].suplente)) ||
                            (this.data.elementosJuri[i].vogal && (this.data.elementosJuri[i].presidente || this.data.elementosJuri[i].suplente)) ||
                            (this.data.elementosJuri[i].suplente && (this.data.elementosJuri[i].presidente || this.data.elementosJuri[i].vogal))) {

                            this._openToast("Apenas pode escolher uma das opções: Presidente, Vogal ou Suplente: " + this.data.elementosJuri[i].utilizador + ".");
                            return false;
                        }

                        if (this.data.elementosJuri[i].presidente) {
                            for (var j in this.data.elementosJuri) {
                                if ((this.data.elementosJuri[i].utilizador != this.data.elementosJuri[j].utilizador) && this.data.elementosJuri[j].presidente) {
                                    this._openToast("Já existe um presidente: " + this.data.elementosJuri[j].utilizador);
                                    return false;
                                }
                            }
                        }
                    }

                    return true;
                },
                _validateElementoJuriData: function () {
                    if (this._userName == "") {
                        this._openToast("Não escolheu um utilizador!");
                        return false;
                    } else if (!this.chkPresidente && !this.chkVogal && !this.chkSuplente) {
                        this._openToast("Não escolheu qual a responsabilidade do utilizador!");
                        return false;
                    } else if ((this.chkPresidente && (this.chkVogal || this.chkSuplente)) ||
                        (this.chkVogal && (this.chkPresidente || this.chkSuplente)) ||
                        (this.chkSuplente && (this.chkPresidente || this.chkVogal))) {

                        this._openToast("Apenas pode escolher uma das opções: Presidente, Vogal ou Suplente!");
                        return false;
                    } else
                        return true;
                },

                //NR 20180316
                _createElementoJuri: function () {
                    this.isJuriElementAction = true;
                    if (this._validateElementoJuriData()) {

                        this.$.ajax_createelementojuri.body = JSON.stringify({
                            noProcedimento: this.data.no,
                            utilizador: this._userName,
                            presidente: this.chkPresidente,
                            vogal: this.chkVogal,
                            suplente: this.chkSuplente,
                            enviarEmail: this.chkSendMail
                        });


                        this.$.ajax_update_procedimento.body = JSON.stringify(this.data);

                        var sav = this.$.ajax_update_procedimento.generateRequest();
                        var lin = this.$.ajax_createelementojuri.generateRequest();

                        Promise.all([sav.completes, lin.completes]).then(function (requests) {
                        })

                        this.$.gridElementosJuri.clearCache();
                    }
                },
                _createElementoJuriResponse: function (e) {
                    if (this.ElementoCreated.eReasonCode == 0) {
                        this._openToast('Elemento Júri adicionado com sucesso');
                        this.$.page_databound_ajax.generateRequest();

                        this.$.gridElementosJuri.clearCache();
                        this.$.gridElementosJuri_4.clearCache();

                        this.$.users.value = "";
                        this.chkPresidente = false;
                        this.chkVogal = false;
                        this.chkSuplente = false;
                        this.chkSendMail = false;
                    } else {
                        if (this.ElementoCreated.eReasonCode == 3 || this.ElementoCreated.eReasonCode == 4) {
                            this._openToast(this.ElementoCreated.eMessage);
                        }
                        else {
                            this._openToast('Não foi possível criar o Elemento do Juri');
                        }
                    }
                },

                _deleteElementoJuri: function (e) {
                    this.isJuriElementAction = true;
                    var index = this.data.elementosJuri.indexOf(e.model.item);
                    this.data.elementosJuri.splice(index, 1);
                    this.$.ajax_deleteelementojuri.body = JSON.stringify({
                        noProcedimento: this.data.no,
                        noLinha: e.model.item.noLinha
                    });
                    this.$.ajax_deleteelementojuri.generateRequest();
                    this.$.gridElementosJuri.clearCache();
                    this.$.gridElementosJuri_4.clearCache();

                },
                _deleteElementoJuriResponse: function (e) {
                    if (this.ElementoDeleted) {
                        this._openToast('Elemento Juri eliminado com sucesso');
                        this.$.gridElementosJuri.clearCache();
                        this.$.gridElementosJuri_4.clearCache();
                    } else {
                        this._openToast('Não foi possível eliminar o Elemento do Juri!')
                    }
                },

                // Action of submitting Procedimento
                _onSubmitValidateProcedimento: function () {
                    if (this.data.informacaoTecnica == "" || this.data.informacaoTecnica == null) {
                        this._openToast("A Informação Técnica tem que estar preenchida!")
                        return false;
                    }

                    if (this.data.fundamentacaoAquisicao == "" || this.data.fundamentacaoAquisicao == null) {
                        this._openToast("A Fundamentação da Aquisição tem que estar preenchida!")
                        return false;
                    }

                    if (this.data.precoBase == null) {
                        this._openToast("Preço Base: tem que indicar um valor (Sim/Não)!")
                        return false;
                    } else if (this.data.precoBase && this.valorPrecoBase == 0) {
                        this._openToast("Preço Base = Sim: tem que indicar um valor!")
                        return false;
                    }

                    if (this.data.estimativaPreco == null || this.data.estimativaPreco == 0) {
                        this._openToast("Obrigatório definir uma Estimativa de Preço, mesmo que não seja definido Preço Base!");
                        return false;
                    }

                    if (this.data.negociacao == null) {
                        this._openToast("Negociação: tem que indicar um valor (Sim/Não)!")
                        return false;
                    }

                    if (this.data.prazo == "" || this.data.prazo == null) {
                        this._openToast("O Prazo para Prestação do Serviço, tem que ser indicado!!")
                        return false;
                    }

                    if (this.data.precoMaisBaixo == null) {
                        this._openToast("Preço Baixo: tem que indicar um valor (Sim/Não)!")
                        return false;
                    }

                    if (this.data.propostaEconMaisVantajosa == null) {
                        this._openToast("Proposta Economicamente mais Vantajosa: tem que indicar um valor (Sim/Não)!")
                        return false;
                    }

                    if (this.data.precoMaisBaixo && this.data.propostaEconMaisVantajosa) {
                        this._openToast("Preço Mais Baixo ou Proposta Economicamente mais vantajosa: apenas pode escolher uma das opções!");
                        return false;
                    }

                    if (this.data.propostaVariante == null) {
                        this._openToast("Proposta Variante: tem que indicar um valor (Sim/Não)!")
                        return false;
                    }

                    if (this.fornecedorExclusivo && (this.descFornecedorExclusivo == null || this.descFornecedorExclusivo == "")) {
                        this._openToast("Obrigatória a fundamentação da exclusividade do fornecedor!");
                        return false;
                    }

                    if (this.data.codigoRegiao == "" || this.data.codigoRegiao == null) {
                        this._openToast("O Código da Região tem que estar preenchido!")
                        return false;
                    }

                    if (this.data.codigoAreaFuncional == "" || this.data.codigoAreaFuncional == null) {
                        this._openToast("O Código da Àrea Funcional tem que estar preenchido!")
                        return false;
                    }

                    // zpgm.21112017_1900

                    return true;
                },
                _submitProcedimento: function () {
                    if (this.data.estado != 0) {
                        this._openToast("Não permitido neste estado!");
                        return;
                    }

                    if (this._onSubmitValidateProcedimento()) {
                        var ajax_request = this.$.ajax_submitprocedimento;
                        ajax_request.body = this.data;

                        this._confirmAndExecuteActionToast(
                            "Confirma a sumissão do Procedimento " + this.data.no,
                            ajax_request
                        );
                    }
                },
                _submitProcedimentoResponse: function (e) {
                    if (this.ProcedimentoSubmitted.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " submetido com sucesso!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(ProcedimentoSubmitted.eMessage);
                    }
                },

                // Contabilidade Confirm action
                _confirmImobilizadoContab: function () {
                    if (this.data.estado != 1) {
                        this._openToast('Neste estado não pode submeter o workflow!');
                        return;
                    }

                    var ajax_request = this.$.ajax_confirmImobContabilidade;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_confirmImobContabilidade.body = JSON.stringify(this.data);
                },
                _confirmImobilizadoContabResponse: function (e) {
                    if (this.ProcedimentoConfirmed.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " confirmado!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.ProcedimentoConfirmed.eMessage);
                    }
                },

                //NR 20180307
                _pedirAutorizacao: function () {
                    var ajax_request = this.$.ajax_pedirAutorizacao;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma o envio do processo para autorização do CA?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_pedirAutorizacao.body = JSON.stringify(this.data);
                },
                _pedirAutorizacaoResponse: function (e) {
                    if (this.PedirAutorizacaoConfirmed.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " enviado!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.PedirAutorizacaoConfirmed.eMessage);
                    }
                },

                _devolverContabilidade: function () {
                    var ajax_request = this.$.ajax_devolverContabilidade;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma a Devolução à Contabilidade?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_devolverContabilidade.body = JSON.stringify(this.data);
                },
                _devolverContabilidadeResponse: function (e) {
                    if (this.DevolverContabilidadeConfirmed.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " devolvido!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.DevolverContabilidadeConfirmed.eMessage);
                    }
                },

                _fecharProcesso: function () {
                    var ajax_request = this.$.ajax_fecharProcesso;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma o Fecho do Processo?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_fecharProcesso.body = JSON.stringify(this.data);
                },
                _fecharProcessoResponse: function (e) {
                    if (this.FecharProcessoConfirmed.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " fechado!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.FecharProcessoConfirmed.eMessage);
                    }
                },

                //NR 20180223
                _nrmudasimnao: function (e) {
                    if (this.$.precoMaisBaixo.value == true) {
                        this.$.propostaEconMaisVantajosa.value = false;
                    } else if (this.$.precoMaisBaixo.value == false) {
                        this.$.propostaEconMaisVantajosa.value = true;
                    } else {
                        this.$.propostaEconMaisVantajosa.value = this.$.propostaEconMaisVantajosa.value;
                    }
                },
                _nrmudasimnaoinvertida: function (e) {
                    if (this.$.propostaEconMaisVantajosa.value == true) {
                        this.$.precoMaisBaixo.value = false;
                    } else if (this.$.propostaEconMaisVantajosa.value == false) {
                        this.$.precoMaisBaixo.value = true;
                    } else {
                        this.$.precoMaisBaixo.value = this.$.precoMaisBaixo.value;
                    }
                },
                _createLinhaProdutosServicos: function () {
                    this.$.page_createaLinhaProdutoServico_ajax.body = JSON.stringify({
                        nºProcedimento: this.$.no.value,
                        tipo: this.$.linhaTipo.value,
                        código: this.$._CBItems.value,
                        códLocalização: this.$._CBLocations.value,
                        descrição: this.$._DescricaoProduto.value,
                        códUnidadeMedida: this.$._UnitMeasureCode.value,
                        custoUnitário: this.$._linhaCustoUnitario.value,
                        quantARequerer: this.$._linhaQuantidadeRequerer.value,
                        códigoRegião: this.$.codigoRegiao.value,
                        códigoÁreaFuncional: this.$.codigoAreaFuncional.value,
                        códigoCentroResponsabilidade: this.$.codigoCentroResponsabilidade.value
                    });
                    //this.$.page_createaLinhaProdutoServico_ajax.generateRequest();

                    this.$.ajax_update_procedimento.body = JSON.stringify(this.data);

                    var sav = this.$.ajax_update_procedimento.generateRequest();
                    var lin = this.$.page_createaLinhaProdutoServico_ajax.generateRequest();

                    Promise.all([sav.completes, lin.completes]).then(function (requests) {
                        //var savReq = requests[0].result;
                        //var linReq = requests[1].result;
                    })

                    this.$.tabLinhaProdutos.clearCache();
                },
                _createLinhaProdutoServicoResponse: function (e) {
                    if (this.LinhaProdutoServicoCreated) {
                        this.$.page_databound_ajax.generateRequest();
                        this._showMessage('Adicionada Linha com sucesso.');

                        this.$.tabLinhaProdutos.clearCache();

                        this.$.linhaTipo.value = "";
                        this.$._CBItems.value = "";
                        this.$._CBLocations.value = "";
                        this.$._DescricaoProduto.value = "";
                        this.$._UnitMeasureCode.value = "";
                        this.$._linhaCustoUnitario.value = "";
                        this.$._linhaQuantidadeRequerer.value = "";
                    }
                    else {
                        this._showErrorMessage('Ocorreu um erro ao adicionar a linha.');
                    }
                },


                _createLigacaoRequisicao: function () {
                    debugger
                    this.$.page_createLigacaoRequisicao_ajax.body = JSON.stringify({
                        procedureCcpNo: this.$.no.value,
                        requisitionNo: this.$._CB_REQ.value
                    });
                    
                    this.$.ajax_update_procedimento.body = JSON.stringify(this.data);

                    var sav = this.$.ajax_update_procedimento.generateRequest();
                    var lin = this.$.page_createLigacaoRequisicao_ajax.generateRequest();

                    Promise.all([sav.completes, lin.completes]).then(function (requests) {
                    })

                    this.$.tabLigacoesRequisicoes.clearCache();
                },
                _createLigacaoRequisicaoResponse: function (e) {
                    if (this.LigacaoRequisicaoCreated) {
                        this.$.page_databound_ajax.generateRequest();
                        this._showMessage('Adicionada ligação à Requisição com sucesso.');

                        this.$.tabLigacoesRequisicoes.clearCache();

                        this.$._CB_REQ.value = "";
                        this.$._DescricaoRequisicao.value = "";
                    }
                    else {
                        this._showErrorMessage('Ocorreu um erro ao adicionar a ligação à Requisição.');
                    }
                },

                

                _deleteLinha: function (e) {
                    var index = this.data.linhasPEncomendaProcedimentosCcp.indexOf(e.model.item);
                    this.data.linhasPEncomendaProcedimentosCcp.splice(index, 1);
                    this.$.page_deleteLinhaProdutoServico_ajax.body = JSON.stringify({ nºProcedimento: e.model.item.noProcedimento, nºLinha: e.model.item.noLinha });
                    this.$.page_deleteLinhaProdutoServico_ajax.generateRequest();
                    this.$.tabLinhaProdutos.clearCache();

                },
                _deleteLinhaProdutoServicoResponse: function (e) {
                    if (this.LinhaProdutoServicoDeleted) {
                        this._openToast('Linha eliminada com sucesso');
                        this.$.tabLinhaProdutos.clearCache();
                    } else {
                        this._openToast('Não foi possível eliminar a Linha!')
                    }
                },

                //NR 20180301
                _enviarParaFinanceiros: function () {
                    if (this.data.estado < 4 || this.estado > 6) {
                        this._openToast('Neste Estado, não pode Enviar à Área Financeira!');
                        return;
                    }

                    if (this.data.tipo = 0) {
                        this._openToast('Antes de prosseguir, tem que definir o tipo de procedimento!');
                        return;
                    }

                    if (this.data.nomeProcesso = "") {
                        this._openToast('Antes de prosseguir, tem que definir o Nome do procedimento!');
                        return;
                    }

                    var ajax_request = this.$.ajax_enviarParaFinanceiros;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma o Envio à Área Financeira?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_enviarParaFinanceiros.body = JSON.stringify(this.data);
                },
                _enviarParaFinanceirosResponse: function (e) {
                    if (this.EnviarParaFinanceiros.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " enviado para Financeira!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.EnviarParaFinanceiros.eMessage);
                    }
                },

                //NR 20180301
                _enviarParaJuridicos: function () {
                    if (this.data.estado < 4 || this.estado > 6) {
                        this._openToast('Neste Estado, não pode Enviar à Área Jurídica!');
                        return;
                    }

                    if (this.data.tipo = 0) {
                        this._openToast('Antes de prosseguir, tem que definir o tipo de procedimento!');
                        return;
                    }

                    if (this.data.nomeProcesso = "") {
                        this._openToast('Antes de prosseguir, tem que definir o Nome do procedimento!');
                        return;
                    }

                    var ajax_request = this.$.ajax_enviarParaJuridicos;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma o Envio à Área Juridica?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_enviarParaJuridicos.body = JSON.stringify(this.data);
                },
                _enviarParaJuridicosResponse: function (e) {
                    if (this.EnviarParaJuridicos.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " enviado para Juridicos!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.EnviarParaJuridicos.eMessage);
                    }
                },

                //NR 20180302
                _enviarParaArea: function () {
                    if (this.data.estado != 4) {
                        this._openToast('Neste Estado, não pode Enviar à Área!');
                        return;
                    }
                    
                    if (this.data.nomeProcesso = "") {
                        this._openToast('Antes de prosseguir, tem que definir o Nome do procedimento!');
                        return;
                    }

                    var ajax_request = this.$.ajax_enviarParaArea;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma o Envio à Área?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_enviarParaArea.body = JSON.stringify(this.data);
                },
                _enviarParaAreaResponse: function (e) {
                    if (this.EnviarParaArea.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " enviado para Área!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.EnviarParaArea.eMessage);
                    }
                },

                _submeterProcesso_16: function () {
                    var ajax_request = this.$.ajax_submeterProcesso_16;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma a Submissão do Processo?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_submeterProcesso_16.body = JSON.stringify(this.data);
                },
                _submeterProcesso_16Response: function (e) {
                    if (this.SubmeterProcesso_16.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " submetido!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.SubmeterProcesso_16.eMessage);
                    }
                },

                //NR 20180320
                _rejectAutorizacaoAdjudicacao: function () {
                    var ajax_request = this.$.ajax_rejectAutorizacaoAdjudicacao;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma a Rejeição do Processo?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_rejectAutorizacaoAdjudicacao.body = JSON.stringify(this.data);
                },
                _rejectAutorizacaoAdjudicacaoResponse: function (e) {
                    if (this.RejectAutorizacaoAdjudicacao.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " rejeitado com sucesso!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.RejectAutorizacaoAdjudicacao.eMessage);
                    }
                },

                //NR 20180321
                _confirmAutorizacaoAdjudicacao: function () {
                    var ajax_request = this.$.ajax_confirmAutorizacaoAdjudicacao;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma a Autorização de Adjudicação?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_confirmAutorizacaoAdjudicacao.body = JSON.stringify(this.data);
                },
                _confirmAutorizacaoAdjudicacaoResponse: function (e) {
                    if (this.ConfirmAutorizacaoAdjudicacao.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " autorizado!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.ConfirmAutorizacaoAdjudicacao.eMessage);
                    }
                },

                _suspendAutorizacaoAdjudicacao: function () {
                    var ajax_request = this.$.ajax_suspendAutorizacaoAdjudicacao;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma a devolução do processo?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_suspendAutorizacaoAdjudicacao.body = JSON.stringify(this.data);
                },
                _suspendAutorizacaoAdjudicacaoResponse: function (e) {
                    if (this.SuspendAutorizacaoAdjudicacao.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " devolvido com sucesso!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.SuspendAutorizacaoAdjudicacao.eMessage);
                    }
                },

                //NR 20180328
                _mudarEstado: function (e) {
                    var ajax_request = this.$.ajax_mudarEstado;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma a alteração de estado?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_mudarEstado.body = JSON.stringify(this.data);
                },
                _mudarEstadoResponse: function (e) {
                    if (this.MudarEstado.eReasonCode == 0) {
                        this._openToast("Confirmada a alteração de estado do Procedimento " + this.data.no + " !");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.MudarEstado.eMessage);
                    }
                },

                //NR 20180329
                _createNota: function () {
                    this.$.page_createNota_ajax.body = JSON.stringify({
                        nºProcedimento: this.$.no.value,
                        nota: this.$._NovaNota.value
                    });
                    //this.$.page_createNota_ajax.generateRequest();

                    this.$.ajax_update_procedimento.body = JSON.stringify(this.data);

                    var sav = this.$.ajax_update_procedimento.generateRequest();
                    var lin = this.$.page_createNota_ajax.generateRequest();

                    Promise.all([sav.completes, lin.completes]).then(function (requests) {
                        //var savReq = requests[0].result;
                        //var linReq = requests[1].result;
                    })

                    this.$.tabNotas.clearCache();
                },
                _createNotaResponse: function (e) {
                    if (this.CreateNota) {
                        this.$.page_databound_ajax.generateRequest();
                        this._showMessage('Adicionada Nota com sucesso.');

                        this.$.tabNotas.clearCache();

                        this.$._NovaNota.value = "";
                    }
                    else {
                        this._showErrorMessage('Ocorreu um erro ao adicionar a Nota.');
                    }
                },
                _deleteNota: function (e) {
                    var index = this.data.notasProcedimentosCcp.indexOf(e.model.item);
                    this.data.notasProcedimentosCcp.splice(index, 1);
                    this.$.page_deleteNota_ajax.body = JSON.stringify({ nºProcedimento: e.model.item.noProcedimento, nºLinha: e.model.item.noLinha });
                    this.$.page_deleteNota_ajax.generateRequest();
                    this.$.tabNotas.clearCache();

                },
                _deleteNotaResponse: function (e) {
                    if (this.DeleteNota) {
                        this._openToast('Nota eliminada com sucesso');
                        this.$.tabNotas.clearCache();
                    } else {
                        this._openToast('Não foi possível eliminar a Nota!')
                    }
                },

                //NR 20180308
                _enviarParaCAAbertura: function () {
                    var ajax_request = this.$.ajax_enviarParaCAAbertura;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma o Envio para CA Abertura?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_enviarParaCAAbertura.body = JSON.stringify(this.data);
                },
                _enviarParaCAAberturaResponse: function (e) {
                    if (this.EnviarParaCAAbertura.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " enviado para CA Abertura!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.EnviarParaCAAbertura.eMessage);
                    }
                },
                _enviarParaCAAdjudicacao: function () {
                    var ajax_request = this.$.ajax_enviarParaCAAdjudicacao;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma o envio a CA para autorização de abertura?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_enviarParaCAAdjudicacao.body = JSON.stringify(this.data);
                },
                _enviarParaCAAdjudicacaoResponse: function (e) {
                    if (this.EnviarParaCAAdjudicacao.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " enviado para CA Abertura!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.EnviarParaCAAdjudicacao.eMessage);
                    }
                },
                _enviarParaArea_5: function () {
                    var ajax_request = this.$.ajax_enviarParaArea_5;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma o Envio à Área?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_enviarParaArea_5.body = JSON.stringify(this.data);
                },
                _enviarParaArea_5Response: function (e) {
                    if (this.EnviarParaArea_5.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " enviado para Área!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.EnviarParaArea_5.eMessage);
                    }
                },

                //NR 20180309
                _devolverACompras_5: function () {
                    var ajax_request = this.$.ajax_devolverACompras_5;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma a devolução a Compras?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_devolverACompras_5.body = JSON.stringify(this.data);
                },
                _devolverACompras_5Response: function (e) {
                    if (this.DevolverACompras_5.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " devolvido!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.DevolverACompras_5.eMessage);
                    }
                },

                //NR 20180306
                _devolverParaArea: function () {
                    var ajax_request = this.$.ajax_devolverParaArea;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma a Devolução do Processo à Área?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_devolverParaArea.body = JSON.stringify(this.data);
                },
                _devolverParaAreaResponse: function (e) {
                    if (this.DevolverParaArea.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " devolvido à Área!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.EnviarParaArea.eMessage);
                    }
                },

                // Imobilizado return to area
                _imobReturnToArea: function () {
                    var ajax_request = this.$.ajax_imobReturnToArea;
                    ajax_request.body = JSON.stringify({ "No": this.data.no });

                    this._confirmAndExecuteActionToast(
                        "Confirma a Devolução do Processo?", ajax_request
                    );

                    //NR 20180301 - Se não fizer isto, o this.data.nomeProcesso não leva o valor que têm!!!
                    this.data.nomeProcesso = this.$.nomeProcesso.value;

                    this.$.ajax_imobReturnToArea.body = JSON.stringify(this.data);
                },
                _imobReturnToAreaResponse: function (e) {
                    if (this.ProcedimentoReturnedToArea.eReasonCode == 0) {
                        this._openToast("Procedimento " + this.data.no + " devolvido!");
                        setTimeout(
                            function () {
                            }, 3000);

                        if (this._procedimentotypeid == 1)
                            window.location.replace("/ProcedimentosCcps/PedidoAquisicao/");
                        else
                            window.location.replace("/ProcedimentosCcps/PedidoSimplificado/");
                    } else {
                        this._openToast(this.EnviarParaArea.eMessage);
                    }
                },
                _sendEmail_ToJuriAprovalResponse: function (e) {
                    if (this.SendEmail_ToJuriAproval.eReasonCode == 0) {
                        this._openToast("Email Enviado");
                        setTimeout(
                            function () {
                            }, 3000);
                    } else {
                        this._openToast(this.SendEmail_ToJuriAproval.eMessage);
                    }
                },

                //NR 20180313
                _mnuAccao1_ItemSelected: function (e) {
                    if (this.$.id_Estado.value != 1) {
                        this._openToast("Opções desactivadas para o estado actual!")
                        return;
                    }

                    var item = e.detail.value;

                    if (item == null)
                        return;

                    this._newStatus = item.value;

                    switch (this._newStatus) {
                        case 1:
                            this._confirmImobilizadoContab();
                            break;
                    }
                },
                _mnuAccao2_ItemSelected: function (e) {
                    if (this.$.id_Estado.value != 2) {
                        this._openToast("Opções desactivadas para o estado actual!")
                        return;
                    }

                    var item = e.detail.value;

                    if (item == null)
                        return;

                    this._newStatus = item.value;

                    switch (this._newStatus) {
                        case 1:
                            this._pedirAutorizacao();
                            break;
                        case 2:
                            this._devolverContabilidade();
                            break;
                        case 3:
                            this._fecharProcesso();
                            break;
                    }
                },
                _mnuAccao4_ItemSelected: function (e) {
                    if (this.$.id_Estado.value != 4) {
                        this._openToast("Opções desactivadas para o estado actual!")
                        return;
                    }

                    var item = e.detail.value;

                    if (item == null)
                        return;

                    this._newStatus = item.value;

                    switch (this._newStatus) {
                        case 1:
                            this._enviarParaFinanceiros();
                            break;
                        case 2:
                            this._enviarParaArea();
                            break;
                        case 3:
                            this._devolverParaArea();
                            break;
                    }
                },
                _mnuAccao5_ItemSelected: function (e) {
                    if (this.$.id_Estado.value != 5) {
                        this._openToast("Opções desactivadas para o estado actual!")
                        return;
                    }

                    var item = e.detail.value;

                    if (item == null)
                        return;

                    this._newStatus = item.value;

                    switch (this._newStatus) {
                        case 1:
                            this._devolverACompras_5();
                            break;
                    }
                },

                _setFieldsEditability(data) {
                    var _self = this;
                    //if (data.estado == 0) {
                    //    $(_self.$.actionButton1).addClass('disabled');
                    //}
                    // Disable controls
                    // 1. Procedimento status != 0.b
                    if (data.estado != 0) {
                        $(_self.$.gridElementosJuri).addClass('disabled');
                        $(_self.$.gridElementosJuri_4).addClass('disabled');
                        $(_self.$.buttonCriarElementoJuri).addClass('disabled');
                        $(_self.$.submitProcedimento).addClass('disabled');
                        //$(_self.$.gridElementosJuri).addClass('disabled');
                        //$(_self.$.buttonCriarElementoJuri).addClass('disabled');

                        //NR 20180228
                        //$(_self.$.btnCriarLinhaProdutosServicos).addClass('disabled');
                        //$(_self.$.btnDeleteLinhaProdutoServico).addClass('disabled');

                        //$(_self.$.tabLinhaProdutos).addClass('disabled');
                    }

                    _self.$.informacaoTecnica.disabled = (data.estado != 0);
                    _self.$.fundamentacaoAquisicao.disabled = (data.estado != 0);
                    _self.$.precoBase.disabled = (data.estado != 0);
                    _self.$.valorPrecoBase.disabled = (data.estado != 0);
                    _self.$.negociacao.disabled = (data.estado != 0);
                    _self.$.prazo.disabled = (data.estado != 0);
                    _self.$.users.disabled = (data.estado != 0);
                    _self.$._chkPresidente.disabled = (data.estado != 0);
                    _self.$._chkVogal.disabled = (data.estado != 0);
                    _self.$._chkSuplente.disabled = (data.estado != 0);
                    _self.$._chkSendMail.disabled = (data.estado != 0);
                    _self.$.comentarioAreaApresentar.disabled = (data.estado != 0);
                    _self.$.precoMaisBaixo.disabled = (data.estado != 0);
                    _self.$.descPrecoMaisBaixo.disabled = (data.estado != 0);
                    _self.$.propostaEconMaisVantajosa.disabled = (data.estado != 0);
                    _self.$.descPropostaEconMaisVantajosa.disabled = (data.estado != 0);
                    _self.$.propostaVariante.disabled = (data.estado != 0);
                    _self.$.descPropostaVariante.disabled = (data.estado != 0);
                    _self.$.abertoFechadoAoMercado.disabled = (data.estado != 0);
                    _self.$.descAbertoFechadoAoMercado.disabled = (data.estado != 0);
                    _self.$.prazoEntrega.disabled = (data.estado != 0);
                    _self.$.locaisEntrega.disabled = (data.estado != 0);
                    _self.$.observacoesAdicionais.disabled = (data.estado != 0);
                    _self.$.estimativaPreco.disabled = (data.estado != 0);
                    _self.$.fornecedoresSugeridos.disabled = (data.estado != 0);
                    _self.$.fornecedorExclusivo.disabled = (data.estado != 0);
                    _self.$.descFornecedorExclusivo.disabled = (data.estado != 0);
                    _self.$.interlocutor.disabled = (data.estado != 0);

                    //_self.$.linhaTipo.disabled = (data.estado != 0);
                    //_self.$._CBLocations.disabled = (data.estado != 0);
                    //_self.$._CBItems.disabled = (data.estado != 0);
                    //_self.$._DescricaoProduto.disabled = (data.estado != 0);
                    ////_self.$._DescricaoProduto2.disabled = (data.estado != 0);
                    //_self.$._UnitMeasureCode.disabled = (data.estado != 0);
                    //_self.$._linhaQuantidadeRequerer.disabled = (data.estado != 0);
                    //_self.$._linhaCustoUnitario.disabled = (data.estado != 0);
                    //_self.$.tabLinhaProdutos.disabled = (data.estado != 0);

                    //NR 20180305
                    _self.$.comentarioImobContabilidade.disabled = (data.estado != 1);
                    _self.$.ImobilizadoSimNao.disabled = (data.estado != 1);
                    if (data.estado != 1) {
                        $(_self.$.actionButtonContabilidade1).addClass('disabled');
                    }

                    _self.$.comentarioImobArea.disabled = (data.estado != 2);
                    if (data.estado != 2) {
                        $(_self.$.actionButtonArea2).addClass('disabled');
                    }

                    //NR 20180301
                    _self.$.criterioEscolhaProcedimento.disabled = (data.estado != 4);
                    _self.$.descEscolhaProcedimento.disabled = (data.estado != 4);
                    _self.$.juri.disabled = (data.estado != 4);
                    _self.$.nomeProcesso.disabled = (data.estado != 4);
                    _self.$.objetoDoContrato.disabled = (data.estado != 4);
                    _self.$.condicoesDePagamento.disabled = (data.estado != 4);
                    _self.$.gestorProcesso.disabled = (data.estado != 4);
                    _self.$.comentarioFundamentoCompras.disabled = (data.estado != 4);
                    //_self.$.emailDestinoCA.disabled = (data.estado != 4);

                    if (data.estado != 4) {
                        $(_self.$.actionButtonCompras).addClass('disabled');
                        $(_self.$.gridElementosJuri_4).addClass('disabled');
                    }

                    //NR 20180302
                    _self.$.comentarioFundamentoFinanceiros.disabled = (data.estado != 5);
                    if (data.estado != 5) {
                        $(_self.$.actionButtonFinanceiros).addClass('disabled');
                    }

                    _self.$.comentarioAdjudicacao16.disabled = (data.estado != 16);
                    if (data.estado != 16) {
                        $(_self.$.btnSubmeterProcesso_16).addClass('disabled');
                    }


                    _self.$.comentarioCA17.disabled = (data.estado != 17);
                    _self.$.ratificarCaAdjudicacao.disabled = (data.estado != 17);
                    if (data.estado != 17) {
                        $(_self.$.btnAutorizacaoAdjudicacaoConfirm).addClass('disabled');
                        $(_self.$.btnAutorizacaoAdjudicacaoDevolver).addClass('disabled');
                        $(_self.$.btnAutorizacaoAdjudicacaoReject).addClass('disabled');
                    }
                    
                },
                
                //Helpers
                _executeRequest: function (url, data) {
                    this.$.page_databound_ajax.url = url;
                    this.$.page_databound_ajax.body = JSON.stringify(data);
                    this.$.page_databound_ajax.generateRequest();
                }
            });
        });
    </script>
</dom-module>