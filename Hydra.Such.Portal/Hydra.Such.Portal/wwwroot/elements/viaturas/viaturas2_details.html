<link rel="import" href="/lib/paper-tabs-master/paper-tab.html" />
<link rel="import" href="/lib/paper-tabs-master/paper-tabs.html" />
<link rel="import" href="/lib/iron-pages-master/iron-pages.html" />
<link rel="import" href="/lib/iron-menu-behavior/iron-menubar-behavior.html" />
<link rel="import" href="/lib/iron-form/iron-form.html" />
<link rel="import" href="/lib/paper-button/paper-button.html" />
<link rel="import" href="/lib/paper-toast-master/paper-toast.html" />

<link rel="import" href="/lib/such-selectbox/such-selectbox.html">
<link rel="import" href="/lib/datetime-picker-master/datetime-picker.html">
<link rel="import" href="/lib/vaadin-valo-theme/vaadin-date-picker.html">
<link rel="import" href="/lib/vaadin-date-picker/vaadin-date-picker.html">

<link rel="import" href="/lib/vaadin-text-field/vaadin-text-field.html">
<link rel="import" href="/lib/vaadin-combo-box/vaadin-combo-box.html" />
<link rel="import" href="/lib/such-textarea/such-textarea.html">

<link rel="import" href="/lib/vaadin-grid/vaadin-grid.html">
<link rel="import" href="/lib/vaadin-grid/vaadin-grid-filter.html">
<link rel="import" href="/lib/vaadin-grid/vaadin-grid-sorter.html">

<link rel="import" href="/lib/vaadin-upload/vaadin-upload-file.html">
<link rel="import" href="/lib/vaadin-upload/vaadin-upload.html">

<link rel="import" href="/lib/vaadin-checkbox/vaadin-checkbox.html">
<link rel="import" href="/lib/vaadin-valo-theme/vaadin-checkbox.html" />

<link rel="import" href="/lib/paper-dialog/paper-dialog.html" />
<link rel="import" href="/lib/paper-dialog-behavior/paper-dialog-behavior.html" />

<link rel="import" href="/lib/such-dropdown-menu/such-dropdown-menu.html" />

<!--ACORDEÃO-->
<link rel="import" href="/lib/paper-collapse-item/paper-collapse-group.html">
<link rel="import" href="/lib/paper-collapse-item/paper-collapse-item.html">

<dom-module id="x-viaturas2details">
    <template>
        <!-- STYLES -->
        <link rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap.css" />
        <link rel="stylesheet" href="/lib/font-awesome-4.7.0/css/font-awesome.min.css" />
        <link rel="stylesheet" href="/css/main.css" />

        <style>
            vaadin-combo-box {
                margin-top: 0px !important;
                width: 100% !important;
            }

            vaadin-date-picker {
                margin-top: 0px !important;
                width: 100% !important;
            }

            vaadin-text-field {
                margin-top: 0px !important;
                width: 100%;
            }

            paper-button {
                margin-top: 10px;
            }

            .break_clear {
                margin-top: 15px;
                margin-right: 0px !important;
                margin-left: 0px !important;
            }

            .break_frm {
                margin-top: 15px;
            }

            .label_custom {
                color: var(--valo-contrast-60pct) !important;
                font-weight: 500 !important;
                font-size: var(--valo-font-size-s) !important;
                margin-left: calc(var(--valo-text-field-border-radius, var(--valo-border-radius)) / 4) !important;
                margin-bottom: var(--valo-space-xs) !important;
                transition: color 0.4s !important;
                line-height: 1 !important;
                font-family: var(--valo-font-family) !important;
            }

            datetime-picker {
                border-radius: var(--valo-text-field-border-radius, var(--valo-border-radius));
                background-color: var(--valo-contrast-5pct);
                color: var(--valo-contrast-60pct) !important;
                width: 100%;
            }

            .marginSpace {
                margin: 0px !important;
            }

            textarea {
                background-color: #f5f5f5;
                border: none;
                border-radius: 3px 4px;
                align-self: baseline;
                font-weight: 500;
            }

                textarea:hover {
                    background-color: #eeeeee;
                }

                textarea:focus {
                    background-color: white;
                    border: none;
                    outline: 1px solid #eeeeee;
                    border-radius: 3px 4px;
                }

            datetime-picker {
                --datetime-selected-background: #71BCC1 !important;
                --datetime-background: #1f3133;
                --datetime-color: #eeeeee;
            }

            paper-collapse-item {
                --paper-item: {
                    padding: 0 0;
                };
                --paper-collapse-item-header: {
                    padding: 0 15px;
                    color: #333;
                    background-color: #f5f5f5;
                    border-bottom: solid #ddd 1px;
                    border-top-left-radius: 3px;
                    border-top-right-radius: 3px;
                };
            }

            .panel-body {
                padding-top: 0px !important;
            }

            vaadin-upload {
                padding: 0px;
            }

            vaadin-upload {
                --primary-color: rgba(48, 64, 84, 0.06);
                --paper-font-button_-_font-size: 13px;
                --primary-font-color: rgba(48, 64, 84, 0.91);
            }

            img {
                width: 100%;
                height: 100%;
            }
        </style>

        <!-- DROPDOWNS POPULATE -->
        <iron-ajax url="/PopulateDropdowns/GetViaturasTipos" last-response="{{LTiposViatura}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>

        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaEstados" last-response="{{ListaEstados}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaMarcas" last-response="{{ListaMarcas}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaTipoCaixa" last-response="{{ListaTipoCaixa}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaCategorias" last-response="{{ListaCategorias}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaTipos" last-response="{{ListaTipos}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaCombustiveis" last-response="{{ListaCombustiveis}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaTiposPropriedades" last-response="{{ListaTiposPropriedades}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaSegmentacoes" last-response="{{ListaSegmentacoes}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaLocaisParqueamento" last-response="{{ListaLocaisParqueamento}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2InspecoesResultados" last-response="{{ListaInspecoesResultados}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaCondutores" last-response="{{ListaCondutores}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaResponsaveis" last-response="{{ListaResponsaveis}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetRegionCode" last-response="{{ListaRegioes}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetFunctionalAreaCode" last-response="{{ListaAreas}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetProjectNavList" last-response="{{ListaProjetos}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>

        <iron-ajax url="/Viaturas/GetViatura2Details"
                   last-response="{{data}}"
                   method="post"
                   handle-as="json"
                   id="page_databound_ajax"
                   on-response="_responseProcessor"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViatura2"
                   last-response="{{deletedData}}"
                   method="post"
                   handle-as="json"
                   id="page_delete_ajax"
                   on-response="_responseDeleteProcessor"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/loadimage/_default"
                   last-response="{{loadimageresult}}"
                   method="post"
                   handle-as="json"
                   id="page_loadImage_ajax"
                   content-type="application/json">
        </iron-ajax>

        <!--Km-->
        <iron-ajax url="/Viaturas/GetViaturas2TabKm"
                   last-response="{{tabKm}}"
                   method="post"
                   handle-as="json"
                   id="page_tabKm_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2Km"
                   last-response="{{createViaturas2KmResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2Km_ajax"
                   on-response="_responseCreateViaturas2Km"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2Km"
                   last-response="{{deleteViaturas2KmResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2Km_ajax"
                   on-response="_responseDeleteViaturas2Km"
                   content-type="application/json">
        </iron-ajax>

        <!--Manutencao-->
        <iron-ajax url="/Viaturas/GetViaturas2TabManutencao"
                   last-response="{{tabManutencao}}"
                   method="post"
                   handle-as="json"
                   id="page_tabManutencao_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2Manutencao"
                   last-response="{{createViaturas2ManutencaoResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2Manutencao_ajax"
                   on-response="_responseCreateViaturas2Manutencao"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2Manutencao"
                   last-response="{{deleteViaturas2ManutencaoResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2Manutencao_ajax"
                   on-response="_responseDeleteViaturas2Manutencao"
                   content-type="application/json">
        </iron-ajax>

        <!--INSPEÇÕES-->
        <iron-ajax url="/Viaturas/GetViaturas2TabInspecao"
                   last-response="{{tabInspecao}}"
                   method="post"
                   handle-as="json"
                   id="page_tabinspecao_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2Inspecao"
                   last-response="{{createViaturas2InspecaoResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2Inspecao_ajax"
                   on-response="_responseCreateViaturas2Inspecao"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2Inspecao"
                   last-response="{{deleteViaturas2InspecaoResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2Inspecao_ajax"
                   on-response="_responseDeleteViaturas2Inspecao"
                   content-type="application/json">
        </iron-ajax>

        <!--CartaVerde-->
        <iron-ajax url="/Viaturas/GetViaturas2TabCartaVerde"
                   last-response="{{tabCartaVerde}}"
                   method="post"
                   handle-as="json"
                   id="page_tabCartaVerde_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2CartaVerde"
                   last-response="{{createViaturas2CartaVerdeResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2CartaVerde_ajax"
                   on-response="_responseCreateViaturas2CartaVerde"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2CartaVerde"
                   last-response="{{deleteViaturas2CartaVerdeResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2CartaVerde_ajax"
                   on-response="_responseDeleteViaturas2CartaVerde"
                   content-type="application/json">
        </iron-ajax>

        <!--Acidentes-->
        <iron-ajax url="/Viaturas/GetViaturas2TabAcidentes"
                   last-response="{{tabAcidentes}}"
                   method="post"
                   handle-as="json"
                   id="page_tabAcidentes_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2Acidentes"
                   last-response="{{createViaturas2AcidentesResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2Acidentes_ajax"
                   on-response="_responseCreateViaturas2Acidentes"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2Acidentes"
                   last-response="{{deleteViaturas2AcidentesResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2Acidentes_ajax"
                   on-response="_responseDeleteViaturas2Acidentes"
                   content-type="application/json">
        </iron-ajax>

        <!--ContraOrdenacoes-->
        <iron-ajax url="/Viaturas/GetViaturas2TabContraOrdenacoes"
                   last-response="{{tabContraOrdenacoes}}"
                   method="post"
                   handle-as="json"
                   id="page_tabContraOrdenacoes_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2ContraOrdenacoes"
                   last-response="{{createViaturas2ContraOrdenacoesResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2ContraOrdenacoes_ajax"
                   on-response="_responseCreateViaturas2ContraOrdenacoes"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2ContraOrdenacoes"
                   last-response="{{deleteViaturas2ContraOrdenacoesResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2ContraOrdenacoes_ajax"
                   on-response="_responseDeleteViaturas2ContraOrdenacoes"
                   content-type="application/json">
        </iron-ajax>

        <!--CONDUTORES-->
        <iron-ajax url="/Viaturas/GetViaturas2TabCondutor"
                   last-response="{{tabCondutor}}"
                   method="post"
                   handle-as="json"
                   id="page_tabcondutor_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2Condutor"
                   last-response="{{createViaturas2CondutorResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2Condutor_ajax"
                   on-response="_responseCreateViaturas2Condutor"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2Condutor"
                   last-response="{{deleteViaturas2CondutorResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2Condutor_ajax"
                   on-response="_responseDeleteViaturas2Condutor"
                   content-type="application/json">
        </iron-ajax>

        <!--GESTORES-->
        <iron-ajax url="/Viaturas/GetViaturas2TabGestor"
                   last-response="{{tabGestor}}"
                   method="post"
                   handle-as="json"
                   id="page_tabgestor_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2Gestor"
                   last-response="{{createViaturas2GestorResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2Gestor_ajax"
                   on-response="_responseCreateViaturas2Gestor"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2Gestor"
                   last-response="{{deleteViaturas2GestorResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2Gestor_ajax"
                   on-response="_responseDeleteViaturas2Gestor"
                   content-type="application/json">
        </iron-ajax>

        <!--ESTADO-->
        <iron-ajax url="/Viaturas/GetViaturas2TabEstado"
                   last-response="{{tabEstado}}"
                   method="post"
                   handle-as="json"
                   id="page_tabestado_ajax"
                   content-type="application/json">
        </iron-ajax>

        <!--DIMENSAO-->
        <iron-ajax url="/Viaturas/GetViaturas2TabDimensao"
                   last-response="{{tabDimensao}}"
                   method="post"
                   handle-as="json"
                   id="page_tabdimensao_ajax"
                   content-type="application/json">
        </iron-ajax>

        <!--PARQUEAMENTO-->
        <iron-ajax url="/Viaturas/GetViaturas2TabParqueamento"
                   last-response="{{tabParqueamento}}"
                   method="post"
                   handle-as="json"
                   id="page_tabparqueamento_ajax"
                   content-type="application/json">
        </iron-ajax>

        <!--PROPRIEDADE-->
        <iron-ajax url="/Viaturas/GetViaturas2TabPropriedade"
                   last-response="{{tabPropriedade}}"
                   method="post"
                   handle-as="json"
                   id="page_tabpropriedade_ajax"
                   content-type="application/json">
        </iron-ajax>

        <!--PopulateDropdowns-->
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaModelos"
                   last-response="{{ListaModelos}}"
                   method="post"
                   handle-as="json"
                   id="page_GetListaModelos_ajax"
                   on-response="_response_GetListaModelos_Processor"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/PopulateDropdowns/GetViaturas2Centros"
                   last-response="{{ListaCentros}}"
                   method="post"
                   handle-as="json"
                   id="page_GetListaCentros_ajax"
                   on-response="_response_GetListaCentros_Processor"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaPropriedades"
                   last-response="{{ListaPropriedades}}"
                   method="post"
                   handle-as="json"
                   id="page_GetListaPropriedades_ajax"
                   on-response="_response_GetListaPropriedades_Processor"
                   content-type="application/json">
        </iron-ajax>

        <div class="subMenu">
            <paper-button class="tablinks" on-tap="_goBack" title="Voltar"><i class="fa fa-arrow-left" aria-hidden="true"></i> Voltar</paper-button>

            <template is="dom-if" if="{{ _isCreate }}">
                <template is="dom-if" if="{{ _permissions.create }}">
                    <paper-button id="btnCreate" class="btnEdit tablinks" on-tap="_create"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar Viatura</paper-button>
                </template>
            </template>

            <template is="dom-if" if="{{ !_isCreate }}">
                <template is="dom-if" if="{{ _permissions.update }}">
                    <paper-button id="btnUpdate" class="btnEdit tablinks" on-tap="_update"><i class="fa fa-floppy-o" aria-hidden="true"></i>&nbsp; Guardar</paper-button>
                </template>
            </template>

            <template is="dom-if" if="{{ !_isCreate }}">
                <template is="dom-if" if="{{ _permissions.delete }}">
                    <paper-button id="btnDelete" class="btnRemove tablinks" on-tap="_delete"><i class="fa fa-trash-o" aria-hidden="true"></i>&nbsp; Eliminar</paper-button>
                </template>
            </template>

            <such-dropdown-menu on-value-changed="_viewMenuItemSelected" title="Consultar" items='[[ _viewMenuItems ]]'></such-dropdown-menu>
        </div>


        <div class="row break_frm">
            <div class="col-sm-12 col-md-12 col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <paper-tabs fit-container no-slide autoselect autoselect-delay="0" selected="{{selected}}">
                            <paper-tab>Informação</paper-tab>
                            <paper-tab>Geral</paper-tab>
                            <paper-tab>Utilização</paper-tab>
                            <paper-tab>Histórico</paper-tab>
                            <!--<paper-tab>Contrato Renting</paper-tab>-->
                        </paper-tabs>

                        <iron-pages selected="{{selected}}">
                            <!--Informação-->
                            <div>
                                <div class="row break_clear">
                                    <div class="col-md-9">
                                        <div class="row break_clear">
                                            <div class="col-md-3">
                                                <vaadin-text-field id="info_matricula" name="info_matricula" label="Matrícula" value="{{data.matricula}}" disabled placeholder="xx-xx-xx"></vaadin-text-field>
                                            </div>

                                            <div class="col-md-3">
                                                <vaadin-text-field id="info_marca" name="info_marca" label="Marca" value="{{data.marca}}" disabled></vaadin-text-field>
                                            </div>

                                            <div class="col-md-3">
                                                <vaadin-text-field id="info_modelo" name="info_modelo" label="Modelo" value="{{data.modelo}}" disabled></vaadin-text-field>
                                            </div>

                                            <div class="col-md-3">
                                                <vaadin-text-field id="info_estado" name="info_estado" label="Estado" value="{{data.estado}}" disabled></vaadin-text-field>
                                            </div>
                                        </div>

                                        <div class="row break_clear">
                                            <div class="col-md-4">
                                                <vaadin-text-field id="info_segmentacao" name="info_segmentacao" label="Segmentação" value="{{data.segmentacao}}" disabled></vaadin-text-field>
                                            </div>

                                            <div class="col-md-4">
                                                <vaadin-text-field id="info_parqueamento" name="info_parqueamento" label="Local de Parqueamento" value="{{data.localParqueamento}}" disabled></vaadin-text-field>
                                            </div>

                                            <div class="col-md-3">
                                                <vaadin-text-field id="info_propriedade" name="info_propriedade" label="Propriedade" value="{{data.propriedade}}" disabled></vaadin-text-field>
                                            </div>

                                            <div class="col-md-1">
                                                <vaadin-text-field id="info_idade" name="info_idade" label="Idade" value="{{data.idade}}" disabled></vaadin-text-field>
                                            </div>
                                        </div>

                                        <div class="row break_clear">
                                            <div class="col-md-6">
                                                <vaadin-text-field id="info_gestor" name="info_gestor" label="Responsável" value="{{data.gestor}}" disabled></vaadin-text-field>
                                            </div>

                                            <div class="col-md-6">
                                                <vaadin-text-field id="info_condutor" name="info_condutor" label="Condutor" value="{{data.condutor}}" disabled></vaadin-text-field>
                                            </div>
                                        </div>

                                        <div class="row break_clear">
                                            <div class="col-md-4">
                                                <vaadin-text-field id="info_garantiaSituacao" name="info_garantiaSituacao" label="Garantia Situação" value="" disabled></vaadin-text-field>
                                            </div>

                                            <div class="col-md-4">
                                                <vaadin-text-field id="info_seguroSituacao" name="info_seguroSituacao" label="Seguro Situação" value="" disabled></vaadin-text-field>
                                            </div>

                                            <div class="col-md-4">
                                                <vaadin-date-picker id="info_dataFimSeguro" name="info_dataFimSeguro" label="Data Fim Seguro" value="" disabled placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                            </div>
                                        </div>

                                        <div class="row break_clear">
                                            <div class="col-md-2">
                                                <vaadin-date-picker id="info_ultimaInspecao" name="info_ultimaInspecao" label="Última Inspeção" value="" disabled placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                            </div>

                                            <div class="col-md-2">
                                                <vaadin-date-picker id="info_proximaInspecao" name="info_proximaInspecao" label="Próxima Inspeção (Previsão)" value="{{data.dataProximaInspecaoTexto}}" disabled placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                            </div>

                                            <div class="col-md-2">
                                                <vaadin-text-field id="info_iucMesSeguinte" name="info_iucMesSeguinte" label="IUC Mês Seguinte" value="" disabled></vaadin-text-field>
                                            </div>

                                            <div class="col-md-3">
                                                <vaadin-text-field id="info_substituicao" name="info_substituicao" label="Substituição" value="" disabled></vaadin-text-field>
                                            </div>

                                            <div class="col-md-3">
                                                <vaadin-text-field id="info_afetacao" name="info_afetacao" label="Afetação" value="" disabled></vaadin-text-field>
                                            </div>
                                        </div>

                                        <divpage_loadImage_ajax class="row break_clear">
                                        </divpage_loadImage_ajax>
                                    </div>

                                    <div class="col-md-3" align="center" style="width: 25%; height: 350px; background-size: contain;">
                                        <img id="info_imagem" name="info_imagem" src="/viaturas/loadimage/{{data.matricula}}" />
                                        <vaadin-upload id="info_uploadimage" name="info_uploadimage"
                                                       target="/Viaturas/UploadImage/{{data.matricula}}"
                                                       method="POST"
                                                       headers="{'Accept': 'application/json'}"
                                                       accept=".jpg"
                                                       hidden="{{ !_permissions.update }}"
                                                       timeout=15000>
                                        </vaadin-upload>
                                    </div>
                                </div>
                            </div>

                            <!--Geral-->
                            <div>
                                <div class="row break_clear">
                                    <div class="col-md-2">
                                        <vaadin-text-field id="geral_matricula" name="geral_matricula" value="{{data.matricula}}" label="Matrícula" maxlength="20" disabled="{{ !_isCreate }}" placeholder="xx-xx-xx" required error-message="O campo Matrícula é de preenchimento obrigatório"></vaadin-text-field>
                                    </div>

                                    <div class="col-md-2">
                                        <such-selectbox id="geral_marca" name="geral_marca" value="{{data.idMarca}}" label="Marca"
                                                        items="[[ListaMarcas]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"value", "name":"Marca"}]'
                                                        on-value-changed="_GetListaModelos"
                                                        required error-message="O campo Marca é de preenchimento obrigatório"
                                                        disabled="{{ _lockFields }}">
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2">
                                        <such-selectbox id="geral_modelo" name="geral_modelo" value="{{data.idModelo}}" label="Modelo"
                                                        items="[[ListaModelos]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"value", "name":"Marca"}]'
                                                        required error-message="O campo Modelo é de preenchimento obrigatório"
                                                        disabled="{{ _lockFields }}">
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2">
                                        <vaadin-date-picker id="geral_data1Matricula" name="geral_data1Matricula" value="{{data.data1MatriculaTexto}}" label="Data 1ª Matricula" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                    </div>

                                    <div class="col-md-2">
                                        <vaadin-date-picker id="geral_dataMatricula" name="geral_dataMatricula" value="{{data.dataMatriculaTexto}}" label="Data da Matrícula" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Data da Matrícula é de preenchimento obrigatório"></vaadin-date-picker>
                                    </div>

                                    <div class="col-md-2">
                                        <such-selectbox id="geral_estado" name="geral_estado" value="{{data.idEstado}}" label="Estado"
                                                        items="[[ListaEstados]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"value", "name":"Estado"}]'
                                                        on-value-changed="_openDlgEstado"
                                                        required error-message="O campo Estado é de preenchimento obrigatório">
                                        </such-selectbox>
                                    </div>
                                </div>

                                <div class="row break_clear">
                                    <div class="col-md-2">
                                        <such-selectbox id="geral_projeto" name="geral_projeto" value="{{data.noProjeto}}" label="Projeto"
                                                        items="[[ListaProjetos]]"
                                                        text-path="no"
                                                        value-path="no"
                                                        fields='[{"field":"no", "name":"Nº Projeto"}, {"field":"description", "name":"Descrição"}, {"field":"customerNo", "name":"Nº Cliente"}, {"field":"globalDimension1", "name":"Cód. Região"}, {"field":"globalDimension2", "name":"Cód. Área Funcional"}]'
                                                        disabled>
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2">
                                        <such-selectbox id="geral_codRegiao" name="geral_codRegiao" value="{{data.codRegiao}}" label="Região"
                                                        items="[[ListaRegioes]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"id", "name":"Código"}, {"field":"value", "name":"Descrição"}]'
                                                        required error-message="O campo Região é de preenchimento obrigatório"
                                                        on-value-changed="_openDlgDimensao"
                                                        disabled="{{ _lockFields }}">
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2">
                                        <such-selectbox id="geral_codAreaFuncional" name="geral_codAreaFuncional" value="{{data.codAreaFuncional}}" label="Área Funcional"
                                                        items="[[ListaAreas]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"id", "name":"Código"}, {"field":"value", "name":"Descrição"}]'
                                                        on-value-changed="_GetListaCentros"
                                                        required error-message="O campo Área Funcional é de preenchimento obrigatório"
                                                        disabled="{{ _lockFields }}">
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2">
                                        <such-selectbox id="geral_codCentroResponsabilidade" name="geral_codCentroResponsabilidade" value="{{data.codCentroResponsabilidade}}" label="Centro de Responsabilidade"
                                                        items="[[ListaCentros]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"id", "name":"Código"}, {"field":"value", "name":"Descrição"}]'
                                                        required error-message="O campo Centro de Responsabilidade é de preenchimento obrigatório"
                                                        on-value-changed="_openDlgDimensao"
                                                        disabled="{{ _lockFields }}">
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2">
                                        <such-selectbox id="geral_localParqueamento" name="geral_localParqueamento" value="{{data.idLocalParqueamento}}" label="Local de Parqueamento"
                                                        items="[[ListaLocaisParqueamento]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"value", "name":"Local de Parqueamento"}]'
                                                        on-value-changed="_openDlgParqueamento"
                                                        disabled="{{ _lockFields }}">
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2 alignPoga">
                                        <vaadin-checkbox id="geral_alvaraLicenca" name="geral_alvaraLicenca" checked="{{data.alvaraLicenca}}" disabled="{{ _lockFields }}" type="number" class="alignRight">Alvará Licença</vaadin-checkbox>
                                    </div>
                                </div>

                                <div class="row break_clear">
                                    <!--<label id="labelSegmento">Segmento</label>-->
                                    <div>
                                        <div class="col-md-2">
                                            <such-selectbox id="geral_categoria" name="geral_categoria" value="{{data.idCategoria}}" label="Categoria"
                                                            items="[[ListaCategorias]]"
                                                            text-path="value"
                                                            value-path="id"
                                                            fields='[{"field":"value", "name":"Categoria"}]'
                                                            required error-message="O campo Categoria é de preenchimento obrigatório"
                                                            disabled="{{ _lockFields }}">
                                            </such-selectbox>
                                        </div>

                                        <div class="col-md-2">
                                            <such-selectbox id="geral_tipo" name="geral_tipo" value="{{data.idTipo}}" label="Tipo"
                                                            items="[[ListaTipos]]"
                                                            text-path="value"
                                                            value-path="id"
                                                            fields='[{"field":"value", "name":"Tipo"}]'
                                                            required error-message="O campo Tipo é de preenchimento obrigatório"
                                                            disabled="{{ _lockFields }}">
                                            </such-selectbox>
                                        </div>

                                        <div class="col-md-2">
                                            <such-selectbox id="geral_tipoPropriedade" name="geral_tipoPropriedade" value="{{data.idTipoPropriedade}}" label="Tipo de Propriedade"
                                                            items="[[ListaTiposPropriedades]]"
                                                            text-path="value"
                                                            value-path="id"
                                                            fields='[{"field":"value", "name":"Tipo"}]'
                                                            on-value-changed="_GetListaPropriedades"
                                                            required error-message="O campo Tipo de Propriedade é de preenchimento obrigatório"
                                                            disabled="{{ _lockFields }}">
                                            </such-selectbox>
                                        </div>

                                        <div class="col-md-2">
                                            <such-selectbox id="geral_propriedade" name="geral_propriedade" value="{{data.idPropriedade}}" label="Propriedade"
                                                            items="[[ListaPropriedades]]"
                                                            text-path="value"
                                                            value-path="id"
                                                            fields='[{"field":"value", "name":"Tipo"}]'
                                                            required error-message="O campo Propriedade é de preenchimento obrigatório"
                                                            on-value-changed="_openDlgPropriedade"
                                                            disabled="{{ _lockFields }}">
                                            </such-selectbox>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-date-picker id="geral_dataAquisicao" name="geral_dataAquisicao" value="{{data.dataAquisicaoTexto}}" label="Data de Aquisição" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Data de Aquisição é de preenchimento obrigatório"></vaadin-date-picker>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_intervaloRevisoes" name="geral_intervaloRevisoes" value="{{data.intervaloRevisoes}}" label="Intervalo entre Revisões" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">km</div></vaadin-text-field>
                                        </div>
                                    </div>
                                </div>

                                <div class="row break_clear">
                                    <label id="labelCaracteristicas">Características</label>
                                    <div>
                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_potencia" name="geral_potencia" value="{{data.potencia}}" label="Potência" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">kW</div></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_cilindrada" name="geral_cilindrada" value="{{data.cilindrada}}" label="Cilindrada" disabled="{{ _lockFields }}" type="number" class="alignRight"></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-combo-box id="geral_combustivel" name="geral_combustivel" items="[[ListaCombustiveis]]" item-value-path="id" item-label-path="value" value="{{data.idCombustivel}}" label="Combústivel" disabled="{{ _lockFields }}">
                                                <template>
                                                    <paper-icon-item>
                                                        <paper-item-body two-line>
                                                            <div>[[item.value]]</div>
                                                        </paper-item-body>
                                                    </paper-icon-item>
                                                </template>
                                            </vaadin-combo-box>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_consumoReferencia" name="geral_consumoReferencia" value="{{data.consumoReferencia}}" label="Consumo Referência" disabled="{{ _lockFields }}" class="alignRight" on-value-changed="_ConvertDecimals"><div slot="suffix">l/100</div></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_capacidadeDeposito" name="geral_capacidadeDeposito" value="{{data.capacidadeDeposito}}" label="Capacidade Depósito" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">l</div></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_autonomia" name="geral_autonomia" value="{{data.autonomia}}" label="Autonomia" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">km</div></vaadin-text-field>
                                        </div>
                                    </div>

                                    <div>
                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_distanciaEixos" name="geral_distanciaEixos" value="{{data.distanciaEixos}}" label="Distância entre Eixos" disabled="{{ _lockFields }}" class="alignRight" on-value-changed="_ConvertDecimals"><div slot="suffix">m</div></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_noLugares" name="geral_noLugares" value="{{data.noLugares}}" label="Nº de Lugares" disabled="{{ _lockFields }}" type="number" class="alignRight"></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_noAnosGarantia" name="geral_noAnosGarantia" value="{{data.noAnosGarantia}}" label="Nº de Anos Garantia" disabled="{{ _lockFields }}" type="number" class="alignRight"></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_noQuadro" name="geral_noQuadro" value="{{data.noQuadro}}" label="Nº Quadro" disabled="{{ _lockFields }}" maxlength="50" required error-message="O campo Nº Quadro é de preenchimento obrigatório"></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <such-selectbox id="geral_tipoCaixa" name="geral_tipoCaixa" value="{{data.idTipoCaixa}}" label="Tipo de Caixa"
                                                            items="[[ListaTipoCaixa]]"
                                                            text-path="value"
                                                            value-path="id"
                                                            fields='[{"field":"value", "name":"Tipo de Caixa"}]'
                                                            disabled="{{ _lockFields }}">
                                            </such-selectbox>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_cor" name="geral_cor" value="{{data.cor}}" label="Cor" disabled="{{ _lockFields }}" maxlength="40" required error-message="O campo Cor é de preenchimento obrigatório"></vaadin-text-field>
                                        </div>
                                    </div>
                                </div>

                                <div class="row break_clear">
                                    <div class="col-md-6">
                                        <label id="labelPeso">Peso</label>
                                        <div>
                                            <div class="col-md-4">
                                                <vaadin-text-field id="geral_pesoBruto" name="geral_pesoBruto" value="{{data.pesoBruto}}" label="Peso Bruto" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">kg</div></vaadin-text-field>
                                            </div>

                                            <div class="col-md-4">
                                                <vaadin-text-field id="geral_cargaMaxima" name="geral_cargaMaxima" value="{{data.cargaMaxima}}" label="Carga Máxima" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">kg</div></vaadin-text-field>
                                            </div>

                                            <div class="col-md-4">
                                                <vaadin-text-field id="geral_tara" name="geral_tara" value="{{data.tara}}" label="Tara" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">kg</div></vaadin-text-field>
                                            </div>
                                        </div>

                                        <label id="labelPneus">Pneus</label>
                                        <div>
                                            <div class="col-md-6">
                                                <vaadin-text-field id="geral_pneuFrente" name="geral_pneuFrente" value="{{data.pneuFrente}}" label="Pneumáticos Frente" maxlength="50" disabled="{{ _lockFields }}"></vaadin-text-field>
                                            </div>

                                            <div class="col-md-6">
                                                <vaadin-text-field id="geral_pneuRetaguarda" name="geral_pneuRetaguarda" value="{{data.pneuRetaguarda}}" label="Pneumáticos Retaguarda" maxlength="50" disabled="{{ _lockFields }}"></vaadin-text-field>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <such-textarea id="geral_observacoes" name="geral_observacoes" value="{{data.observacoes}}" label="Observações" disabled="{{ _lockFields }}" rows="7"> </such-textarea>
                                    </div>
                                </div>

                                <div class="row break_clear">
                                    <paper-collapse-item class="panel-heading" header="Imobilizado">
                                        <vaadin-grid id="gridImobilizado" aria-label="gridImobilizado" items="" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable>
                                                <template class="header">
                                                    <vaadin-grid-sorter path="noImobilizado">Nº Imobilizado</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="noImobilizado" />
                                                </template>
                                                <template>
                                                    {{item.noImobilizado}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable>
                                                <template class="header">
                                                    <vaadin-grid-sorter path="descricao">Descrição</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="descricao" />
                                                </template>
                                                <template>
                                                    {{item.descricao}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable>
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataCompra">data da compra</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataCompra" />
                                                </template>
                                                <template>
                                                    {{item.dataCompra}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable>
                                                <template class="header">
                                                    <vaadin-grid-sorter path="inicioAmortizacao">Início Amortização</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="inicioAmortizacao" />
                                                </template>
                                                <template>
                                                    {{item.inicioAmortizacao}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable>
                                                <template class="header">
                                                    <vaadin-grid-sorter path="fimAmortizacao">Fim Amortização</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="fimAmortizacao" />
                                                </template>
                                                <template>
                                                    {{item.fimAmortizacao}}
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>

                                        <div style="padding-left:50px">
                                            <paper-collapse-item class="panel-heading" header="Inserir" closed hidden>
                                                <div class="row break_clear">
                                                    <div class="col-md-2">
                                                        <vaadin-text-field id="noImobilizado" name="noImobilizado" label="Nº imobilizado" value="" disabled="{{ !_permissions.update }}"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-text-field id="descricao" name="descricao" label="Descrição" value="" disabled="{{ !_permissions.update }}"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="dataCompra" name="dataCompra" label="Data da compra" value="" disabled="{{ !_permissions.update }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="inicioAmortizacao" name="inicioAmortizacao" label="Início amortização" value="" disabled="{{ !_permissions.update }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="fimAmortizacao" name="fimAmortizacao" label="Fim amortização" value="" disabled="{{ !_permissions.update }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-2" style="padding-top:15px">
                                                        <paper-button raised id="btnCriarEstado" class="btnSave" on-tap="_createEstado" disabled="{{ !_permissions.update }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                    </div>
                                                </div>
                                            </paper-collapse-item>
                                        </div>
                                    </paper-collapse-item>
                                </div>
                            </div>

                            <!--Utilização-->
                            <div>
                                <!--Km-->
                                <paper-collapse-item class="panel-heading" header="Km" closed>
                                    <vaadin-grid id="gridKm" aria-label="gridKm" items="{{ tabKm }}" class="grid" multi-sort="true" column-reordering-allowed>
                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="km">Km</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="km" />
                                            </template>
                                            <template>
                                                {{item.km}} km
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataTexto">Data</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataTexto" />
                                            </template>
                                            <template>
                                                {{item.dataTexto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                            </template>
                                            <template>
                                                <center>
                                                    <paper-button id="btn_deleteKm" class="btnRemove tableBtn" raised on-tap="_deleteKm" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>

                                    <div style="padding-left:50px">
                                        <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                            <div class="row break_clear">
                                                <div class="col-md-2">
                                                    <vaadin-text-field id="km_km" name="km_km" label="Km" value="" type="number" class="alignRight" required error-message="O campo Km é de preenchimento obrigatório"><div slot="suffix">km</div></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="km_data" name="km_data" label="Data" value="" placeholder="dd/MM/aaaa" required error-message="O campo Data é de preenchimento obrigatório"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-1" style="padding-top:15px">
                                                    <paper-button raised id="btn_createKm" class="btnSave" on-tap="_createKm" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                </div>
                                            </div>
                                        </paper-collapse-item>
                                    </div>
                                </paper-collapse-item>

                                <!--Abastecimentos-->
                                <paper-collapse-item class="panel-heading" header="Abastecimentos" closed>
                                    <div style="padding-left:50px">
                                        <!--Abastecimentos SUCH-->
                                        <paper-collapse-item class="panel-heading" header="Abastecimentos SUCH" closed>
                                            <vaadin-grid id="gridAbastecimentosSUCH" aria-label="gridAbastecimentosSUCH" items="" class="grid" multi-sort="true" column-reordering-allowed>
                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="localDeAbastecimento">Local de Abastecimento</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="localDeAbastecimento" />
                                                    </template>
                                                    <template>
                                                        {{item.localDeAbastecimento}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="data">Data</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="data" />
                                                    </template>
                                                    <template>
                                                        {{item.data}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="hora">Hora</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="hora" />
                                                    </template>
                                                    <template>
                                                        {{item.hora}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="noCartao">Nº Cartão</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="noCartao" />
                                                    </template>
                                                    <template>
                                                        {{item.noCartao}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="combustivel">Combustível</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="combustivel" />
                                                    </template>
                                                    <template>
                                                        {{item.combustivel}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="km">Km</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="km" />
                                                    </template>
                                                    <template>
                                                        {{item.km}} km
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="litros">Litros</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="litros" />
                                                    </template>
                                                    <template>
                                                        {{item.litros}} l
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="condutor">Condutor</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="condutor" />
                                                    </template>
                                                    <template>
                                                        {{item.condutor}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="observacoes">Observações</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="observacoes" />
                                                    </template>
                                                    <template>
                                                        {{item.observacoes}}
                                                    </template>
                                                </vaadin-grid-column>
                                            </vaadin-grid>

                                            <div style="padding-left:50px">
                                                <paper-collapse-item class="panel-heading" header="Inserir" closed hidden>
                                                    <div class="row break_clear">
                                                        <div class="col-md-2">
                                                            <vaadin-text-field id="localDeAbastecimento" name="localDeAbastecimento" label="Local de Abastecimento" value="" disabled="{{ _lockFields }}"></vaadin-text-field>
                                                        </div>

                                                        <div class="col-md-2">
                                                            <vaadin-date-picker id="data" name="data" label="Data" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                        </div>

                                                        <div class="col-md-2">
                                                            <vaadin-text-field id="hora" name="hora" label="Hora" value="" disabled="{{ _lockFields }}" placeholder="hh:mm"></vaadin-text-field>
                                                        </div>

                                                        <div class="col-md-2">
                                                            <vaadin-text-field id="noCartao" name="noCartao" label="Nº Cartão" value="" disabled="{{ _lockFields }}"></vaadin-text-field>
                                                        </div>

                                                        <div class="col-md-2">
                                                            <vaadin-text-field id="combustivel" name="combustivel" label="Combustível" value="" disabled="{{ _lockFields }}"></vaadin-text-field>
                                                        </div>

                                                        <div class="col-md-2">
                                                            <vaadin-text-field id="km" name="km" label="Km" value="" disabled="{{ _lockFields }}"><div slot="suffix">km</div></vaadin-text-field>
                                                        </div>
                                                    </div>

                                                    <div class="row break_clear">
                                                        <div class="col-md-2">
                                                            <vaadin-text-field id="litros" name="litros" label="Litros" value="" disabled="{{ _lockFields }}"><div slot="suffix">l</div></vaadin-text-field>
                                                        </div>

                                                        <div class="col-md-2">
                                                            <vaadin-text-field id="condutor" name="condutor" label="Condutor" value="" disabled="{{ _lockFields }}"></vaadin-text-field>
                                                        </div>

                                                        <div class="col-md-2">
                                                            <vaadin-text-field id="observacoes" name="observacoes" label="Observações" value="" disabled="{{ _lockFields }}"></vaadin-text-field>
                                                        </div>

                                                        <div class="col-md-2" style="padding-top:15px">
                                                            <paper-button raised id="btnAbastecimentosSUCH" class="btnSave" on-tap="_createAbastecimentosSUCH" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                        </div>
                                                    </div>
                                                </paper-collapse-item>
                                            </div>
                                        </paper-collapse-item>

                                        <!--Abastecimentos GALP (Apenas Consulta)-->
                                        <paper-collapse-item class="panel-heading" header="Abastecimentos GALP (Apenas Consulta)" closed>
                                            <vaadin-grid id="gridAbastecimentosGALP" aria-label="gridAbastecimentosGALP" items="" class="grid" multi-sort="true" column-reordering-allowed>
                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="noCartao">Nº Cartão</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="noCartao" />
                                                    </template>
                                                    <template>
                                                        {{item.noCartao}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="kmsActuais">Kms Actuais</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="kmsActuais" />
                                                    </template>
                                                    <template>
                                                        {{item.kmsActuais}} km
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="kmsRegistadosConsumo">Kms Registados Consumo</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="kmsRegistadosConsumo" />
                                                    </template>
                                                    <template>
                                                        {{item.kmsRegistadosConsumo}} km
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="diferencaKmsAbastAnterior">Diferença Kms Abast Anterior</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="diferencaKmsAbastAnterior" />
                                                    </template>
                                                    <template>
                                                        {{item.diferencaKmsAbastAnterior}} km
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="dataTransacao">Data Transação</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="dataTransacao" />
                                                    </template>
                                                    <template>
                                                        {{item.dataTransacao}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="horaTransação">Hora Transação</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="horaTransação" />
                                                    </template>
                                                    <template>
                                                        {{item.horaTransação}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="consumoMedio">Consumo Médio</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="consumoMedio" />
                                                    </template>
                                                    <template>
                                                        {{item.consumoMedio}} l/100
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="litrosAbastecidos">Litros Abastecidos</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="litrosAbastecidos" />
                                                    </template>
                                                    <template>
                                                        {{item.litrosAbastecidos}} l
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="valorLiquidoTotalComIVA">Valor Liq Total c/ IVA</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="valorLiquidoTotalComIVA" />
                                                    </template>
                                                    <template>
                                                        {{item.valorLiquidoTotalComIVA}} €
                                                    </template>
                                                </vaadin-grid-column>
                                            </vaadin-grid>
                                        </paper-collapse-item>

                                        <!--União Abastecimentos SUCH e GALP (Apenas Consulta)-->
                                        <paper-collapse-item class="panel-heading" header="União Abastecimentos SUCH e GALP (Apenas Consulta)" closed>
                                            <vaadin-grid id="gridUniaoAbastecimentosSUCHeGALP" aria-label="gridUniaoAbastecimentosSUCHeGALP" items="" class="grid" multi-sort="true" column-reordering-allowed>
                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="noCartao">Nº Cartão</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="noCartao" />
                                                    </template>
                                                    <template>
                                                        {{item.noCartao}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="data">Data</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="data" />
                                                    </template>
                                                    <template>
                                                        {{item.data}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="hora">Hora</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="hora" />
                                                    </template>
                                                    <template>
                                                        {{item.hora}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="combustivel">Combustível</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="combustivel" />
                                                    </template>
                                                    <template>
                                                        {{item.combustivel}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable>
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="litros">Litros</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="litros" />
                                                    </template>
                                                    <template>
                                                        {{item.litros}} l
                                                    </template>
                                                </vaadin-grid-column>
                                            </vaadin-grid>
                                        </paper-collapse-item>
                                    </div>
                                </paper-collapse-item>

                                <!--Manutenção-->
                                <paper-collapse-item class="panel-heading" header="Manutenção" closed>
                                    <vaadin-grid id="gridManutencao" aria-label="gridManutencao" items="{{ tabManutencao }}" class="grid" multi-sort="true" column-reordering-allowed>
                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="local">Local</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="local" />
                                            </template>
                                            <template>
                                                {{item.local}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataInicioTexto">Data de Início</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataInicioTexto" />
                                            </template>
                                            <template>
                                                {{item.dataInicioTexto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataFimTexto">Data de Fim</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataFimTexto" />
                                            </template>
                                            <template>
                                                {{item.dataFimTexto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="observacoes">Observações</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="observacoes" />
                                            </template>
                                            <template>
                                                {{item.observacoes}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                            </template>
                                            <template>
                                                <center>
                                                    <paper-button id="btn_deleteManutencao" class="btnRemove tableBtn" raised on-tap="_deleteManutencao" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>

                                    <div style="padding-left:50px">
                                        <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                            <div class="row break_clear">
                                                <div class="col-md-3">
                                                    <vaadin-text-field id="manutencao_local" name="manutencao_local" label="Local" value="" disabled="{{ _lockFields }}" maxlength="200" required error-message="O campo Local é de preenchimento obrigatório"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="manutencao_dataInicio" name="manutencao_dataInicio" label="Data de Início" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Data de Início é de preenchimento obrigatório"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="manutencao_dataFim" name="manutencao_dataFim" label="Data de Fim" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-4">
                                                    <vaadin-text-field id="manutencao_observacoes" name="manutencao_observacoes" label="Observações" value="" disabled="{{ _lockFields }}" maxlength="2000"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-1" style="padding-top:15px">
                                                    <paper-button raised id="btn_createManutencao" class="btnSave" on-tap="_createManutencao" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                </div>
                                            </div>
                                        </paper-collapse-item>
                                    </div>
                                </paper-collapse-item>

                                <!--Inspeção-->
                                <paper-collapse-item class="panel-heading" header="Inspeção" closed>
                                    <vaadin-grid id="gridInspecao" name="gridInspecao" aria-label="gridInspecao" items="{{ tabInspecao }}" class="grid" multi-sort="true" column-reordering-allowed>
                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataInspecaoTexto">Data da Inspeção</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataInspecaoTexto" />
                                            </template>
                                            <template>
                                                {{item.dataInspecaoTexto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="kmInspecao">Km Inspeção</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="kmInspecao" />
                                            </template>
                                            <template>
                                                {{item.kmInspecao}} km
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="resultado">Resultado</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="resultado" />
                                            </template>
                                            <template>
                                                {{item.resultado}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="proximaInspecaoTexto">Próxima Inspeção</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="proximaInspecaoTexto" />
                                            </template>
                                            <template>
                                                {{item.proximaInspecaoTexto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="observacao">Observações</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="observacao" />
                                            </template>
                                            <template>
                                                {{item.observacao}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                            </template>
                                            <template>
                                                <center>
                                                    <paper-button id="btn_deleteInspecao" class="btnRemove tableBtn" raised on-tap="_deleteInspecao" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>

                                    <div style="padding-left:50px">
                                        <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                            <div class="row break_clear">
                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="inspecao_dataInspecao" name="inspecao_dataInspecao" label="Data da Inspeção" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Data da Inspeção é de preenchimento obrigatório"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-1">
                                                    <vaadin-text-field id="inspecao_kmInspecao" name="inspecao_kmInspecao" label="Km Inspeção" value="" disabled="{{ _lockFields }}" type="number" class="alignRight" required error-message="O campo Km Inspeção é de preenchimento obrigatório"><div slot="suffix">km</div></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-combo-box id="inspecao_resultado" name="inspecao_resultado" items="[[ListaInspecoesResultados]]" item-value-path="id" item-label-path="value" value="" label="Resultado" disabled="{{ _lockFields }}" required error-message="O campo Resultado é de preenchimento obrigatório">
                                                        <template>
                                                            <paper-icon-item>
                                                                <paper-item-body two-line>
                                                                    <div>[[item.value]]</div>
                                                                </paper-item-body>
                                                            </paper-icon-item>
                                                        </template>
                                                    </vaadin-combo-box>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="inspecao_proximaInspecao" name="inspecao_proximaInspecao" label="Próxima Inspeção" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Próxima Inspeção é de preenchimento obrigatório"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-4">
                                                    <vaadin-text-field id="inspecao_observacoes" name="inspecao_observacoes" label="Observações" value="" disabled="{{ _lockFields }}"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-1" style="padding-top:15px">
                                                    <paper-button raised id="btnInspecao" class="btnSave" on-tap="_createInspecao" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                </div>
                                            </div>
                                        </paper-collapse-item>
                                    </div>
                                </paper-collapse-item>

                                <!--Carta Verde-->
                                <paper-collapse-item class="panel-heading" header="Carta Verde" closed>
                                    <vaadin-grid id="gridCartaVerde" aria-label="gridCartaVerde" items="{{ tabCartaVerde }}" class="grid" multi-sort="true" column-reordering-allowed>
                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="noApolice">Nº da Apólice</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="noApolice" />
                                            </template>
                                            <template>
                                                {{item.noApolice}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="seguradora">Seguradora</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="seguradora" />
                                            </template>
                                            <template>
                                                {{item.seguradora}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataInicioTexto">Data de Início</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataInicioTexto" />
                                            </template>
                                            <template>
                                                {{item.dataInicioTexto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataFimTexto">Data de Fim</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataFimTexto" />
                                            </template>
                                            <template>
                                                {{item.dataFimTexto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="valorPremioSeguro">Valor do Prémio</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="valorPremioSeguro" />
                                            </template>
                                            <template>
                                                {{item.valorPremioSeguro}} €
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                            </template>
                                            <template>
                                                <center>
                                                    <paper-button id="btn_deleteCartaVerde" class="btnRemove tableBtn" raised on-tap="_deleteCartaVerde" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>

                                    <div style="padding-left:50px">
                                        <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                            <div class="row break_clear">
                                                <div class="col-md-2">
                                                    <vaadin-text-field id="cartaverde_noDaApolice" name="cartaverde_noDaApolice" label="Nº da Apólice" value="" disabled="{{ _lockFields }}" maxlength="200" required error-message="O campo Nº da Apólice é de preenchimento obrigatório"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-3">
                                                    <vaadin-text-field id="cartaverde_seguradora" name="cartaverde_seguradora" label="Seguradora" value="" disabled="{{ _lockFields }}" required error-message="O campo Seguradora é de preenchimento obrigatório"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="cartaverde_dataInicio" name="cartaverde_dataInicio" label="Data de Início" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Data de Início é de preenchimento obrigatório"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="cartaverde_dataFim" name="cartaverde_dataFim" label="Data de Fim" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="cartaverde_valorPremioSeguro" name="cartaverde_valorPremioSeguro" label="Valor do Prémio" value="" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">€</div></vaadin-text-field>
                                                </div>

                                                <div class="col-md-1" style="padding-top:15px">
                                                    <paper-button raised id="btn_createCartaVerde" class="btnSave" on-tap="_createCartaVerde" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                </div>
                                            </div>
                                        </paper-collapse-item>
                                    </div>
                                </paper-collapse-item>

                                <!--Acidentes-->
                                <paper-collapse-item class="panel-heading" header="Acidentes" closed>
                                    <vaadin-grid id="gridAcidentes" aria-label="gridAcidentes" items="{{ tabAcidentes }}" class="grid" multi-sort="true" column-reordering-allowed>
                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="local">Local</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="local" />
                                            </template>
                                            <template>
                                                {{item.local}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataTexto">Data</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataTexto" />
                                            </template>
                                            <template>
                                                {{item.dataTexto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="condutor">Condutor</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="condutor" />
                                            </template>
                                            <template>
                                                {{item.condutor}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="responsabilidade">Responsabilidade</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="responsabilidade" />
                                            </template>
                                            <template>
                                                {{item.responsabilidade}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="observacoes">Observações</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="observacoes" />
                                            </template>
                                            <template>
                                                {{item.observacoes}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                            </template>
                                            <template>
                                                <center>
                                                    <paper-button id="btn_deleteAcidentes" class="btnRemove tableBtn" raised on-tap="_deleteAcidentes" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>

                                    <div style="padding-left:50px">
                                        <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                            <div class="row break_clear">
                                                <div class="col-md-2">
                                                    <vaadin-text-field id="acidentes_local" name="acidentes_local" label="Local" value="" disabled="{{ _lockFields }}" maxlength="200" required error-message="O campo Local é de preenchimento obrigatório"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="acidentes_data" name="acidentes_data" label="Data" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Data é de preenchimento obrigatório"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="acidentes_idCondutor" name="acidentes_idCondutor" label="Condutor" value="" disabled="{{ _lockFields }}" required error-message="O campo Condutor é de preenchimento obrigatório"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="acidentes_idresponsabilidade" name="acidentes_idresponsabilidade" label="Responsabilidade" value="" disabled="{{ _lockFields }}" required error-message="O campo Responsabilidade é de preenchimento obrigatório"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-3">
                                                    <vaadin-text-field id="acidentes_observacoes" name="acidentes_observacoes" label="Observações" value="" disabled="{{ _lockFields }}" maxlength="2000"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-1" style="padding-top:15px">
                                                    <paper-button raised id="btn_createAcidentes" class="btnSave" on-tap="_createAcidentes" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                </div>
                                            </div>
                                        </paper-collapse-item>
                                    </div>
                                </paper-collapse-item>

                                <!--Contraordenações-->
                                <paper-collapse-item class="panel-heading" header="Contraordenações" closed>
                                    <vaadin-grid id="gridContraordenacoes" aria-label="gridContraordenacoes" items="{{ tabContraOrdenacoes }}" class="grid" multi-sort="true" column-reordering-allowed>
                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="local">Local</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="local" />
                                            </template>
                                            <template>
                                                {{item.local}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataTexto">Data</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataTexto" />
                                            </template>
                                            <template>
                                                {{item.dataTexto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="condutor">Condutor</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="condutor" />
                                            </template>
                                            <template>
                                                {{item.condutor}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="responsabilidade">Responsabilidade</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="responsabilidade" />
                                            </template>
                                            <template>
                                                {{item.responsabilidade}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="valor">Valor</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="valor" />
                                            </template>
                                            <template>
                                                {{item.valor}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="observacoes">Observacoes</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="observacoes" />
                                            </template>
                                            <template>
                                                {{item.observacoes}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                            </template>
                                            <template>
                                                <center>
                                                    <paper-button id="btn_deleteContraordenacoes" class="btnRemove tableBtn" raised on-tap="_deleteContraordenacoes" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>

                                    <div style="padding-left:50px">
                                        <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                            <div class="row break_clear">
                                                <div class="col-md-4">
                                                    <vaadin-text-field id="contraordenacoes_local" name="contraordenacoes_local" label="Local" value="" disabled="{{ _lockFields }}" maxlength="200" required error-message="O campo Local é de preenchimento obrigatório"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="contraordenacoes_data" name="contraordenacoes_data" label="Data" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Data é de preenchimento obrigatório"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-3">
                                                    <vaadin-text-field id="contraordenacoes_idCondutor" name="contraordenacoes_idCondutor" label="Condutor" value="" disabled="{{ _lockFields }}" required error-message="O campo Condutor é de preenchimento obrigatório"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-3">
                                                    <vaadin-text-field id="contraordenacoes_idresponsabilidade" name="contraordenacoes_idresponsabilidade" label="Responsabilidade" value="" disabled="{{ _lockFields }}" required error-message="O campo Responsabilidade é de preenchimento obrigatório"></vaadin-text-field>
                                                </div>
                                            </div>

                                            <div class="row break_clear">
                                                <div class="col-md-2">
                                                    <vaadin-text-field id="contraordenacoes_valor" name="contraordenacoes_valor" label="Valor" value="" disabled="{{ _lockFields }}" type="number" class="alignRight"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-9">
                                                    <vaadin-text-field id="contraordenacoes_observacoes" name="contraordenacoes_observacoes" label="Observações" value="" disabled="{{ _lockFields }}" maxlength="2000"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-1" style="padding-top:15px">
                                                    <paper-button raised id="btn_createContraOrdenacoes" class="btnSave" on-tap="_createContraOrdenacoes" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                </div>
                                            </div>
                                        </paper-collapse-item>
                                    </div>
                                </paper-collapse-item>

                                <!--Afetação / Departamento-->
                                <paper-collapse-item class="panel-heading" header="Afetação / Departamento" closed>
                                    <vaadin-grid id="gridAfetacaoDepartamento" aria-label="gridAfetacaoDepartamento" items="" class="grid" multi-sort="true" column-reordering-allowed>
                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="departamentoNAV">Departamento Navision</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="departamentoNAV" />
                                            </template>
                                            <template>
                                                {{item.departamentoNAV}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="areaReal">Área Real</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="areaReal" />
                                            </template>
                                            <template>
                                                {{item.areaReal}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="areaRealLocalExato">Área Real Local Exato</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="areaRealLocalExato" />
                                            </template>
                                            <template>
                                                {{item.areaRealLocalExato}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="codigoRegiao">Código Região</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="codigoRegiao" />
                                            </template>
                                            <template>
                                                {{item.codigoRegiao}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="codigoAreaFuncional">Código Área Funcional</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="codigoAreaFuncional" />
                                            </template>
                                            <template>
                                                {{item.codigoAreaFuncional}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="codigoCentroResponsabilidade">Código Centro Responsabilidade</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="codigoCentroResponsabilidade" />
                                            </template>
                                            <template>
                                                {{item.codigoCentroResponsabilidade}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="inicioAfetacao">Início Afetação</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="inicioAfetacao" />
                                            </template>
                                            <template>
                                                {{item.inicioAfetacao}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="fimAfetacao">Fim Afetação</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="fimAfetacao" />
                                            </template>
                                            <template>
                                                {{item.fimAfetacao}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="observacoes">Observações</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="observacoes" />
                                            </template>
                                            <template>
                                                {{item.observacoes}}
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>

                                    <div style="padding-left:50px">
                                        <paper-collapse-item class="panel-heading" header="Inserir" closed hidden>
                                            <div class="row break_clear">
                                                <div class="col-md-2">
                                                    <vaadin-text-field id="departamentoNAV" name="departamentoNAV" label="Departamento Navision" value="" disabled="{{ !_permissions.update }}"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="areaReal" name="areaReal" label="Área Real" value="" disabled="{{ !_permissions.update }}"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="areaRealLocalExato" name="areaRealLocalExato" label="Área Real Local Exato" value="" disabled="{{ !_permissions.update }}"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="codigoRegiao" name="codigoRegiao" label="Código Região" value="" disabled="{{ !_permissions.update }}"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="codigoAreaFuncional" name="codigoAreaFuncional" label="Código Área Funcional" value="" disabled="{{ !_permissions.update }}"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="codigoCentroResponsabilidade" name="codigoCentroResponsabilidade" label="Código Centro Responsabilidade" value="" disabled="{{ !_permissions.update }}"></vaadin-text-field>
                                                </div>
                                            </div>

                                            <div class="row break_clear">
                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="inicioAfetacao" name="inicioAfetacao" label="Início Afetação" value="" disabled="{{ !_permissions.update }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="fimAfetacao" name="fimAfetacao" label="Fim Afetação" value="" disabled="{{ !_permissions.update }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="observacoes" name="observacoes" label="Observações" value="" disabled="{{ !_permissions.update }}"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-1" style="padding-top:15px">
                                                    <paper-button raised id="btnAfetacaoDepartamento" class="btnSave" on-tap="_createAfetacaoDepartamento" disabled="{{ !_permissions.update }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                </div>
                                            </div>
                                        </paper-collapse-item>
                                    </div>
                                </paper-collapse-item>

                                <!--Condutores-->
                                <paper-collapse-item class="panel-heading" header="Condutores" closed>
                                    <vaadin-grid id="gridCondutores" aria-label="gridCondutores" items="{{ tabCondutor }}" class="grid" multi-sort="true" column-reordering-allowed>
                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="gestor">Nome do Responsável</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="gestor" />
                                            </template>
                                            <template>
                                                {{item.gestor}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataInicioTexto">Data Início</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataInicioTexto" />
                                            </template>
                                            <template>
                                                {{item.dataInicioTexto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataFimTexto">Data Fim</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataFimTexto" />
                                            </template>
                                            <template>
                                                {{item.dataFimTexto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                            </template>
                                            <template>
                                                <center>
                                                    <paper-button id="btn_deleteCondutor" class="btnRemove tableBtn" raised on-tap="_deleteCondutor" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>

                                    <div style="padding-left:50px">
                                        <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                            <div class="row break_clear">
                                                <div class="col-md-4">
                                                    <such-selectbox id="condutor_idCondutor" name="condutor_idCondutor" value="" label="Nome do Condutor"
                                                                    items="[[ListaCondutores]]"
                                                                    text-path="value"
                                                                    value-path="id"
                                                                    fields='[{"field":"value", "name":"Condutor"}, {"field":"extra", "name":"Nº Mecanográfico"}, {"field":"extra2", "name":"Mail"}]'
                                                                    required error-message="O campo Condutor é de preenchimento obrigatório"
                                                                    disabled="{{ _lockFields }}">
                                                    </such-selectbox>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="condutor_dataInicio" name="condutor_dataInicio" label="Data Início" value="" placeholder="dd/MM/aaaa" required error-message="O campo Data Início é de preenchimento obrigatório"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="condutor_dataFim" name="condutor_dataFim" label="Data Fim" value="" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-1" style="padding-top:15px">
                                                    <paper-button raised id="btnCondutores" class="btnSave" on-tap="_createCondutor" disabled="{{ !_permissions.update }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                </div>
                                            </div>
                                        </paper-collapse-item>
                                    </div>
                                </paper-collapse-item>

                                <!--Responsáveis-->
                                <paper-collapse-item class="panel-heading" header="Responsáveis" closed>
                                    <vaadin-grid id="gridGestores" aria-label="gridGestores" items="{{ tabGestor }}" class="grid" multi-sort="true" column-reordering-allowed>
                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="gestor">Nome do Responsável</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="gestor" />
                                            </template>
                                            <template>
                                                {{item.gestor}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataInicioTexto">Data Início</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataInicioTexto" />
                                            </template>
                                            <template>
                                                {{item.dataInicioTexto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataFimTexto">Data Fim</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataFimTexto" />
                                            </template>
                                            <template>
                                                {{item.dataFimTexto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                            </template>
                                            <template>
                                                <center>
                                                    <paper-button id="btn_deleteGestor" class="btnRemove tableBtn" raised on-tap="_deleteGestor" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>

                                    <div style="padding-left:50px">
                                        <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                            <div class="row break_clear">
                                                <div class="col-md-4">
                                                    <such-selectbox id="gestor_idGestor" name="gestor_idGestor" value="" label="Nome do Responsável"
                                                                    items="[[ListaResponsaveis]]"
                                                                    text-path="value"
                                                                    value-path="id"
                                                                    fields='[{"field":"value", "name":"Responsável"}, {"field":"extra", "name":"Nº Mecanográfico"}, {"field":"extra2", "name":"Mail"}]'
                                                                    required error-message="O campo Responsável é de preenchimento obrigatório"
                                                                    disabled="{{ _lockFields }}">
                                                    </such-selectbox>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="gestor_dataInicio" name="gestor_dataInicio" label="Data Início" value="" placeholder="dd/MM/aaaa" required error-message="O campo Data Início é de preenchimento obrigatório"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="gestor_dataFim" name="gestor_dataFim" label="Data Fim" value="" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-1" style="padding-top:15px">
                                                    <paper-button raised id="btnGestores" class="btnSave" on-tap="_createGestor" disabled="{{ !_permissions.update }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                </div>
                                            </div>
                                        </paper-collapse-item>
                                    </div>
                                </paper-collapse-item>

                                <!--Substituição Provisória de Viaturas Não Renting-->
                                <paper-collapse-item class="panel-heading" header="Substituição Provisória de Viaturas Não Renting" closed>
                                    <vaadin-grid id="gridSubstituicaoViaturasNaoRenting" aria-label="gridSubstituicaoViaturasNaoRenting" items="" class="grid" multi-sort="true" column-reordering-allowed>
                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="matricula">Matrícula</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="matricula" />
                                            </template>
                                            <template>
                                                {{item.matricula}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="inicioDaSubstituicao">Início da Substituição</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="inicioDaSubstituicao" />
                                            </template>
                                            <template>
                                                {{item.inicioDaSubstituicao}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="kmNoInicio">Km no Início</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="kmNoInicio" />
                                            </template>
                                            <template>
                                                {{item.kmNoInicio}} km
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="fimDaSubstituicao">Fim da Substituição</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="fimDaSubstituicao" />
                                            </template>
                                            <template>
                                                {{item.fimDaSubstituicao}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="kmNoFim">Km no Fim</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="kmNoFim" />
                                            </template>
                                            <template>
                                                {{item.kmNoFim}} km
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="observacoes">Observações</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="observacoes" />
                                            </template>
                                            <template>
                                                {{item.observacoes}}
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>

                                    <div style="padding-left:50px">
                                        <paper-collapse-item class="panel-heading" header="Inserir" closed hidden>
                                            <div class="row break_clear">
                                                <div class="col-md-2">
                                                    <vaadin-text-field id="matricula" name="matricula" label="Matrícula" value="" disabled="{{ !_permissions.update }}" placeholder="xx-xx-xx"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="inicioDaSubstituicao" name="inicioDaSubstituicao" label="Início da Substituição" value="" disabled="{{ !_permissions.update }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="kmNoInicio" name="kmNoInicio" label="Km no Início" value="" disabled="{{ !_permissions.update }}"><div slot="suffix">km</div></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="fimDaSubstituicao" name="fimDaSubstituicao" label="Fim da Substituição" value="" disabled="{{ !_permissions.update }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="kmNoFim" name="kmNoFim" label="Km no Fim" value="" disabled="{{ !_permissions.update }}"><div slot="suffix">km</div></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="observacoes" name="observacoes" label="Observações" value="" disabled="{{ !_permissions.update }}"></vaadin-text-field>
                                                </div>
                                            </div>

                                            <div class="row break_clear">
                                                <div class="col-md-1" style="padding-top:15px">
                                                    <paper-button raised id="btnSubstituicaoViaturasNaoRenting" class="btnSave" on-tap="_createSubstituicaoViaturasNaoRenting" disabled="{{ !_permissions.update }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                </div>
                                            </div>
                                        </paper-collapse-item>
                                    </div>
                                </paper-collapse-item>

                                <!--Abate (Apenas Consulta)-->
                                <paper-collapse-item class="panel-heading" header="Abate (Apenas Consulta)" closed>
                                    <vaadin-grid id="gridAbate" aria-label="gridAbate" items="" class="grid" multi-sort="true" column-reordering-allowed>
                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="tipoDeAtoAdministrativo">Tipo de Ato Administrativo</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="tipoDeAtoAdministrativo" />
                                            </template>
                                            <template>
                                                {{item.tipoDeAtoAdministrativo}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="noDeRegisto">Nº de Registo</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="noDeRegisto" />
                                            </template>
                                            <template>
                                                {{item.noDeRegisto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="descricaoDoAto">Descrição do Ato</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="descricaoDoAto" />
                                            </template>
                                            <template>
                                                {{item.descricaoDoAto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="fundamentacao">Fundamentação</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="fundamentacao" />
                                            </template>
                                            <template>
                                                {{item.fundamentacao}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="autor">Autor</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="autor" />
                                            </template>
                                            <template>
                                                {{item.autor}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="data">Data</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="data" />
                                            </template>
                                            <template>
                                                {{item.data}}
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>
                                </paper-collapse-item>
                            </div>

                            <!--Histórico-->
                            <div>
                                <!--Estado-->
                                <paper-collapse-item class="panel-heading" header="Estado">
                                    <vaadin-grid id="gridEstado" aria-label="gridEstado" items="{{ tabEstado }}" class="grid" multi-sort="true" column-reordering-allowed>
                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="estado">Estado</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="estado" />
                                            </template>
                                            <template>
                                                {{item.estado}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataInicioTexto">Data Início</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataInicioTexto" />
                                            </template>
                                            <template>
                                                {{item.dataInicioTexto}}
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>
                                </paper-collapse-item>

                                <!--Dimensões-->
                                <paper-collapse-item class="panel-heading" header="Dimensão">
                                    <vaadin-grid id="gridDimensao" aria-label="gridDimensao" items="{{ tabDimensao }}" class="grid" multi-sort="true" column-reordering-allowed>
                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="regiao">Região</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="regiao" />
                                            </template>
                                            <template>
                                                {{item.regiao}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="area">Área Funcional</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="area" />
                                            </template>
                                            <template>
                                                {{item.area}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="cresp">Centro de Responsabilidade</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="cresp" />
                                            </template>
                                            <template>
                                                {{item.cresp}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataInicioTexto">Data Início</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataInicioTexto" />
                                            </template>
                                            <template>
                                                {{item.dataInicioTexto}}
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>
                                </paper-collapse-item>

                                <!--Parqueamento-->
                                <paper-collapse-item class="panel-heading" header="Parqueamento" closed>
                                    <vaadin-grid id="gridParqueamento" aria-label="gridParqueamento" items="{{ tabParqueamento }}" class="grid" multi-sort="true" column-reordering-allowed>
                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="local">Local Parqueamento</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="local" />
                                            </template>
                                            <template>
                                                {{item.local}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataInicioTexto">Data Início</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataInicioTexto" />
                                            </template>
                                            <template>
                                                {{item.dataInicioTexto}}
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>
                                </paper-collapse-item>

                                <!--Propriedade-->
                                <paper-collapse-item class="panel-heading" header="Propriedade" closed>
                                    <vaadin-grid id="gridPropriedade" aria-label="gridPropriedade" items="{{ tabPropriedade }}" class="grid" multi-sort="true" column-reordering-allowed>
                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="tipoPropriedade">Tipo de Propriedade</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="tipoPropriedade" />
                                            </template>
                                            <template>
                                                {{item.tipoPropriedade}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="propriedade">Propriedade</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="propriedade" />
                                            </template>
                                            <template>
                                                {{item.propriedade}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable>
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataInicioTexto">Data Início</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataInicioTexto" />
                                            </template>
                                            <template>
                                                {{item.dataInicioTexto}}
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>
                                </paper-collapse-item>
                            </div>

                            <!--Contrato Renting-->
                            <!--<div>-->
                            <!--Contrato-->
                            <!--<paper-collapse-item class="panel-heading" header="Contrato" closed>
                            <vaadin-grid id="gridContratoHistorico" aria-label="gridContratoHistorico" items="" class="grid" multi-sort="true" column-reordering-allowed>
                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="noContrato">Nº Contrato</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="noContrato" />
                                    </template>
                                    <template>
                                        {{item.noContrato}}
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="kmIniciais">Km Iniciais</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="kmIniciais" />
                                    </template>
                                    <template>
                                        {{item.kmIniciais}} km
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="kmContratados">Km Contratados</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="kmContratados" />
                                    </template>
                                    <template>
                                        {{item.kmContratados}} km
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="precoKmAdicionalSemIVA">Preço Km Adicional Sem IVA</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="precoKmAdicionalSemIVA" />
                                    </template>
                                    <template>
                                        {{item.precoKmAdicionalSemIVA}} €
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="precoKmNaoPercorridoSemIVA">Preço Km Não Percorrido Sem IVA</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="precoKmNaoPercorridoSemIVA" />
                                    </template>
                                    <template>
                                        {{item.precoKmNaoPercorridoSemIVA}} €
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="kmMaximo">Km Máximo</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="kmMaximo" />
                                    </template>
                                    <template>
                                        {{item.kmMaximo}} km
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="dataInicio">Data de Início</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="dataInicio" />
                                    </template>
                                    <template>
                                        {{item.dataInicio}}
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="dataTermo">Data de Termo</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="dataTermo" />
                                    </template>
                                    <template>
                                        {{item.dataTermo}}
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="inicioPagamento">Início Pagamento</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="inicioPagamento" />
                                    </template>
                                    <template>
                                        {{item.inicioPagamento}}
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="noPagamentos">Nº Pagamentos</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="noPagamentos" />
                                    </template>
                                    <template>
                                        {{item.noPagamentos}}
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="periodicidade">Periodicidade</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="periodicidade" />
                                    </template>
                                    <template>
                                        {{item.periodicidade}}
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="totalSemIVA">Total Sem IVA</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="totalSemIVA" />
                                    </template>
                                    <template>
                                        {{item.totalSemIVA}} €
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="iva">IVA</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="iva" />
                                    </template>
                                    <template>
                                        {{item.iva}} €
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="totalComIVA">Total Com IVA</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="totalComIVA" />
                                    </template>
                                    <template>
                                        {{item.totalComIVA}} €
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="franquiaSemIVA">Franquia Sem IVA</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="franquiaSemIVA" />
                                    </template>
                                    <template>
                                        {{item.franquiaSemIVA}} €
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="responsavelContrato">Responsável Contrato</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="responsavelContrato" />
                                    </template>
                                    <template>
                                        {{item.responsavelContrato}}
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="observacoesContrato">Observações Contrato</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="observacoesContrato" />
                                    </template>
                                    <template>
                                        {{item.observacoesContrato}}
                                    </template>
                                </vaadin-grid-column>

                            </vaadin-grid>

                            <div style="padding-left:50px">
                                <paper-collapse-item class="panel-heading" header="Inserir" closed hidden>
                                    <div class="row break_clear">
                                        <div class="col-md-2">
                                            <vaadin-text-field id="noContrato" name="noContrato" label="Nº Contrato" value=""></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="kmIniciais" name="kmIniciais" label="Km Iniciais" value=""><div slot="suffix">km</div></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="kmContratados" name="kmContratados" label="Km Contratados" value=""><div slot="suffix">km</div></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="precoKmAdicionalSemIVA" name="precoKmAdicionalSemIVA" label="Preço Km Adicional Sem IVA" value=""><div slot="suffix">€</div></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="precoKmNaoPercorridoSemIVA" name="precoKmNaoPercorridoSemIVA" label="Preço Km Não Percorrido Sem IVA" value=""><div slot="suffix">€</div></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="kmMaximo" name="kmMaximo" label="Km Máximo" value=""><div slot="suffix">km</div></vaadin-text-field>
                                        </div>
                                    </div>

                                    <div class="row break_clear">
                                        <div class="col-md-2">
                                            <vaadin-date-picker id="dataInicio" name="dataInicio" label="Data de Início" value="" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-date-picker id="dataTermo" name="dataTermo" label="Data de Termo" value="" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-date-picker id="inicioPagamento" name="inicioPagamento" label="Início Pagamento" value="" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="noPagamentos" name="noPagamentos" label="Nº Pagamentos" value=""></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="periodicidade" name="periodicidade" label="Periodicidade" value=""></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="totalSemIVA" name="totalSemIVA" label="Total Sem IVA" value=""><div slot="suffix">€</div></vaadin-text-field>
                                        </div>
                                    </div>

                                    <div class="row break_clear">
                                        <div class="col-md-2">
                                            <vaadin-text-field id="iva" name="iva" label="IVA" value=""><div slot="suffix">€</div></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="totalComIVA" name="totalComIVA" label="Total Com IVA" value=""><div slot="suffix">€</div></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="franquiaSemIVA" name="franquiaSemIVA" label="Franquia Sem IVA" value=""><div slot="suffix">€</div></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="responsavelContrato" name="responsavelContrato" label="Responsável Contrato" value=""></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="observacoesContrato" name="observacoesContrato" label="Observações Contrato" value=""></vaadin-text-field>
                                        </div>

                                        <div class="col-md-1" style="padding-top:15px">
                                            <paper-button raised id="btnContratoHistorico" class="btnSave" on-tap="_createContratoHistorico" disabled="{{ !_permissions.update }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                        </div>
                                    </div>
                                </paper-collapse-item>
                            </div>
                        </paper-collapse-item>-->
                            <!--Alterações ao Contrato-->
                            <!--<paper-collapse-item class="panel-heading" header="Alterações ao Contrato" closed>
                            <vaadin-grid id="gridAlteracoesContratoHistorico" aria-label="gridAlteracoesContratoHistorico" items="" class="grid" multi-sort="true" column-reordering-allowed>
                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="dataPedido">Data do Pedido</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="dataPedido" />
                                    </template>
                                    <template>
                                        {{item.dataPedido}}
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="autorizadoFINLOG">Autorizado FINLOG</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="autorizadoFINLOG" />
                                    </template>
                                    <template>
                                        {{item.autorizadoFINLOG}}
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="dataAlteracaoKm">Data Alteração Km</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="dataAlteracaoKm" />
                                    </template>
                                    <template>
                                        {{item.dataAlteracaoKm}}
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="kmAlteracao">Km Alteração</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="kmAlteracao" />
                                    </template>
                                    <template>
                                        {{item.kmAlteracao}} km
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="mensalidadeAlteracao">Mensalidade Alteração</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="mensalidadeAlteracao" />
                                    </template>
                                    <template>
                                        {{item.mensalidadeAlteracao}}
                                    </template>
                                </vaadin-grid-column>

                                <vaadin-grid-column resizable>
                                    <template class="header">
                                        <vaadin-grid-sorter path="notas">Notas</vaadin-grid-sorter>
                                        <vaadin-grid-filter path="notas" />
                                    </template>
                                    <template>
                                        {{item.notas}}
                                    </template>
                                </vaadin-grid-column>
                            </vaadin-grid>

                            <div style="padding-left:50px">
                                <paper-collapse-item class="panel-heading" header="Inserir" closed hidden>
                                    <div class="row break_clear">
                                        <div class="col-md-2">
                                            <vaadin-date-picker id="dataPedido" name="dataPedido" label="Data do Pedido" value="" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="autorizadoFINLOG" name="autorizadoFINLOG" label="Autorizado FINLOG" value=""></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-date-picker id="dataAlteracaoKm" name="dataAlteracaoKm" label="Data Alteração Km" value="" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="kmAlteracao" name="kmAlteracao" label="Km Alteração" value=""><div slot="suffix">km</div></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="mensalidadeAlteracao" name="mensalidadeAlteracao" label="Mensalidade Alteração" value=""></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="notas" name="notas" label="Notas" value=""></vaadin-text-field>
                                        </div>
                                    </div>

                                    <div class="row break_clear">
                                        <div class="col-md-1" style="padding-top:15px">
                                            <paper-button raised id="btnAlteracoesContratoHistorico" class="btnSave" on-tap="_createAlteracoesContratoHistorico" disabled="{{ !_permissions.update }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                        </div>
                                    </div>
                                </paper-collapse-item>
                            </div>
                        </paper-collapse-item>-->
                            <!--Resumo Km Viatura Renting para Rotação de Viaturas (Apenas Consulta)-->
                            <!--<paper-collapse-item class="panel-heading" header="Resumo Km Viatura Renting para Rotação de Viaturas (Apenas Consulta)" closed>
                                <vaadin-grid id="gridResumoViaturaRenting" aria-label="gridResumoViaturaRenting" items="" class="grid" multi-sort="true" column-reordering-allowed>
                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="inicioContrato">Início Contrato</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="inicioContrato" />
                                        </template>
                                        <template>
                                            {{item.inicioContrato}}
                                        </template>
                                    </vaadin-grid-column>

                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="termoContrato">Termo Contrato</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="termoContrato" />
                                        </template>
                                        <template>
                                            {{item.termoContrato}}
                                        </template>
                                    </vaadin-grid-column>

                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="noDiasContrato">Nº Dias do Contrato</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="noDiasContrato" />
                                        </template>
                                        <template>
                                            {{item.noDiasContrato}}
                                        </template>
                                    </vaadin-grid-column>

                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="noDiasParaTermoContrato">Nº Dias para Termo Contrato</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="noDiasParaTermoContrato" />
                                        </template>
                                        <template>
                                            {{item.noDiasParaTermoContrato}}
                                        </template>
                                    </vaadin-grid-column>

                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="kmContratados">Km Contratados</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="kmContratados" />
                                        </template>
                                        <template>
                                            {{item.kmContratados}} km
                                        </template>
                                    </vaadin-grid-column>

                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="kmUltimaLeitura">Km na Última Leitura</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="kmUltimaLeitura" />
                                        </template>
                                        <template>
                                            {{item.kmUltimaLeitura}} km
                                        </template>
                                    </vaadin-grid-column>

                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="dataUltimaLeitura">Data Última Leitura</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="dataUltimaLeitura" />
                                        </template>
                                        <template>
                                            {{item.dataUltimaLeitura}}
                                        </template>
                                    </vaadin-grid-column>

                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="kmGastos">Km Gastos</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="kmGastos" />
                                        </template>
                                        <template>
                                            {{item.kmGastos}} km
                                        </template>
                                    </vaadin-grid-column>

                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="kmRestam">Km Restam</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="kmRestam" />
                                        </template>
                                        <template>
                                            {{item.kmRestam}} km
                                        </template>
                                    </vaadin-grid-column>

                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="noDiasDecorridosContrato">Nº Dias Decorridos do Contrato até Data Leitura</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="noDiasDecorridosContrato" />
                                        </template>
                                        <template>
                                            {{item.noDiasDecorridosContrato}}
                                        </template>
                                    </vaadin-grid-column>

                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="noDiasTermoContrato">Nº Dias para Termo Contrato desde Leitura</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="noDiasTermoContrato" />
                                        </template>
                                        <template>
                                            {{item.noDiasTermoContrato}}
                                        </template>
                                    </vaadin-grid-column>

                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="diferencaHojeUltimaLeitura">Diferença Hoje e Última Leitura (dias)</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="diferencaHojeUltimaLeitura" />
                                        </template>
                                        <template>
                                            {{item.diferencaHojeUltimaLeitura}}
                                        </template>
                                    </vaadin-grid-column>

                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="mediaKmContratados">Média Km Dia Contratados</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="mediaKmContratados" />
                                        </template>
                                        <template>
                                            {{item.mediaKmContratados}} km
                                        </template>
                                    </vaadin-grid-column>

                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="kmEsperadosDataLeitura">Km Esperados na Data da Leitura</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="kmEsperadosDataLeitura" />
                                        </template>
                                        <template>
                                            {{item.kmEsperadosDataLeitura}} km
                                        </template>
                                    </vaadin-grid-column>

                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="kmPercorridosKmEsperados">Km Percorridos / Km Esperados</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="kmPercorridosKmEsperados" />
                                        </template>
                                        <template>
                                            {{item.kmPercorridosKmEsperados}} km
                                        </template>
                                    </vaadin-grid-column>

                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="tempoDecorrido">% Tempo Decorrido</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="tempoDecorrido" />
                                        </template>
                                        <template>
                                            {{item.tempoDecorrido}} km
                                        </template>
                                    </vaadin-grid-column>

                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="kmPercorridos">% Km Percorridos</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="kmPercorridos" />
                                        </template>
                                        <template>
                                            {{item.kmPercorridos}} km
                                        </template>
                                    </vaadin-grid-column>

                                    <vaadin-grid-column resizable>
                                        <template class="header">
                                            <vaadin-grid-sorter path="relacaoTempoKm">Relação Tempo Km</vaadin-grid-sorter>
                                            <vaadin-grid-filter path="relacaoTempoKm" />
                                        </template>
                                        <template>
                                            {{item.relacaoTempoKm}}
                                        </template>
                                    </vaadin-grid-column>
                                </vaadin-grid>
                            </paper-collapse-item>
                        </div>-->
                        </iron-pages>
                    </div>
                </div>
            </div>
        </div>

        <paper-dialog id="dlgEstado" modal style="width:300px; height:175px">
            <div class="row break_clear">
                <div class="col-md-12">
                    <vaadin-date-picker label="Data do novo Estado" id="dpStartDateEstado" name="dpStartDateEstado" required error-message="Este campo é obrigatório"></vaadin-date-picker>
                </div>
            </div>
            <div class="buttons">
                <paper-button raised class="btnEdit" on-tap="_novaDataEstado">Nova Data</paper-button>
                <paper-button raised class="btnRemove" on-tap="_closeDlgEstado">Fechar</paper-button>
            </div>
        </paper-dialog>

        <paper-dialog id="dlgDimensao" modal style="width:300px; height:175px">
            <div class="row break_clear">
                <div class="col-md-12">
                    <vaadin-date-picker label="Data da nova Dimensão" id="dpStartDateDimensao" name="dpStartDateDimensao" required error-message="Este campo é obrigatório"></vaadin-date-picker>
                </div>
            </div>
            <div class="buttons">
                <paper-button raised class="btnEdit" on-tap="_novaDataDimensao">Nova Data</paper-button>
                <paper-button raised class="btnRemove" on-tap="_closeDlgDimensao">Fechar</paper-button>
            </div>
        </paper-dialog>

        <paper-dialog id="dlgParqueamento" modal style="width:300px; height:175px">
            <div class="row break_clear">
                <div class="col-md-12 ">
                    <vaadin-date-picker label="Data do novo Parqueamento" id="dpStartDateParqueamento" name="dpStartDateParqueamento" required error-message="Este campo é obrigatório"></vaadin-date-picker>
                </div>
            </div>
            <div class="buttons">
                <paper-button raised class="btnEdit" on-tap="_novaDataParqueamento">Nova Data</paper-button>
                <paper-button raised class="btnRemove" on-tap="_closeDlgParqueamento">Fechar</paper-button>
            </div>
        </paper-dialog>

        <paper-dialog id="dlgPropriedade" modal style="width:300px; height:175px">
            <div class="row break_clear">
                <div class="col-md-12 ">
                    <vaadin-date-picker label="Data da nova Propriedade" id="dpStartDatePropriedade" name="dpStartDatePropriedade" required error-message="Este campo é obrigatório"></vaadin-date-picker>
                </div>
            </div>
            <div class="buttons">
                <paper-button raised class="btnEdit" on-tap="_novaDataPropriedade">Nova Data</paper-button>
                <paper-button raised class="btnRemove" on-tap="_closeDlgPropriedade">Fechar</paper-button>
            </div>
        </paper-dialog>

        <paper-toast id="ToastMessage" duration="4000" horizontalAlign="right" class="toastSuccess">&nbsp;<i class="fa fa-check fa-lg" aria-hidden="true"></i></paper-toast>
        <paper-toast id="ToastError" duration="4000" horizontalAlign="right" class="toastError">&nbsp;<i class="fa fa-exclamation-triangle" aria-hidden="true"></i></paper-toast>

    </template>

    <script>
        document.addEventListener('WebComponentsReady', function () {
            Polymer({
                is: 'x-viaturas2details',
                properties: {
                    _matricula: {
                        type: String,
                        notify: true,
                        value: ""
                    },
                    _areaid: {
                        type: Number,
                        notify: true,
                        value: 0
                    },
                    _permissions: {
                        type: Array
                    },
                    selected: {
                        type: Number,
                        value: 0
                    },
                    _isCreate: {
                        type: Boolean,
                        value: false
                    },
                    _modelo: {
                        type: String,
                        value: ""
                    },
                    _centro: {
                        type: String,
                        value: ""
                    },
                    _propriedade: {
                        type: String,
                        value: ""
                    },
                    _lockFields: {
                        type: Boolean,
                        value: true
                    },
                    _viewMenuItems: {
                        type: Array,
                        value: [{ value: 1, description: "Mov. Projeto" }, { value: 2, description: "Mov. Contabilidade" }]
                    },
                },

                ready: function () {
                    //GET PROJECT DATA
                    this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_databound_ajax.generateRequest();

                    this.$.page_tabKm_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabKm_ajax.generateRequest();
                    this.$.gridInspecao.clearCache();

                    this.$.page_tabManutencao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabManutencao_ajax.generateRequest();
                    this.$.gridInspecao.clearCache();

                    this.$.page_tabinspecao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabinspecao_ajax.generateRequest();
                    this.$.gridInspecao.clearCache();

                    this.$.page_tabCartaVerde_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabCartaVerde_ajax.generateRequest();
                    this.$.gridInspecao.clearCache();

                    this.$.page_tabAcidentes_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabAcidentes_ajax.generateRequest();
                    this.$.gridInspecao.clearCache();

                    this.$.page_tabContraOrdenacoes_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabContraOrdenacoes_ajax.generateRequest();
                    this.$.gridInspecao.clearCache();

                    this.$.page_tabcondutor_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabcondutor_ajax.generateRequest();
                    this.$.gridGestores.clearCache();

                    this.$.page_tabgestor_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabgestor_ajax.generateRequest();
                    this.$.gridGestores.clearCache();

                    this.$.page_tabestado_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabestado_ajax.generateRequest();
                    this.$.gridEstado.clearCache();

                    this.$.page_tabdimensao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabdimensao_ajax.generateRequest();
                    this.$.gridDimensao.clearCache();

                    this.$.page_tabparqueamento_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabparqueamento_ajax.generateRequest();
                    this.$.gridParqueamento.clearCache();

                    this.$.page_tabpropriedade_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabpropriedade_ajax.generateRequest();
                    this.$.gridPropriedade.clearCache();

                    this.$.info_uploadimage.addEventListener('upload-response', function (e) {
                        var results = JSON.parse(e.detail.xhr.response);
                        if (results == true) {
                            var msg = document.querySelector("x-viaturas2details");
                            msg._openToast("Imagem gravada com sucesso.");
                        }
                        else {
                            var msg = document.querySelector("x-viaturas2details");
                            msg._openToastError("Só é permitido imagens com extensão jpg.");
                        }
                    });
                },

                _openToast: function (message) {
                    this.$.ToastMessage.text = message;
                    this.$.ToastMessage.open();
                },

                _openToastError: function (message) {
                    this.$.ToastError.text = message;
                    this.$.ToastError.open();
                },

                _goBack: function () {
                    window.location.href = "../Viaturas2/";
                },
                _goToViaturasList: function () {
                    window.location.href = "../Viaturas2";
                },
                _goToViatura: function () {
                    window.location.href = "../DetalhesViatura2/" + this.data.matricula;
                },
                _goRefresh: function () {
                    location.reload();
                },


                _validateData: function () {
                    debugger;
                    //var polymerDom = Polymer.dom(this.root);
                    var errors = 0;
                    //var formSelector = "vaadin-text-field, vaadin-date-picker, vaadin-combo-box";
                    //var formFields = polymerDom.querySelectorAll(formSelector);

                    //formFields.forEach(function (element) {
                    //    if (!element.validate()) errors++;
                    //});

                    if (this.$.geral_marca.value == null || this.$.geral_marca.value == "") {
                        this.$.geral_marca.validate();
                        errors = errors + 1;
                    }

                    if (this.$.geral_modelo.value == null || this.$.geral_modelo.value == "") {
                        this.$.geral_modelo.validate();
                        errors = errors + 1;
                    }

                    if (this.$.geral_estado.value == null || this.$.geral_estado.value == "") {
                        this.$.geral_estado.validate();
                        errors = errors + 1;
                    }

                    if (this.$.geral_codRegiao.value == null || this.$.geral_codRegiao.value == "") {
                        this.$.geral_codRegiao.validate();
                        errors = errors + 1;
                    }

                    if (this.$.geral_codAreaFuncional.value == null || this.$.geral_codAreaFuncional.value == "") {
                        this.$.geral_codAreaFuncional.validate();
                        errors = errors + 1;
                    }

                    if (this.$.geral_codCentroResponsabilidade.value == null || this.$.geral_codCentroResponsabilidade.value == "") {
                        this.$.geral_codCentroResponsabilidade.validate();
                        errors = errors + 1;
                    }

                    if (this.$.geral_categoria.value == null || this.$.geral_categoria.value == "") {
                        this.$.geral_categoria.validate();
                        errors = errors + 1;
                    }

                    if (this.$.geral_tipo.value == null || this.$.geral_tipo.value == "") {
                        this.$.geral_tipo.validate();
                        errors = errors + 1;
                    }

                    if (this.$.geral_tipoPropriedade.value == null || this.$.geral_tipoPropriedade.value == "") {
                        this.$.geral_tipoPropriedade.validate();
                        errors = errors + 1;
                    }

                    if ((this.$.geral_tipoPropriedade.value == "" || this.$.geral_tipoPropriedade.value == 1 || this.$.geral_tipoPropriedade.value == 2) && (this.$.geral_propriedade.value == null || this.$.geral_propriedade.value == "")) {
                        this.$.geral_propriedade.validate();
                        errors = errors + 1;
                    }

                    if (this.$.geral_dataAquisicao.value == null || this.$.geral_dataAquisicao.value == "") {
                        this.$.geral_dataAquisicao.validate();
                        errors = errors + 1;
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },

                _create: function () {
                    if (this._validateData()) {
                        if (this.data.idLocalParqueamentoOriginalDB == this.data.idLocalParqueamento) {
                            this._executeRequest("/Viaturas/CreateViatura2", this.data);
                        }
                        else {
                            this.$.dlgParqueamento.open();
                        }
                    }
                },

                _createParqueamento: function () {
                    if (this.$.dpStartDateParqueamentoCreate.value != null && this.$.dpStartDateParqueamentoCreate.value != "") {
                        this.data.dataParqueamento = this.$.dpStartDateParqueamentoCreate.value;
                        this._executeRequest("/Viaturas/CreateViatura2", this.data);
                        this.$.dlgParqueamento.close();
                    }
                    else {
                        this.$.dpStartDateParqueamentoCreate.validate();
                        this._openToastError("O campo Data do novo Parqueamento é de preenchimento obrigatório.");
                    }
                },

                _update: function () {
                    if (this._validateData()) {
                        this._executeRequest("/Viaturas/UpdateViatura2", this.data);
                    }
                },

                _updateParqueamento: function () {
                    if (this.$.dpStartDateParqueamentoUpdate.value != null && this.$.dpStartDateParqueamentoUpdate.value != "") {
                        this.data.dataParqueamento = this.$.dpStartDateParqueamentoUpdate.value;
                        this._executeRequest("/Viaturas/UpdateViatura2", this.data)
                        this.$.dlgParqueamentoUpdate.close();
                    }
                    else {
                        this.$.dpStartDateParqueamentoUpdate.validate();
                        this._openToastError("O campo Data do novo Parqueamento é de preenchimento obrigatório.");
                    }
                },
                _closeDlgParqueamentoUpdate: function () {
                    this.$.dlgParqueamentoUpdate.close();
                },

                _delete: function () {
                    var viatura = this.data;
                    var ajax_request = this.$.page_delete_ajax;
                    bootbox.confirm({
                        message: "Tem a certeza que pretende eliminar a viatura " + this.data.matricula + " ?",
                        buttons: {
                            confirm: {
                                label: 'Sim',
                                className: 'btn-success'
                            },
                            cancel: {
                                label: 'Não',
                                className: 'btn-danger'
                            }
                        },
                        callback: function (result) {
                            if (result) {
                                ajax_request.body = JSON.stringify(viatura);
                                ajax_request.generateRequest();
                            }
                        }
                    });
                },

                _responseProcessor: function (data) {
                    var self = this;

                    if (data.detail.status === 200) {
                        if (data.detail.url.indexOf("GetViatura") !== -1) {
                            window.data = this.data;

                            if (this._matricula == "") {
                                this._isCreate = true;

                                this.$.page_loadImage_ajax.generateRequest();

                                this.$.geral_estado.value = 1;
                            }

                            if (this.data.idEstado == 3 || this.data.idEstado == 4 || this.data.idEstado == 5) {
                                this._lockFields = true;
                            }
                            if ((this._permissions.create == false || this._permissions.update == false) || (this.data.idEstado == 3 || this.data.idEstado == 4 || this.data.idEstado == 5))
                                this._lockFields = true;
                            else
                                this._lockFields = false;

                            this._modelo = this.data.idModelo;
                            this._centro = this.data.codCentroResponsabilidade;
                            this._propriedade = this.data.idPropriedade;

                            this._GetListaModelos();
                            this._GetListaCentros();
                            this._GetListaPropriedades();

                        }

                        else if (data.detail.url.indexOf("Create") !== -1) {
                            this._responseCreateProcessor();
                        }

                        else if (data.detail.url.indexOf("Update") !== -1) {
                            this._responseUpdateProcessor();
                        }
                    } else {
                        this._openToastError("Ocorreu um erro ao criar a viatura.")
                    }
                },

                _responseCreateProcessor: function () {
                    var self = this;
                    if (this.data.eReasonCode == 1) {
                        this._isCreate = false;
                        this._openToast(this.data.eMessage);
                        setTimeout(
                            function () {
                                self._goToViatura();
                            }, 2500);

                    } else {
                        this._openToastError(this.data.eMessage);
                    }
                },

                _responseUpdateProcessor: function () {
                    var self = this;
                    if (this.data.eReasonCode == 1) {
                        this._openToast(this.data.eMessage);
                        setTimeout(
                            function () {
                                self._goRefresh();
                            }, 1000);
                    } else {
                        this._openToastError(this.data.eMessage);
                    }
                },

                _responseDeleteProcessor: function (data) {
                    var self = this;
                    if (data.detail.status === 200) {
                        if (this.deletedData.eReasonCode == 1) {
                            this._openToast(this.deletedData.eMessage);
                            setTimeout(
                                function () {
                                    self._goToViaturasList();
                                }, 2500);
                        } else {
                            this._openToastError(this.deletedData.eMessage);
                        }
                    }
                },

                _executeRequest: function (url, data) {
                    this.$.page_databound_ajax.url = url;
                    this.$.page_databound_ajax.body = JSON.stringify(data);
                    this.$.page_databound_ajax.generateRequest();
                },

                _GetListaModelos: function () {
                    if (this.$.geral_marca.__data.value != "") {
                        this.$.geral_modelo._clearSelection();
                        var marca = this.$.geral_marca.__data.value;

                        this.$.page_GetListaModelos_ajax.body = JSON.stringify(marca);
                        this.$.page_GetListaModelos_ajax.generateRequest();
                    }
                },
                _response_GetListaModelos_Processor: function (result) {
                    this.$.geral_modelo.value = this._modelo;
                    this._modelo = "";
                },

                _GetListaCentros: function () {
                    if (this.$.geral_codAreaFuncional.__data.value != "") {
                        this.$.geral_codCentroResponsabilidade._clearSelection();
                        var codArea = this.$.geral_codAreaFuncional.__data.value;

                        this.$.page_GetListaCentros_ajax.body = JSON.stringify(codArea);
                        this.$.page_GetListaCentros_ajax.generateRequest();
                    }
                },
                _response_GetListaCentros_Processor: function () {
                    this.$.geral_codCentroResponsabilidade.value = this._centro;
                    this._centro = "";
                },

                _GetListaPropriedades: function () {
                    if (this.$.geral_tipoPropriedade.__data.value != "") {
                        this.$.geral_propriedade._clearSelection();
                        var tipoPropriedade = this.$.geral_tipoPropriedade.__data.value;

                        this.$.page_GetListaPropriedades_ajax.body = JSON.stringify(tipoPropriedade);
                        this.$.page_GetListaPropriedades_ajax.generateRequest();
                    }
                },
                _response_GetListaPropriedades_Processor: function () {
                    this.$.geral_propriedade.value = this._propriedade;
                    this._propriedade = "";
                },

                _ConvertDecimals: function (e) {
                    var stringVal = "" + e.target.value;
                    e.target.value = stringVal.replace(",", ".");
                },

                _viewMenuItemSelected: function (e) {
                    if (e.detail.value == 0)
                        return;
                    var item = e.detail.value;

                    if (item == null)
                        return;

                    switch (item.value) {
                        case 1:
                            this._openMovimentos();
                            break;
                        case 2:
                            this._openCustos();
                            break;
                    }
                },

                _openMovimentos: function () {
                    window.location.href = "/Viaturas/Viaturas2Movimentos/" + "?matricula=" + this.data.matricula + "&noProjeto=" + this.data.noProjeto;
                },

                _openCustos: function () {
                    window.location.href = "/Viaturas/Viaturas2Custos/" + "?matricula=" + this.data.matricula + "&noProjeto=" + this.data.noProjeto;
                },

                _createInspecao: function () {
                    if (this._validateDataInspecao()) {
                        this.$.page_CreateViaturas2Inspecao_ajax.body = JSON.stringify({
                            matricula: this._matricula,
                            dataInspecaoTexto: this.$.inspecao_dataInspecao.value,
                            kmInspecao: this.$.inspecao_kmInspecao.value,
                            idResultado: this.$.inspecao_resultado.value,
                            proximaInspecaoTexto: this.$.inspecao_proximaInspecao.value,
                            observacao: this.$.inspecao_observacoes.value
                        });
                        this.$.page_CreateViaturas2Inspecao_ajax.generateRequest();
                        this.$.gridInspecao.clearCache();
                    }
                },
                _responseCreateViaturas2Inspecao: function () {
                    if (this.createViaturas2InspecaoResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2InspecaoResult.eMessage);

                        this.$.inspecao_dataInspecao.value = "";
                        this.$.inspecao_kmInspecao.value = "";
                        this.$.inspecao_resultado.value = "";
                        this.$.inspecao_proximaInspecao.value = "";
                        this.$.inspecao_observacoes.value = "";

                        this.$.page_tabestado_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabestado_ajax.generateRequest();
                        this.$.gridEstado.clearCache();

                        this.$.page_tabdimensao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabdimensao_ajax.generateRequest();
                        this.$.gridDimensao.clearCache();

                        this.$.page_tabparqueamento_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabparqueamento_ajax.generateRequest();
                        this.$.gridParqueamento.clearCache();

                        this.$.page_tabpropriedade_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabpropriedade_ajax.generateRequest();
                        this.$.gridPropriedade.clearCache();
                    } else {
                        this._openToastError(this.createViaturas2InspecaoResult.eMessage);
                    }
                },

                _createCondutor: function () {
                    debugger;
                    if (this._validateDataCondutor()) {
                        this.$.page_CreateViaturas2Condutor_ajax.body = JSON.stringify({
                            matricula: this._matricula,
                            idGestor: this.$.condutor_idCondutor.value,
                            dataInicio: this.$.condutor_dataInicio.value,
                            dataFim: this.$.condutor_dataFim.value
                        });
                        this.$.page_CreateViaturas2Condutor_ajax.generateRequest();
                        this.$.gridCondutores.clearCache();
                    }
                },
                _responseCreateViaturas2Condutor: function () {
                    debugger;
                    if (this.createViaturas2CondutorResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2CondutorResult.eMessage);

                        this.$.condutor_idCondutor._clearSelection();
                        this.$.condutor_dataInicio.value = "";
                        this.$.condutor_dataFim.value = "";

                        this.$.page_tabcondutor_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabcondutor_ajax.generateRequest();
                        this.$.gridCondutores.clearCache();
                    } else {
                        this._openToastError(this.createViaturas2CondutorResult.eMessage);
                    }
                },

                _validateDataCondutor: function () {
                    debugger;
                    if (this.$.condutor_idCondutor.value == null || this.$.condutor_idCondutor.value == "") {
                        this.$.condutor_idCondutor.validate();
                        errors = errors + 1;
                    }

                    if (this.$.condutor_dataInicio.value == null || this.$.condutor_dataInicio.value == "") {
                        this.$.condutor_dataInicio.validate();
                        errors = errors + 1;
                    }

                    if ((this.$.condutor_dataInicio.value != null && this.$.condutor_dataInicio.value != "") && (this.$.condutor_dataFim.value != null && this.$.condutor_dataFim.value != "")) {
                        var dataInicio = Date.parse(this.$.condutor_dataInicio.value)
                        var dataFim = Date.parse(this.$.condutor_dataFim.value)
                        if (dataInicio > dataFim) {
                            this._openToastError("A data Fim tem que ser superior ou igual à data Início.");
                            errors = errors + 1;
                        }
                    }

                    return true;
                },

                _createGestor: function () {
                    if (this._validateDataGestor()) {
                        this.$.page_CreateViaturas2Gestor_ajax.body = JSON.stringify({
                            matricula: this._matricula,
                            idGestor: this.$.gestor_idGestor.value,
                            dataInicio: this.$.gestor_dataInicio.value,
                            dataFim: this.$.gestor_dataFim.value
                        });
                        this.$.page_CreateViaturas2Gestor_ajax.generateRequest();
                        this.$.gridGestores.clearCache();
                    }
                },
                _responseCreateViaturas2Gestor: function () {
                    if (this.createViaturas2GestorResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2GestorResult.eMessage);

                        this.$.gestor_idGestor._clearSelection();
                        this.$.gestor_dataInicio.value = "";
                        this.$.gestor_dataFim.value = "";

                        this.$.page_tabgestor_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabgestor_ajax.generateRequest();
                        this.$.gridGestores.clearCache();
                    } else {
                        this._openToastError(this.createViaturas2GestorResult.eMessage);
                    }
                },

                _validateDataGestor: function () {
                    if (this.$.gestor_idGestor.value == null || this.$.gestor_idGestor.value == "") {
                        this.$.gestor_idGestor.validate();
                        errors = errors + 1;
                    }

                    if (this.$.gestor_dataInicio.value == null || this.$.gestor_dataInicio.value == "") {
                        this.$.gestor_dataInicio.validate();
                        errors = errors + 1;
                    }

                    if ((this.$.gestor_dataInicio.value != null && this.$.gestor_dataInicio.value != "") && (this.$.gestor_dataFim.value != null && this.$.gestor_dataFim.value != "")) {
                        var dataInicio = Date.parse(this.$.gestor_dataInicio.value)
                        var dataFim = Date.parse(this.$.gestor_dataFim.value)
                        if (dataInicio > dataFim) {
                            this._openToastError("A data Fim tem que ser superior ou igual à data Início.");
                            errors = errors + 1;
                        }
                    }
                    return true;
                },

                _validateDataInspecao: function () {
                    if (this.$.inspecao_dataInspecao.value == null || this.$.inspecao_dataInspecao.value == "") {
                        this.$.inspecao_dataInspecao.validate();
                        errors = errors + 1;
                    }

                    if (this.$.inspecao_kmInspecao.value == null || this.$.inspecao_kmInspecao.value == "") {
                        this.$.inspecao_kmInspecao.validate();
                        errors = errors + 1;
                    }

                    if (this.$.inspecao_resultado.value == null || this.$.inspecao_resultado.value == "") {
                        this.$.inspecao_resultado.validate();
                        errors = errors + 1;
                    }

                    if (this.$.inspecao_proximaInspecao.value == null || this.$.inspecao_proximaInspecao.value == "") {
                        this.$.inspecao_proximaInspecao.validate();
                        errors = errors + 1;
                    }

                    return true;
                },

                _deleteInspecao: function (e) {
                    if (this._permissions.delete == true) {
                        var index = this.tabInspecao.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var dataInspecao = e.model.item.dataInspecaoTexto;
                        var ajax_request = this.$.page_DeleteViaturas2Inspecao_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover a Inspeção realizada no dia " + dataInspecao + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteInspecao) {
                                if (deleteInspecao) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridInspecao.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar Inspeções.');
                    }
                },
                _responseDeleteViaturas2Inspecao: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2InspecaoResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2InspecaoResult.eMessage);

                        this.$.page_tabinspecao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabinspecao_ajax.generateRequest();
                        this.$.gridInspecao.clearCache();
                    } else {
                        this._openToastError(this.deleteViaturas2InspecaoResult.eMessage);
                    }
                },
                
                _openDlgEstado: function () {
                    if (this._isCreate == false && this.$.geral_estado.value != "" && this.data.idEstadoOriginalDB != this.$.geral_estado.value)
                        this.$.dlgEstado.open();
                },
                _openDlgDimensao: function () {
                    if ((this._isCreate == false && this.$.geral_codRegiao.value != "" && this.data.codRegiaoOriginalDB != this.$.geral_codRegiao.value) ||
                        (this._isCreate == false && this.$.geral_codAreaFuncional.value != "" && this.data.codAreaFuncionalOriginalDB != this.$.geral_codAreaFuncional.value) ||
                        (this._isCreate == false && this.$.geral_codCentroResponsabilidade.value != "" && this.data.codCentroResponsabilidadeOriginalDB != this.$.geral_codCentroResponsabilidade.value))
                        
                        this.$.dlgDimensao.open();
                },
                _openDlgParqueamento: function () {
                    if (this._isCreate == false && this.$.geral_localParqueamento.value != "" && this.data.idLocalParqueamentoOriginalDB != this.$.geral_localParqueamento.value)
                        this.$.dlgParqueamento.open();
                },
                _openDlgPropriedade: function () {
                    if (this._isCreate == false && this.$.geral_propriedade.value != "" && this.data.idPropriedadeOriginalDB != this.$.geral_propriedade.value)
                        this.$.dlgPropriedade.open();
                },

                _closeDlgEstado: function () {
                    this.$.geral_estado.value = this.data.idEstadoOriginalDB;
                    this.$.dlgEstado.close();
                },
                _closeDlgDimensao: function () {
                    this.$.geral_codRegiao.value = this.data.codRegiaoOriginalDB;
                    this.$.geral_codAreaFuncional._clearSelection();
                    this.$.geral_codCentroResponsabilidade._clearSelection();
                    this.$.dlgDimensao.close();
                },
                _closeDlgParqueamento: function () {
                    this.$.geral_localParqueamento.value = this.data.idLocalParqueamentoOriginalDB;
                    this.$.dlgParqueamento.close();
                },
                _closeDlgPropriedade: function () {
                    this.$.geral_tipoPropriedade._clearSelection();
                    this.$.geral_propriedade._clearSelection();
                    this.$.dlgPropriedade.close();
                },

                _novaDataEstado: function () {
                    if (this.$.dpStartDateEstado.value == null || this.$.dpStartDateEstado.value == "") {
                        this.$.dpStartDateEstado.validate();
                    }
                    else {
                        if (Date.parse(this.$.dpStartDateEstado.value) > new Date()) {
                            this._openToastError('A Data do Novo Estado não pode ser superior à data atual.');
                        }
                        else {
                            if (Date.parse(this.$.dpStartDateEstado.value) < Date.parse(this.data.dataEstadoLast)) {
                                this._openToastError('A Data do Novo Estado tem que ser superior ou igual á data da ultima mudança da data de Estado.');
                            }
                            else {
                                this.data.dataEstado = this.$.dpStartDateEstado.value;
                                this.$.dlgEstado.close();
                            }
                        }
                    }
                },
                _novaDataDimensao: function () {
                    debugger;
                    if (this.$.dpStartDateDimensao.value == null || this.$.dpStartDateDimensao.value == "") {
                        this.$.dpStartDateDimensao.validate();
                    }
                    else {
                        if (Date.parse(this.$.dpStartDateDimensao.value) > new Date()) {
                            this._openToastError('A Data da nova Dimensão não pode ser superior à data atual.');
                        }
                        else {
                            if (Date.parse(this.$.dpStartDateDimensao.value) < Date.parse(this.data.dataDimensaoLast)) {
                                this._openToastError('A Data da nova Dimensão tem que ser superior ou igual á data da ultima mudança da Dimensão.');
                            }
                            else {
                                this.data.dataDimensao = this.$.dpStartDateDimensao.value;
                                this.$.dlgDimensao.close();
                            }
                        }
                    }
                },
                _novaDataParqueamento: function () {
                    debugger;
                    if (this.$.dpStartDateParqueamento.value == null || this.$.dpStartDateParqueamento.value == "") {
                        this.$.dpStartDateParqueamento.validate();
                    }
                    else {
                        if (Date.parse(this.$.dpStartDateParqueamento.value) > new Date()) {
                            this._openToastError('A Data da Novo Parqueamento não pode ser superior à data atual.');
                        }
                        else {
                            if (Date.parse(this.$.dpStartDateParqueamento.value) < Date.parse(this.data.dataParqueamentoLast)) {
                                this._openToastError('A Data do Novo Estado tem que ser superior ou igual á data da ultima mudança da data de Parqueamento.');
                            }
                            else {
                                this.data.dataParqueamento = this.$.dpStartDateParqueamento.value;
                                this.$.dlgParqueamento.close();
                            }
                        }
                    }
                },
                _novaDataPropriedade: function () {
                    if (this.$.dpStartDatePropriedade.value == null || this.$.dpStartDatePropriedade.value == "") {
                        this.$.dpStartDatePropriedade.validate();
                    }
                    else {
                        if (Date.parse(this.$.dpStartDatePropriedade.value) > new Date()) {
                            this._openToastError('A Data da Nova Propriedade não pode ser superior à data atual.');
                        }
                        else {
                            if (Date.parse(this.$.dpStartDatePropriedade.value) < Date.parse(this.data.dataPropriedadeLast)) {
                                this._openToastError('A Data do Novo Estado tem que ser superior ou igual á data da ultima mudança da data de Propriedade.');
                            }
                            else {
                                this.data.dataPropriedade = this.$.dpStartDatePropriedade.value;
                                this.$.dlgPropriedade.close();
                            }
                        }
                    }
                },

                _deleteCondutor: function (e) {
                    if (this._permissions.delete == true) {
                        var index = this.tabCondutor.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var condutor = e.model.item.gestor;
                        var ajax_request = this.$.page_DeleteViaturas2Condutor_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover o Condutor " + condutor + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteCondutor) {
                                if (deleteCondutor) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridInspecao.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar Condutores.');
                    }
                },
                _responseDeleteViaturas2Condutor: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2CondutorResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2CondutorResult.eMessage);

                        this.$.page_tabcondutor_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabcondutor_ajax.generateRequest();
                        this.$.gridCondutores.clearCache();
                    } else {
                        this._openToastError(this.deleteViaturas2CondutorResult.eMessage);
                    }
                },

                _deleteGestor: function (e) {
                    if (this._permissions.delete == true) {
                        var index = this.tabGestor.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var Gestor = e.model.item.gestor;
                        var ajax_request = this.$.page_DeleteViaturas2Gestor_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover o Gestor " + Gestor + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteGestor) {
                                if (deleteGestor) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridInspecao.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar Gestores.');
                    }
                },
                _responseDeleteViaturas2Gestor: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2GestorResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2GestorResult.eMessage);

                        this.$.page_tabgestor_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabgestor_ajax.generateRequest();
                        this.$.gridGestores.clearCache();
                    } else {
                        this._openToastError(this.Gestor.eMessage);
                    }
                },
            });
        });
    </script>

</dom-module>
